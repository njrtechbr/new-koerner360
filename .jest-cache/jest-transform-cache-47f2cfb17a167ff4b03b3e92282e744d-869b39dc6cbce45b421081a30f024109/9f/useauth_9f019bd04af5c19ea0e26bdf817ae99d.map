{"version":3,"names":["cov_zvv4kw9te","actualCoverage","s","useAuth","f","useProtegerPagina","useProtegerPorPapel","data","sessao","status","_react","useSession","router","_navigation","useRouter","usuario","user","estaCarregando","estaAutenticado","naoAutenticado","redirecionarParaLogin","urlRetorno","loginUrl","b","encodeURIComponent","push","redirecionarParaDashboard","temPapel","papel","role","ehAdmin","ehGerente","ehAtendente","_react1","useEffect","window","location","pathname","papeisPermitidos","temPermissao","some"],"sources":["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\hooks\\use-auth.ts"],"sourcesContent":["'use client';\n\nimport { useSession } from 'next-auth/react';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\n\n/**\n * Hook personalizado para gerenciar autenticação\n * Fornece informações da sessão e funções de utilidade\n */\nexport function useAuth() {\n  const { data: sessao, status } = useSession();\n  const router = useRouter();\n\n  const usuario = sessao?.user;\n  const estaCarregando = status === 'loading';\n  const estaAutenticado = status === 'authenticated';\n  const naoAutenticado = status === 'unauthenticated';\n\n  /**\n   * Redireciona para a página de login se não estiver autenticado\n   */\n  const redirecionarParaLogin = (urlRetorno?: string) => {\n    const loginUrl = urlRetorno\n      ? `/auth/login?callbackUrl=${encodeURIComponent(urlRetorno)}`\n      : '/auth/login';\n    router.push(loginUrl);\n  };\n\n  /**\n   * Redireciona para o dashboard se estiver autenticado\n   */\n  const redirecionarParaDashboard = () => {\n    router.push('/dashboard');\n  };\n\n  /**\n   * Verifica se o usuário tem uma função específica\n   */\n  const temPapel = (papel: string) => {\n    return usuario?.role === papel;\n  };\n\n  /**\n   * Verifica se o usuário é administrador\n   */\n  const ehAdmin = () => {\n    return temPapel('ADMIN');\n  };\n\n  /**\n   * Verifica se o usuário é gerente\n   */\n  const ehGerente = () => {\n    return temPapel('GERENTE');\n  };\n\n  /**\n   * Verifica se o usuário é atendente\n   */\n  const ehAtendente = () => {\n    return temPapel('ATENDENTE');\n  };\n\n  return {\n    // Dados da sessão\n    sessao,\n    usuario,\n\n    // Estados\n    estaCarregando,\n    estaAutenticado,\n    naoAutenticado,\n\n    // Funções de navegação\n    redirecionarParaLogin,\n    redirecionarParaDashboard,\n\n    // Verificações de papel\n    temPapel,\n    ehAdmin,\n    ehGerente,\n    ehAtendente,\n  };\n}\n\n/**\n * Hook para proteger páginas que requerem autenticação\n * Redireciona automaticamente para login se não estiver autenticado\n */\nexport function useProtegerPagina() {\n  const {\n    estaAutenticado,\n    naoAutenticado,\n    estaCarregando,\n    redirecionarParaLogin,\n  } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!estaCarregando && naoAutenticado) {\n      redirecionarParaLogin(window.location.pathname);\n    }\n  }, [estaCarregando, naoAutenticado, redirecionarParaLogin]);\n\n  return {\n    estaAutenticado,\n    estaCarregando,\n  };\n}\n\n/**\n * Hook para proteger páginas que requerem papéis específicos\n */\nexport function useProtegerPorPapel(papeisPermitidos: string[]) {\n  const { usuario, estaAutenticado, estaCarregando, temPapel } = useAuth();\n  const router = useRouter();\n\n  const temPermissao =\n    usuario && papeisPermitidos.some(papel => temPapel(papel));\n\n  useEffect(() => {\n    if (!estaCarregando && estaAutenticado && !temPermissao) {\n      // Redireciona para página de acesso negado ou dashboard\n      router.push('/auth/error?error=AccessDenied');\n    }\n  }, [estaCarregando, estaAutenticado, temPermissao, router]);\n\n  return {\n    temPermissao,\n    estaCarregando,\n    estaAutenticado,\n  };\n}\n"],"mappings":"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","ignoreList":[]}