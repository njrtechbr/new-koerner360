{"version":3,"sources":["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\test\\setup.ts"],"sourcesContent":["import { expect, afterEach, vi } from 'vitest';\nimport { cleanup } from '@testing-library/react';\nimport * as matchers from '@testing-library/jest-dom/matchers';\n\n// Estender expect com matchers do testing-library\nexpect.extend(matchers);\n\n// Limpar após cada teste\nafterEach(() => {\n  cleanup();\n  vi.clearAllMocks();\n});\n\n// Mock do fetch global\nglobal.fetch = vi.fn();\n\n// Mock do localStorage\nconst localStorageMock = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n  length: 0,\n  key: vi.fn(),\n};\n\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Mock do sessionStorage\nconst sessionStorageMock = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n  length: 0,\n  key: vi.fn(),\n};\n\nObject.defineProperty(window, 'sessionStorage', {\n  value: sessionStorageMock,\n});\n\n// Mock do window.location\nObject.defineProperty(window, 'location', {\n  value: {\n    href: 'http://localhost:3000',\n    origin: 'http://localhost:3000',\n    protocol: 'http:',\n    host: 'localhost:3000',\n    hostname: 'localhost',\n    port: '3000',\n    pathname: '/',\n    search: '',\n    hash: '',\n    assign: vi.fn(),\n    replace: vi.fn(),\n    reload: vi.fn(),\n  },\n  writable: true,\n});\n\n// Mock do window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: vi.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: vi.fn(), // deprecated\n    removeListener: vi.fn(), // deprecated\n    addEventListener: vi.fn(),\n    removeEventListener: vi.fn(),\n    dispatchEvent: vi.fn(),\n  })),\n});\n\n// Mock do ResizeObserver\nglobal.ResizeObserver = vi.fn().mockImplementation(() => ({\n  observe: vi.fn(),\n  unobserve: vi.fn(),\n  disconnect: vi.fn(),\n}));\n\n// Mock do IntersectionObserver\nglobal.IntersectionObserver = vi.fn().mockImplementation(() => ({\n  observe: vi.fn(),\n  unobserve: vi.fn(),\n  disconnect: vi.fn(),\n}));\n\n// Mock do console para testes mais limpos\nconst originalConsoleError = console.error;\nconst originalConsoleWarn = console.warn;\n\nbeforeEach(() => {\n  console.error = vi.fn();\n  console.warn = vi.fn();\n});\n\nafterEach(() => {\n  console.error = originalConsoleError;\n  console.warn = originalConsoleWarn;\n});\n\n// Mock de variáveis de ambiente para testes\nprocess.env.NODE_ENV = 'test';\nprocess.env.NEXT_PUBLIC_API_URL = 'http://localhost:3000/api';\n\n// Helpers para testes\nexport const createMockResponse = (data: any, status = 200) => {\n  return {\n    ok: status >= 200 && status < 300,\n    status,\n    statusText: status === 200 ? 'OK' : 'Error',\n    json: () => Promise.resolve(data),\n    text: () => Promise.resolve(JSON.stringify(data)),\n    headers: new Headers(),\n    redirected: false,\n    type: 'basic' as ResponseType,\n    url: '',\n    clone: vi.fn(),\n    body: null,\n    bodyUsed: false,\n    arrayBuffer: () => Promise.resolve(new ArrayBuffer(0)),\n    blob: () => Promise.resolve(new Blob()),\n    formData: () => Promise.resolve(new FormData()),\n  } as Response;\n};\n\nexport const createMockFetch = (responses: any[]) => {\n  let callCount = 0;\n  return vi.fn().mockImplementation(() => {\n    const response = responses[callCount] || responses[responses.length - 1];\n    callCount++;\n    return Promise.resolve(createMockResponse(response));\n  });\n};\n\nexport const createMockToast = () => ({\n  toast: vi.fn(),\n  success: vi.fn(),\n  error: vi.fn(),\n  warning: vi.fn(),\n  info: vi.fn(),\n  loading: vi.fn(),\n  dismiss: vi.fn(),\n});\n\n// Mock de dados comuns para testes\nexport const mockUsuario = {\n  id: 'user1',\n  nome: 'João Silva',\n  email: 'joao@empresa.com',\n  cargo: 'Desenvolvedor',\n  departamento: 'TI',\n  ativo: true,\n  criadoEm: new Date().toISOString(),\n  atualizadoEm: new Date().toISOString(),\n};\n\nexport const mockAvaliacao = {\n  id: 'aval1',\n  titulo: 'Avaliação Anual 2024',\n  descricao: 'Avaliação de desempenho anual',\n  tipo: 'anual',\n  status: 'pendente',\n  prazo: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  usuarioId: 'user1',\n  avaliadorId: 'user2',\n  criadaEm: new Date().toISOString(),\n  atualizadaEm: new Date().toISOString(),\n};\n\nexport const mockNotificacao = {\n  id: 'notif1',\n  usuarioId: 'user1',\n  avaliacaoId: 'aval1',\n  tipo: 'pendente',\n  titulo: 'Avaliação Pendente',\n  mensagem: 'Você tem uma avaliação pendente para completar.',\n  urgencia: 'media',\n  lida: false,\n  criadaEm: new Date().toISOString(),\n  leituraEm: null,\n};\n\nexport const mockLembrete = {\n  id: 'lembrete1',\n  usuarioId: 'user1',\n  avaliacaoId: 'aval1',\n  tipo: 'prazo_vencimento',\n  titulo: 'Lembrete de Prazo',\n  mensagem: 'Sua avaliação vence em 3 dias.',\n  dataEnvio: new Date().toISOString(),\n  status: 'pendente',\n  tentativas: 0,\n  ultimaTentativa: null,\n  erro: null,\n  metadados: {\n    nomeAvaliacao: 'Avaliação Anual 2024',\n    diasAntecedencia: 3,\n  },\n  criadoEm: new Date().toISOString(),\n  atualizadoEm: new Date().toISOString(),\n};\n\n// Utilitários para testes assíncronos\nexport const waitFor = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const flushPromises = () => new Promise(resolve => setImmediate(resolve));\n\n// Mock de hooks do Next.js\nvi.mock('next/router', () => ({\n  useRouter: () => ({\n    push: vi.fn(),\n    replace: vi.fn(),\n    back: vi.fn(),\n    forward: vi.fn(),\n    refresh: vi.fn(),\n    prefetch: vi.fn(),\n    pathname: '/',\n    query: {},\n    asPath: '/',\n    route: '/',\n    events: {\n      on: vi.fn(),\n      off: vi.fn(),\n      emit: vi.fn(),\n    },\n  }),\n}));\n\nvi.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: vi.fn(),\n    replace: vi.fn(),\n    back: vi.fn(),\n    forward: vi.fn(),\n    refresh: vi.fn(),\n    prefetch: vi.fn(),\n  }),\n  usePathname: () => '/',\n  useSearchParams: () => new URLSearchParams(),\n}));"],"names":["createMockFetch","createMockResponse","createMockToast","flushPromises","mockAvaliacao","mockLembrete","mockNotificacao","mockUsuario","waitFor","expect","extend","matchers","afterEach","cleanup","vi","clearAllMocks","global","fetch","fn","localStorageMock","getItem","setItem","removeItem","clear","length","key","Object","defineProperty","window","value","sessionStorageMock","href","origin","protocol","host","hostname","port","pathname","search","hash","assign","replace","reload","writable","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","ResizeObserver","observe","unobserve","disconnect","IntersectionObserver","originalConsoleError","console","error","originalConsoleWarn","warn","beforeEach","process","env","NODE_ENV","NEXT_PUBLIC_API_URL","data","status","ok","statusText","json","Promise","resolve","text","JSON","stringify","headers","Headers","redirected","type","url","clone","body","bodyUsed","arrayBuffer","ArrayBuffer","blob","Blob","formData","FormData","responses","callCount","response","toast","success","warning","info","loading","dismiss","id","nome","email","cargo","departamento","ativo","criadoEm","Date","toISOString","atualizadoEm","titulo","descricao","tipo","prazo","now","usuarioId","avaliadorId","criadaEm","atualizadaEm","avaliacaoId","mensagem","urgencia","lida","leituraEm","dataEnvio","tentativas","ultimaTentativa","erro","metadados","nomeAvaliacao","diasAntecedencia","ms","setTimeout","setImmediate","mock","useRouter","push","back","forward","refresh","prefetch","asPath","route","events","on","off","emit","usePathname","useSearchParams","URLSearchParams"],"mappings":"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"}