e3c9c19be0b7f246f0e078e13a783c5f
"use strict";

/* istanbul ignore next */
function cov_y7dw7nkhq() {
  var path = "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\lib\\services\\preferencias-notificacao.ts";
  var hash = "887028e61947a082be8c0809fb630130ce366225";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\lib\\services\\preferencias-notificacao.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 46
        }
      },
      "3": {
        start: {
          line: 11,
          column: 33
        },
        end: {
          line: 11,
          column: 77
        }
      },
      "4": {
        start: {
          line: 12,
          column: 16
        },
        end: {
          line: 12,
          column: 36
        }
      },
      "5": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 31,
          column: 9
        }
      },
      "6": {
        start: {
          line: 19,
          column: 31
        },
        end: {
          line: 23,
          column: 14
        }
      },
      "7": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 26,
          column: 13
        }
      },
      "8": {
        start: {
          line: 25,
          column: 16
        },
        end: {
          line: 25,
          column: 78
        }
      },
      "9": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 27,
          column: 59
        }
      },
      "10": {
        start: {
          line: 29,
          column: 12
        },
        end: {
          line: 29,
          column: 80
        }
      },
      "11": {
        start: {
          line: 30,
          column: 12
        },
        end: {
          line: 30,
          column: 75
        }
      },
      "12": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 64,
          column: 9
        }
      },
      "13": {
        start: {
          line: 38,
          column: 41
        },
        end: {
          line: 42,
          column: 14
        }
      },
      "14": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 45,
          column: 13
        }
      },
      "15": {
        start: {
          line: 44,
          column: 16
        },
        end: {
          line: 44,
          column: 88
        }
      },
      "16": {
        start: {
          line: 47,
          column: 37
        },
        end: {
          line: 47,
          column: 85
        }
      },
      "17": {
        start: {
          line: 48,
          column: 44
        },
        end: {
          line: 59,
          column: 14
        }
      },
      "18": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 70
        }
      },
      "19": {
        start: {
          line: 62,
          column: 12
        },
        end: {
          line: 62,
          column: 83
        }
      },
      "20": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 63,
          column: 78
        }
      },
      "21": {
        start: {
          line: 69,
          column: 8
        },
        end: {
          line: 90,
          column: 9
        }
      },
      "22": {
        start: {
          line: 70,
          column: 42
        },
        end: {
          line: 85,
          column: 14
        }
      },
      "23": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 86,
          column: 68
        }
      },
      "24": {
        start: {
          line: 88,
          column: 12
        },
        end: {
          line: 88,
          column: 81
        }
      },
      "25": {
        start: {
          line: 89,
          column: 12
        },
        end: {
          line: 89,
          column: 76
        }
      },
      "26": {
        start: {
          line: 95,
          column: 8
        },
        end: {
          line: 102,
          column: 11
        }
      },
      "27": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 114,
          column: 11
        }
      },
      "28": {
        start: {
          line: 119,
          column: 8
        },
        end: {
          line: 139,
          column: 9
        }
      },
      "29": {
        start: {
          line: 120,
          column: 33
        },
        end: {
          line: 120,
          column: 71
        }
      },
      "30": {
        start: {
          line: 121,
          column: 12
        },
        end: {
          line: 123,
          column: 13
        }
      },
      "31": {
        start: {
          line: 122,
          column: 16
        },
        end: {
          line: 122,
          column: 29
        }
      },
      "32": {
        start: {
          line: 124,
          column: 26
        },
        end: {
          line: 124,
          column: 36
        }
      },
      "33": {
        start: {
          line: 125,
          column: 31
        },
        end: {
          line: 125,
          column: 73
        }
      },
      "34": {
        start: {
          line: 126,
          column: 28
        },
        end: {
          line: 126,
          column: 67
        }
      },
      "35": {
        start: {
          line: 127,
          column: 12
        },
        end: {
          line: 129,
          column: 13
        }
      },
      "36": {
        start: {
          line: 128,
          column: 16
        },
        end: {
          line: 128,
          column: 29
        }
      },
      "37": {
        start: {
          line: 130,
          column: 12
        },
        end: {
          line: 134,
          column: 13
        }
      },
      "38": {
        start: {
          line: 132,
          column: 16
        },
        end: {
          line: 132,
          column: 58
        }
      },
      "39": {
        start: {
          line: 133,
          column: 16
        },
        end: {
          line: 133,
          column: 29
        }
      },
      "40": {
        start: {
          line: 135,
          column: 12
        },
        end: {
          line: 135,
          column: 24
        }
      },
      "41": {
        start: {
          line: 137,
          column: 12
        },
        end: {
          line: 137,
          column: 77
        }
      },
      "42": {
        start: {
          line: 138,
          column: 12
        },
        end: {
          line: 138,
          column: 25
        }
      },
      "43": {
        start: {
          line: 144,
          column: 8
        },
        end: {
          line: 188,
          column: 9
        }
      },
      "44": {
        start: {
          line: 145,
          column: 32
        },
        end: {
          line: 154,
          column: 13
        }
      },
      "45": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 177,
          column: 13
        }
      },
      "46": {
        start: {
          line: 156,
          column: 38
        },
        end: {
          line: 160,
          column: 17
        }
      },
      "47": {
        start: {
          line: 161,
          column: 39
        },
        end: {
          line: 161,
          column: 62
        }
      },
      "48": {
        start: {
          line: 162,
          column: 16
        },
        end: {
          line: 176,
          column: 18
        }
      },
      "49": {
        start: {
          line: 178,
          column: 33
        },
        end: {
          line: 183,
          column: 14
        }
      },
      "50": {
        start: {
          line: 184,
          column: 12
        },
        end: {
          line: 184,
          column: 54
        }
      },
      "51": {
        start: {
          line: 184,
          column: 41
        },
        end: {
          line: 184,
          column: 52
        }
      },
      "52": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 186,
          column: 78
        }
      },
      "53": {
        start: {
          line: 187,
          column: 12
        },
        end: {
          line: 187,
          column: 22
        }
      },
      "54": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 204,
          column: 9
        }
      },
      "55": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 201,
          column: 15
        }
      },
      "56": {
        start: {
          line: 203,
          column: 12
        },
        end: {
          line: 203,
          column: 74
        }
      },
      "57": {
        start: {
          line: 209,
          column: 8
        },
        end: {
          line: 214,
          column: 11
        }
      },
      "58": {
        start: {
          line: 219,
          column: 8
        },
        end: {
          line: 241,
          column: 10
        }
      },
      "59": {
        start: {
          line: 246,
          column: 26
        },
        end: {
          line: 248,
          column: 9
        }
      },
      "60": {
        start: {
          line: 250,
          column: 8
        },
        end: {
          line: 260,
          column: 11
        }
      },
      "61": {
        start: {
          line: 251,
          column: 12
        },
        end: {
          line: 259,
          column: 13
        }
      },
      "62": {
        start: {
          line: 253,
          column: 16
        },
        end: {
          line: 256,
          column: 18
        }
      },
      "63": {
        start: {
          line: 258,
          column: 16
        },
        end: {
          line: 258,
          column: 44
        }
      },
      "64": {
        start: {
          line: 261,
          column: 8
        },
        end: {
          line: 261,
          column: 25
        }
      },
      "65": {
        start: {
          line: 266,
          column: 8
        },
        end: {
          line: 291,
          column: 10
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 17,
            column: 6
          },
          end: {
            line: 17,
            column: 7
          }
        },
        loc: {
          start: {
            line: 17,
            column: 47
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 17
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 35,
            column: 7
          }
        },
        loc: {
          start: {
            line: 35,
            column: 47
          },
          end: {
            line: 65,
            column: 5
          }
        },
        line: 35
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 68,
            column: 6
          },
          end: {
            line: 68,
            column: 7
          }
        },
        loc: {
          start: {
            line: 68,
            column: 49
          },
          end: {
            line: 91,
            column: 5
          }
        },
        line: 68
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 94,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        },
        loc: {
          start: {
            line: 94,
            column: 78
          },
          end: {
            line: 103,
            column: 5
          }
        },
        line: 94
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 106,
            column: 6
          },
          end: {
            line: 106,
            column: 7
          }
        },
        loc: {
          start: {
            line: 106,
            column: 50
          },
          end: {
            line: 115,
            column: 5
          }
        },
        line: 106
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 118,
            column: 6
          },
          end: {
            line: 118,
            column: 7
          }
        },
        loc: {
          start: {
            line: 118,
            column: 60
          },
          end: {
            line: 140,
            column: 5
          }
        },
        line: 118
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 143,
            column: 6
          },
          end: {
            line: 143,
            column: 7
          }
        },
        loc: {
          start: {
            line: 143,
            column: 76
          },
          end: {
            line: 189,
            column: 5
          }
        },
        line: 143
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 184,
            column: 36
          },
          end: {
            line: 184,
            column: 37
          }
        },
        loc: {
          start: {
            line: 184,
            column: 41
          },
          end: {
            line: 184,
            column: 52
          }
        },
        line: 184
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 192,
            column: 6
          },
          end: {
            line: 192,
            column: 7
          }
        },
        loc: {
          start: {
            line: 192,
            column: 57
          },
          end: {
            line: 205,
            column: 5
          }
        },
        line: 192
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 208,
            column: 6
          },
          end: {
            line: 208,
            column: 7
          }
        },
        loc: {
          start: {
            line: 208,
            column: 55
          },
          end: {
            line: 215,
            column: 5
          }
        },
        line: 208
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 218,
            column: 6
          },
          end: {
            line: 218,
            column: 7
          }
        },
        loc: {
          start: {
            line: 218,
            column: 33
          },
          end: {
            line: 242,
            column: 5
          }
        },
        line: 218
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 245,
            column: 6
          },
          end: {
            line: 245,
            column: 7
          }
        },
        loc: {
          start: {
            line: 245,
            column: 45
          },
          end: {
            line: 262,
            column: 5
          }
        },
        line: 245
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 250,
            column: 35
          },
          end: {
            line: 250,
            column: 36
          }
        },
        loc: {
          start: {
            line: 250,
            column: 42
          },
          end: {
            line: 260,
            column: 9
          }
        },
        line: 250
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 265,
            column: 6
          },
          end: {
            line: 265,
            column: 7
          }
        },
        loc: {
          start: {
            line: 265,
            column: 41
          },
          end: {
            line: 292,
            column: 5
          }
        },
        line: 265
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 24,
            column: 12
          },
          end: {
            line: 26,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 24,
            column: 12
          },
          end: {
            line: 26,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 24
      },
      "1": {
        loc: {
          start: {
            line: 43,
            column: 12
          },
          end: {
            line: 45,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 43,
            column: 12
          },
          end: {
            line: 45,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 43
      },
      "2": {
        loc: {
          start: {
            line: 121,
            column: 12
          },
          end: {
            line: 123,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 121,
            column: 12
          },
          end: {
            line: 123,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 121
      },
      "3": {
        loc: {
          start: {
            line: 127,
            column: 12
          },
          end: {
            line: 129,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 127,
            column: 12
          },
          end: {
            line: 129,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 127
      },
      "4": {
        loc: {
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 127,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 127,
            column: 26
          }
        }, {
          start: {
            line: 127,
            column: 30
          },
          end: {
            line: 127,
            column: 48
          }
        }],
        line: 127
      },
      "5": {
        loc: {
          start: {
            line: 130,
            column: 12
          },
          end: {
            line: 134,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 130,
            column: 12
          },
          end: {
            line: 134,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 130
      },
      "6": {
        loc: {
          start: {
            line: 130,
            column: 16
          },
          end: {
            line: 130,
            column: 42
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 130,
            column: 16
          },
          end: {
            line: 130,
            column: 23
          }
        }, {
          start: {
            line: 130,
            column: 27
          },
          end: {
            line: 130,
            column: 42
          }
        }],
        line: 130
      },
      "7": {
        loc: {
          start: {
            line: 155,
            column: 12
          },
          end: {
            line: 177,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 155,
            column: 12
          },
          end: {
            line: 177,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 155
      },
      "8": {
        loc: {
          start: {
            line: 166,
            column: 23
          },
          end: {
            line: 170,
            column: 26
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 166,
            column: 45
          },
          end: {
            line: 170,
            column: 21
          }
        }, {
          start: {
            line: 170,
            column: 24
          },
          end: {
            line: 170,
            column: 26
          }
        }],
        line: 166
      },
      "9": {
        loc: {
          start: {
            line: 171,
            column: 23
          },
          end: {
            line: 175,
            column: 26
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 171,
            column: 45
          },
          end: {
            line: 175,
            column: 21
          }
        }, {
          start: {
            line: 175,
            column: 24
          },
          end: {
            line: 175,
            column: 26
          }
        }],
        line: 171
      },
      "10": {
        loc: {
          start: {
            line: 251,
            column: 12
          },
          end: {
            line: 259,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 251,
            column: 12
          },
          end: {
            line: 259,
            column: 13
          }
        }, {
          start: {
            line: 257,
            column: 19
          },
          end: {
            line: 259,
            column: 13
          }
        }],
        line: 251
      },
      "11": {
        loc: {
          start: {
            line: 251,
            column: 16
          },
          end: {
            line: 251,
            column: 128
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 251,
            column: 16
          },
          end: {
            line: 251,
            column: 42
          }
        }, {
          start: {
            line: 251,
            column: 46
          },
          end: {
            line: 251,
            column: 75
          }
        }, {
          start: {
            line: 251,
            column: 79
          },
          end: {
            line: 251,
            column: 107
          }
        }, {
          start: {
            line: 251,
            column: 111
          },
          end: {
            line: 251,
            column: 128
          }
        }],
        line: 251
      },
      "12": {
        loc: {
          start: {
            line: 283,
            column: 32
          },
          end: {
            line: 285,
            column: 13
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 283,
            column: 32
          },
          end: {
            line: 283,
            column: 56
          }
        }, {
          start: {
            line: 283,
            column: 60
          },
          end: {
            line: 285,
            column: 13
          }
        }],
        line: 283
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0, 0, 0],
      "12": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\lib\\services\\preferencias-notificacao.ts"],
      sourcesContent: ["import { \n  PreferenciasNotificacao, \n  PreferenciasNotificacaoInput, \n  PREFERENCIAS_DEFAULTS \n} from '../types/preferencias-notificacao';\nimport { prisma } from '../prisma';\n\nexport class PreferenciasNotificacaoService {\n  /**\n   * Busca as prefer\xEAncias de notifica\xE7\xE3o de um usu\xE1rio\n   * Se n\xE3o existir, cria com valores padr\xE3o\n   */\n  static async buscarPorUsuario(usuarioId: string): Promise<PreferenciasNotificacao> {\n    try {\n      let preferencias = await prisma.preferenciaNotificacao.findUnique({\n        where: { usuarioId },\n      });\n\n      if (!preferencias) {\n        preferencias = await this.criarPreferenciasDefault(usuarioId);\n      }\n\n      return this.formatarPreferencias(preferencias);\n    } catch (error) {\n      console.error('Erro ao buscar prefer\xEAncias de notifica\xE7\xE3o:', error);\n      throw new Error('Falha ao buscar prefer\xEAncias de notifica\xE7\xE3o');\n    }\n  }\n\n  /**\n   * Atualiza as prefer\xEAncias de notifica\xE7\xE3o de um usu\xE1rio\n   */\n  static async atualizar(\n    usuarioId: string, \n    dados: PreferenciasNotificacaoInput\n  ): Promise<PreferenciasNotificacao> {\n    try {\n      // Busca prefer\xEAncias existentes ou cria com defaults\n      let preferenciasExistentes = await prisma.preferenciaNotificacao.findUnique({\n        where: { usuarioId },\n      });\n\n      if (!preferenciasExistentes) {\n        preferenciasExistentes = await this.criarPreferenciasDefault(usuarioId);\n      }\n\n      // Mescla dados existentes com novos dados\n      const dadosAtualizados = this.mesclarDados(preferenciasExistentes, dados);\n\n      const preferenciasAtualizadas = await prisma.preferenciaNotificacao.update({\n        where: { usuarioId },\n        data: {\n          ...dadosAtualizados,\n          atualizadoEm: new Date(),\n          versao: { increment: 1 },\n        },\n      });\n\n      return this.formatarPreferencias(preferenciasAtualizadas);\n    } catch (error) {\n      console.error('Erro ao atualizar prefer\xEAncias de notifica\xE7\xE3o:', error);\n      throw new Error('Falha ao atualizar prefer\xEAncias de notifica\xE7\xE3o');\n    }\n  }\n\n  /**\n   * Reseta as prefer\xEAncias para os valores padr\xE3o\n   */\n  static async resetarParaDefault(usuarioId: string): Promise<PreferenciasNotificacao> {\n    try {\n      const preferenciasResetadas = await prisma.preferenciaNotificacao.upsert({\n        where: { usuarioId },\n        update: {\n          ...this.criarDadosDefault(),\n          atualizadoEm: new Date(),\n          versao: { increment: 1 },\n        },\n        create: {\n          usuarioId,\n          ...this.criarDadosDefault(),\n        },\n      });\n\n      return this.formatarPreferencias(preferenciasResetadas);\n    } catch (error) {\n      console.error('Erro ao resetar prefer\xEAncias de notifica\xE7\xE3o:', error);\n      throw new Error('Falha ao resetar prefer\xEAncias de notifica\xE7\xE3o');\n    }\n  }\n\n  /**\n   * Pausa as notifica\xE7\xF5es por um per\xEDodo\n   */\n  static async pausarNotificacoes(\n    usuarioId: string,\n    dataInicio: Date,\n    dataFim: Date,\n    motivo?: string\n  ): Promise<PreferenciasNotificacao> {\n    return this.atualizar(usuarioId, {\n      pausarNotificacoes: {\n        ativo: true,\n        dataInicio,\n        dataFim,\n        motivo,\n      },\n    });\n  }\n\n  /**\n   * Retoma as notifica\xE7\xF5es (remove pausa)\n   */\n  static async retomarNotificacoes(usuarioId: string): Promise<PreferenciasNotificacao> {\n    return this.atualizar(usuarioId, {\n      pausarNotificacoes: {\n        ativo: false,\n        dataInicio: undefined,\n        dataFim: undefined,\n        motivo: undefined,\n      },\n    });\n  }\n\n  /**\n   * Verifica se as notifica\xE7\xF5es est\xE3o pausadas para um usu\xE1rio\n   */\n  static async verificarNotificacoesPausadas(usuarioId: string): Promise<boolean> {\n    try {\n      const preferencias = await this.buscarPorUsuario(usuarioId);\n      \n      if (!preferencias.pausarNotificacoes.ativo) {\n        return false;\n      }\n\n      const agora = new Date();\n      const dataInicio = preferencias.pausarNotificacoes.dataInicio;\n      const dataFim = preferencias.pausarNotificacoes.dataFim;\n\n      if (dataInicio && agora < dataInicio) {\n        return false;\n      }\n\n      if (dataFim && agora > dataFim) {\n        // Auto-retomar se passou do per\xEDodo\n        await this.retomarNotificacoes(usuarioId);\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      console.error('Erro ao verificar notifica\xE7\xF5es pausadas:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Busca usu\xE1rios que devem receber notifica\xE7\xF5es de um tipo espec\xEDfico\n   */\n  static async buscarUsuariosParaNotificacao(\n    tipoNotificacao: keyof PreferenciasNotificacao['tiposNotificacao'],\n    urgencia?: PreferenciasNotificacao['urgenciaMinima']\n  ): Promise<string[]> {\n    try {\n      const whereClause: any = {\n        notificacoesAtivas: true,\n        [`tiposNotificacao.${tipoNotificacao}`]: true,\n        pausarNotificacoes: {\n          path: ['ativo'],\n          equals: false,\n        },\n      };\n\n      if (urgencia) {\n        const urgenciaOrder = { BAIXA: 1, MEDIA: 2, ALTA: 3 };\n        const urgenciaMinima = urgenciaOrder[urgencia];\n        \n        whereClause.OR = [\n          { urgenciaMinima: 'BAIXA' },\n          ...(urgenciaMinima >= 2 ? [{ urgenciaMinima: 'MEDIA' }] : []),\n          ...(urgenciaMinima >= 3 ? [{ urgenciaMinima: 'ALTA' }] : []),\n        ];\n      }\n\n      const preferencias = await prisma.preferenciaNotificacao.findMany({\n        where: whereClause,\n        select: { usuarioId: true },\n      });\n\n      return preferencias.map(p => p.usuarioId);\n    } catch (error) {\n      console.error('Erro ao buscar usu\xE1rios para notifica\xE7\xE3o:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Atualiza a data da \xFAltima notifica\xE7\xE3o enviada\n   */\n  static async atualizarUltimaNotificacao(usuarioId: string): Promise<void> {\n    try {\n      await prisma.preferenciaNotificacao.update({\n        where: { usuarioId },\n        data: { ultimaNotificacaoEnviada: new Date() },\n      });\n    } catch (error) {\n      console.error('Erro ao atualizar \xFAltima notifica\xE7\xE3o:', error);\n    }\n  }\n\n  /**\n   * Cria prefer\xEAncias com valores padr\xE3o para um usu\xE1rio\n   */\n  private static async criarPreferenciasDefault(usuarioId: string): Promise<any> {\n    return prisma.preferenciaNotificacao.create({\n      data: {\n        usuarioId,\n        ...this.criarDadosDefault(),\n      },\n    });\n  }\n\n  /**\n   * Cria objeto com dados padr\xE3o\n   */\n  private static criarDadosDefault(): any {\n    return {\n      notificacoesAtivas: PREFERENCIAS_DEFAULTS.notificacoesAtivas,\n      emailAtivo: PREFERENCIAS_DEFAULTS.emailAtivo,\n      diasAntecedenciaLembrete: PREFERENCIAS_DEFAULTS.diasAntecedenciaLembrete,\n      horarioEnvio: PREFERENCIAS_DEFAULTS.horarioEnvio,\n      incluirFinsDeSemanaSemana: PREFERENCIAS_DEFAULTS.incluirFinsDeSemanaSemana,\n      incluirFeriados: PREFERENCIAS_DEFAULTS.incluirFeriados,\n      tiposNotificacao: PREFERENCIAS_DEFAULTS.tiposNotificacao,\n      urgenciaMinima: PREFERENCIAS_DEFAULTS.urgenciaMinima,\n      frequenciaLembretes: PREFERENCIAS_DEFAULTS.frequenciaLembretes,\n      incluirDetalhesAvaliacao: PREFERENCIAS_DEFAULTS.incluirDetalhesAvaliacao,\n      incluirLinkDireto: PREFERENCIAS_DEFAULTS.incluirLinkDireto,\n      incluirResumoEstatisticas: PREFERENCIAS_DEFAULTS.incluirResumoEstatisticas,\n      formatoEmail: PREFERENCIAS_DEFAULTS.formatoEmail,\n      idiomaNotificacao: PREFERENCIAS_DEFAULTS.idiomaNotificacao,\n      pausarNotificacoes: {\n        ativo: false,\n      },\n      filtros: PREFERENCIAS_DEFAULTS.filtros,\n      criadoEm: new Date(),\n      atualizadoEm: new Date(),\n      versao: 1,\n    };\n  }\n\n  /**\n   * Mescla dados existentes com novos dados\n   */\n  private static mesclarDados(existentes: any, novos: PreferenciasNotificacaoInput): any {\n    const resultado = { ...existentes };\n\n    // Atualiza campos simples\n    Object.keys(novos).forEach(key => {\n      if (key === 'tiposNotificacao' || key === 'frequenciaLembretes' || \n          key === 'pausarNotificacoes' || key === 'filtros') {\n        // Para objetos aninhados, mescla propriedades\n        resultado[key] = {\n          ...resultado[key],\n          ...novos[key as keyof PreferenciasNotificacaoInput],\n        };\n      } else {\n        resultado[key] = novos[key as keyof PreferenciasNotificacaoInput];\n      }\n    });\n\n    return resultado;\n  }\n\n  /**\n   * Formata dados do banco para o tipo TypeScript\n   */\n  private static formatarPreferencias(dados: any): PreferenciasNotificacao {\n    return {\n      id: dados.id,\n      usuarioId: dados.usuarioId,\n      notificacoesAtivas: dados.notificacoesAtivas,\n      emailAtivo: dados.emailAtivo,\n      diasAntecedenciaLembrete: dados.diasAntecedenciaLembrete,\n      horarioEnvio: dados.horarioEnvio,\n      incluirFinsDeSemanaSemana: dados.incluirFinsDeSemanaSemana,\n      incluirFeriados: dados.incluirFeriados,\n      tiposNotificacao: dados.tiposNotificacao,\n      urgenciaMinima: dados.urgenciaMinima,\n      frequenciaLembretes: dados.frequenciaLembretes,\n      incluirDetalhesAvaliacao: dados.incluirDetalhesAvaliacao,\n      incluirLinkDireto: dados.incluirLinkDireto,\n      incluirResumoEstatisticas: dados.incluirResumoEstatisticas,\n      formatoEmail: dados.formatoEmail,\n      idiomaNotificacao: dados.idiomaNotificacao,\n      pausarNotificacoes: dados.pausarNotificacoes || { ativo: false },\n      filtros: dados.filtros,\n      criadoEm: dados.criadoEm,\n      atualizadoEm: dados.atualizadoEm,\n      ultimaNotificacaoEnviada: dados.ultimaNotificacaoEnviada,\n      versao: dados.versao,\n    };\n  }\n}"],
      names: ["PreferenciasNotificacaoService", "buscarPorUsuario", "usuarioId", "preferencias", "prisma", "preferenciaNotificacao", "findUnique", "where", "criarPreferenciasDefault", "formatarPreferencias", "error", "console", "Error", "atualizar", "dados", "preferenciasExistentes", "dadosAtualizados", "mesclarDados", "preferenciasAtualizadas", "update", "data", "atualizadoEm", "Date", "versao", "increment", "resetarParaDefault", "preferenciasResetadas", "upsert", "criarDadosDefault", "create", "pausarNotificacoes", "dataInicio", "dataFim", "motivo", "ativo", "retomarNotificacoes", "undefined", "verificarNotificacoesPausadas", "agora", "buscarUsuariosParaNotificacao", "tipoNotificacao", "urgencia", "whereClause", "notificacoesAtivas", "path", "equals", "urgenciaOrder", "BAIXA", "MEDIA", "ALTA", "urgenciaMinima", "OR", "findMany", "select", "map", "p", "atualizarUltimaNotificacao", "ultimaNotificacaoEnviada", "PREFERENCIAS_DEFAULTS", "emailAtivo", "diasAntecedenciaLembrete", "horarioEnvio", "incluirFinsDeSemanaSemana", "incluirFeriados", "tiposNotificacao", "frequenciaLembretes", "incluirDetalhesAvaliacao", "incluirLinkDireto", "incluirResumoEstatisticas", "formatoEmail", "idiomaNotificacao", "filtros", "criadoEm", "existentes", "novos", "resultado", "Object", "keys", "forEach", "key", "id"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "887028e61947a082be8c0809fb630130ce366225"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_y7dw7nkhq = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_y7dw7nkhq();
cov_y7dw7nkhq().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_y7dw7nkhq().s[1]++;
Object.defineProperty(exports, "PreferenciasNotificacaoService", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[0]++;
    cov_y7dw7nkhq().s[2]++;
    return PreferenciasNotificacaoService;
  }
});
const _preferenciasnotificacao =
/* istanbul ignore next */
(cov_y7dw7nkhq().s[3]++, require("../types/preferencias-notificacao"));
const _prisma =
/* istanbul ignore next */
(cov_y7dw7nkhq().s[4]++, require("../prisma"));
class PreferenciasNotificacaoService {
  /**
  * Busca as preferências de notificação de um usuário
  * Se não existir, cria com valores padrão
  */
  static async buscarPorUsuario(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[1]++;
    cov_y7dw7nkhq().s[5]++;
    try {
      let preferencias =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[6]++, await _prisma.prisma.preferenciaNotificacao.findUnique({
        where: {
          usuarioId
        }
      }));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[7]++;
      if (!preferencias) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[0][0]++;
        cov_y7dw7nkhq().s[8]++;
        preferencias = await this.criarPreferenciasDefault(usuarioId);
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[0][1]++;
      }
      cov_y7dw7nkhq().s[9]++;
      return this.formatarPreferencias(preferencias);
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[10]++;
      console.error('Erro ao buscar preferências de notificação:', error);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[11]++;
      throw new Error('Falha ao buscar preferências de notificação');
    }
  }
  /**
  * Atualiza as preferências de notificação de um usuário
  */
  static async atualizar(usuarioId, dados) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[2]++;
    cov_y7dw7nkhq().s[12]++;
    try {
      // Busca preferências existentes ou cria com defaults
      let preferenciasExistentes =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[13]++, await _prisma.prisma.preferenciaNotificacao.findUnique({
        where: {
          usuarioId
        }
      }));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[14]++;
      if (!preferenciasExistentes) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[1][0]++;
        cov_y7dw7nkhq().s[15]++;
        preferenciasExistentes = await this.criarPreferenciasDefault(usuarioId);
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[1][1]++;
      }
      // Mescla dados existentes com novos dados
      const dadosAtualizados =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[16]++, this.mesclarDados(preferenciasExistentes, dados));
      const preferenciasAtualizadas =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[17]++, await _prisma.prisma.preferenciaNotificacao.update({
        where: {
          usuarioId
        },
        data: {
          ...dadosAtualizados,
          atualizadoEm: new Date(),
          versao: {
            increment: 1
          }
        }
      }));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[18]++;
      return this.formatarPreferencias(preferenciasAtualizadas);
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[19]++;
      console.error('Erro ao atualizar preferências de notificação:', error);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[20]++;
      throw new Error('Falha ao atualizar preferências de notificação');
    }
  }
  /**
  * Reseta as preferências para os valores padrão
  */
  static async resetarParaDefault(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[3]++;
    cov_y7dw7nkhq().s[21]++;
    try {
      const preferenciasResetadas =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[22]++, await _prisma.prisma.preferenciaNotificacao.upsert({
        where: {
          usuarioId
        },
        update: {
          ...this.criarDadosDefault(),
          atualizadoEm: new Date(),
          versao: {
            increment: 1
          }
        },
        create: {
          usuarioId,
          ...this.criarDadosDefault()
        }
      }));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[23]++;
      return this.formatarPreferencias(preferenciasResetadas);
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[24]++;
      console.error('Erro ao resetar preferências de notificação:', error);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[25]++;
      throw new Error('Falha ao resetar preferências de notificação');
    }
  }
  /**
  * Pausa as notificações por um período
  */
  static async pausarNotificacoes(usuarioId, dataInicio, dataFim, motivo) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[4]++;
    cov_y7dw7nkhq().s[26]++;
    return this.atualizar(usuarioId, {
      pausarNotificacoes: {
        ativo: true,
        dataInicio,
        dataFim,
        motivo
      }
    });
  }
  /**
  * Retoma as notificações (remove pausa)
  */
  static async retomarNotificacoes(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[5]++;
    cov_y7dw7nkhq().s[27]++;
    return this.atualizar(usuarioId, {
      pausarNotificacoes: {
        ativo: false,
        dataInicio: undefined,
        dataFim: undefined,
        motivo: undefined
      }
    });
  }
  /**
  * Verifica se as notificações estão pausadas para um usuário
  */
  static async verificarNotificacoesPausadas(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[6]++;
    cov_y7dw7nkhq().s[28]++;
    try {
      const preferencias =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[29]++, await this.buscarPorUsuario(usuarioId));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[30]++;
      if (!preferencias.pausarNotificacoes.ativo) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[2][0]++;
        cov_y7dw7nkhq().s[31]++;
        return false;
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[2][1]++;
      }
      const agora =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[32]++, new Date());
      const dataInicio =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[33]++, preferencias.pausarNotificacoes.dataInicio);
      const dataFim =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[34]++, preferencias.pausarNotificacoes.dataFim);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[35]++;
      if (
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[4][0]++, dataInicio) &&
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[4][1]++, agora < dataInicio)) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[3][0]++;
        cov_y7dw7nkhq().s[36]++;
        return false;
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[3][1]++;
      }
      cov_y7dw7nkhq().s[37]++;
      if (
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[6][0]++, dataFim) &&
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[6][1]++, agora > dataFim)) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[5][0]++;
        cov_y7dw7nkhq().s[38]++;
        // Auto-retomar se passou do período
        await this.retomarNotificacoes(usuarioId);
        /* istanbul ignore next */
        cov_y7dw7nkhq().s[39]++;
        return false;
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[5][1]++;
      }
      cov_y7dw7nkhq().s[40]++;
      return true;
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[41]++;
      console.error('Erro ao verificar notificações pausadas:', error);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[42]++;
      return false;
    }
  }
  /**
  * Busca usuários que devem receber notificações de um tipo específico
  */
  static async buscarUsuariosParaNotificacao(tipoNotificacao, urgencia) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[7]++;
    cov_y7dw7nkhq().s[43]++;
    try {
      const whereClause =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[44]++, {
        notificacoesAtivas: true,
        [`tiposNotificacao.${tipoNotificacao}`]: true,
        pausarNotificacoes: {
          path: ['ativo'],
          equals: false
        }
      });
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[45]++;
      if (urgencia) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[7][0]++;
        const urgenciaOrder =
        /* istanbul ignore next */
        (cov_y7dw7nkhq().s[46]++, {
          BAIXA: 1,
          MEDIA: 2,
          ALTA: 3
        });
        const urgenciaMinima =
        /* istanbul ignore next */
        (cov_y7dw7nkhq().s[47]++, urgenciaOrder[urgencia]);
        /* istanbul ignore next */
        cov_y7dw7nkhq().s[48]++;
        whereClause.OR = [{
          urgenciaMinima: 'BAIXA'
        }, ...(urgenciaMinima >= 2 ?
        /* istanbul ignore next */
        (cov_y7dw7nkhq().b[8][0]++, [{
          urgenciaMinima: 'MEDIA'
        }]) :
        /* istanbul ignore next */
        (cov_y7dw7nkhq().b[8][1]++, [])), ...(urgenciaMinima >= 3 ?
        /* istanbul ignore next */
        (cov_y7dw7nkhq().b[9][0]++, [{
          urgenciaMinima: 'ALTA'
        }]) :
        /* istanbul ignore next */
        (cov_y7dw7nkhq().b[9][1]++, []))];
      } else
      /* istanbul ignore next */
      {
        cov_y7dw7nkhq().b[7][1]++;
      }
      const preferencias =
      /* istanbul ignore next */
      (cov_y7dw7nkhq().s[49]++, await _prisma.prisma.preferenciaNotificacao.findMany({
        where: whereClause,
        select: {
          usuarioId: true
        }
      }));
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[50]++;
      return preferencias.map(p => {
        /* istanbul ignore next */
        cov_y7dw7nkhq().f[8]++;
        cov_y7dw7nkhq().s[51]++;
        return p.usuarioId;
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[52]++;
      console.error('Erro ao buscar usuários para notificação:', error);
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[53]++;
      return [];
    }
  }
  /**
  * Atualiza a data da última notificação enviada
  */
  static async atualizarUltimaNotificacao(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[9]++;
    cov_y7dw7nkhq().s[54]++;
    try {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[55]++;
      await _prisma.prisma.preferenciaNotificacao.update({
        where: {
          usuarioId
        },
        data: {
          ultimaNotificacaoEnviada: new Date()
        }
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_y7dw7nkhq().s[56]++;
      console.error('Erro ao atualizar última notificação:', error);
    }
  }
  /**
  * Cria preferências com valores padrão para um usuário
  */
  static async criarPreferenciasDefault(usuarioId) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[10]++;
    cov_y7dw7nkhq().s[57]++;
    return _prisma.prisma.preferenciaNotificacao.create({
      data: {
        usuarioId,
        ...this.criarDadosDefault()
      }
    });
  }
  /**
  * Cria objeto com dados padrão
  */
  static criarDadosDefault() {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[11]++;
    cov_y7dw7nkhq().s[58]++;
    return {
      notificacoesAtivas: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.notificacoesAtivas,
      emailAtivo: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.emailAtivo,
      diasAntecedenciaLembrete: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.diasAntecedenciaLembrete,
      horarioEnvio: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.horarioEnvio,
      incluirFinsDeSemanaSemana: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.incluirFinsDeSemanaSemana,
      incluirFeriados: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.incluirFeriados,
      tiposNotificacao: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.tiposNotificacao,
      urgenciaMinima: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.urgenciaMinima,
      frequenciaLembretes: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.frequenciaLembretes,
      incluirDetalhesAvaliacao: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.incluirDetalhesAvaliacao,
      incluirLinkDireto: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.incluirLinkDireto,
      incluirResumoEstatisticas: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.incluirResumoEstatisticas,
      formatoEmail: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.formatoEmail,
      idiomaNotificacao: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.idiomaNotificacao,
      pausarNotificacoes: {
        ativo: false
      },
      filtros: _preferenciasnotificacao.PREFERENCIAS_DEFAULTS.filtros,
      criadoEm: new Date(),
      atualizadoEm: new Date(),
      versao: 1
    };
  }
  /**
  * Mescla dados existentes com novos dados
  */
  static mesclarDados(existentes, novos) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[12]++;
    const resultado =
    /* istanbul ignore next */
    (cov_y7dw7nkhq().s[59]++, {
      ...existentes
    });
    // Atualiza campos simples
    /* istanbul ignore next */
    cov_y7dw7nkhq().s[60]++;
    Object.keys(novos).forEach(key => {
      /* istanbul ignore next */
      cov_y7dw7nkhq().f[13]++;
      cov_y7dw7nkhq().s[61]++;
      if (
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[11][0]++, key === 'tiposNotificacao') ||
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[11][1]++, key === 'frequenciaLembretes') ||
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[11][2]++, key === 'pausarNotificacoes') ||
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[11][3]++, key === 'filtros')) {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[10][0]++;
        cov_y7dw7nkhq().s[62]++;
        // Para objetos aninhados, mescla propriedades
        resultado[key] = {
          ...resultado[key],
          ...novos[key]
        };
      } else {
        /* istanbul ignore next */
        cov_y7dw7nkhq().b[10][1]++;
        cov_y7dw7nkhq().s[63]++;
        resultado[key] = novos[key];
      }
    });
    /* istanbul ignore next */
    cov_y7dw7nkhq().s[64]++;
    return resultado;
  }
  /**
  * Formata dados do banco para o tipo TypeScript
  */
  static formatarPreferencias(dados) {
    /* istanbul ignore next */
    cov_y7dw7nkhq().f[14]++;
    cov_y7dw7nkhq().s[65]++;
    return {
      id: dados.id,
      usuarioId: dados.usuarioId,
      notificacoesAtivas: dados.notificacoesAtivas,
      emailAtivo: dados.emailAtivo,
      diasAntecedenciaLembrete: dados.diasAntecedenciaLembrete,
      horarioEnvio: dados.horarioEnvio,
      incluirFinsDeSemanaSemana: dados.incluirFinsDeSemanaSemana,
      incluirFeriados: dados.incluirFeriados,
      tiposNotificacao: dados.tiposNotificacao,
      urgenciaMinima: dados.urgenciaMinima,
      frequenciaLembretes: dados.frequenciaLembretes,
      incluirDetalhesAvaliacao: dados.incluirDetalhesAvaliacao,
      incluirLinkDireto: dados.incluirLinkDireto,
      incluirResumoEstatisticas: dados.incluirResumoEstatisticas,
      formatoEmail: dados.formatoEmail,
      idiomaNotificacao: dados.idiomaNotificacao,
      pausarNotificacoes:
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[12][0]++, dados.pausarNotificacoes) ||
      /* istanbul ignore next */
      (cov_y7dw7nkhq().b[12][1]++, {
        ativo: false
      }),
      filtros: dados.filtros,
      criadoEm: dados.criadoEm,
      atualizadoEm: dados.atualizadoEm,
      ultimaNotificacaoEnviada: dados.ultimaNotificacaoEnviada,
      versao: dados.versao
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmVmZXJlbmNpYXNOb3RpZmljYWNhb1NlcnZpY2UiLCJidXNjYXJQb3JVc3VhcmlvIiwidXN1YXJpb0lkIiwiY292X3k3ZHc3bmtocSIsImYiLCJzIiwicHJlZmVyZW5jaWFzIiwiX3ByaXNtYSIsInByaXNtYSIsInByZWZlcmVuY2lhTm90aWZpY2FjYW8iLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJiIiwiY3JpYXJQcmVmZXJlbmNpYXNEZWZhdWx0IiwiZm9ybWF0YXJQcmVmZXJlbmNpYXMiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImF0dWFsaXphciIsImRhZG9zIiwicHJlZmVyZW5jaWFzRXhpc3RlbnRlcyIsImRhZG9zQXR1YWxpemFkb3MiLCJtZXNjbGFyRGFkb3MiLCJwcmVmZXJlbmNpYXNBdHVhbGl6YWRhcyIsInVwZGF0ZSIsImRhdGEiLCJhdHVhbGl6YWRvRW0iLCJEYXRlIiwidmVyc2FvIiwiaW5jcmVtZW50IiwicmVzZXRhclBhcmFEZWZhdWx0IiwicHJlZmVyZW5jaWFzUmVzZXRhZGFzIiwidXBzZXJ0IiwiY3JpYXJEYWRvc0RlZmF1bHQiLCJjcmVhdGUiLCJwYXVzYXJOb3RpZmljYWNvZXMiLCJkYXRhSW5pY2lvIiwiZGF0YUZpbSIsIm1vdGl2byIsImF0aXZvIiwicmV0b21hck5vdGlmaWNhY29lcyIsInVuZGVmaW5lZCIsInZlcmlmaWNhck5vdGlmaWNhY29lc1BhdXNhZGFzIiwiYWdvcmEiLCJidXNjYXJVc3Vhcmlvc1BhcmFOb3RpZmljYWNhbyIsInRpcG9Ob3RpZmljYWNhbyIsInVyZ2VuY2lhIiwid2hlcmVDbGF1c2UiLCJub3RpZmljYWNvZXNBdGl2YXMiLCJwYXRoIiwiZXF1YWxzIiwidXJnZW5jaWFPcmRlciIsIkJBSVhBIiwiTUVESUEiLCJBTFRBIiwidXJnZW5jaWFNaW5pbWEiLCJPUiIsImZpbmRNYW55Iiwic2VsZWN0IiwibWFwIiwicCIsImF0dWFsaXphclVsdGltYU5vdGlmaWNhY2FvIiwidWx0aW1hTm90aWZpY2FjYW9FbnZpYWRhIiwiX3ByZWZlcmVuY2lhc25vdGlmaWNhY2FvIiwiUFJFRkVSRU5DSUFTX0RFRkFVTFRTIiwiZW1haWxBdGl2byIsImRpYXNBbnRlY2VkZW5jaWFMZW1icmV0ZSIsImhvcmFyaW9FbnZpbyIsImluY2x1aXJGaW5zRGVTZW1hbmFTZW1hbmEiLCJpbmNsdWlyRmVyaWFkb3MiLCJ0aXBvc05vdGlmaWNhY2FvIiwiZnJlcXVlbmNpYUxlbWJyZXRlcyIsImluY2x1aXJEZXRhbGhlc0F2YWxpYWNhbyIsImluY2x1aXJMaW5rRGlyZXRvIiwiaW5jbHVpclJlc3Vtb0VzdGF0aXN0aWNhcyIsImZvcm1hdG9FbWFpbCIsImlkaW9tYU5vdGlmaWNhY2FvIiwiZmlsdHJvcyIsImNyaWFkb0VtIiwiZXhpc3RlbnRlcyIsIm5vdm9zIiwicmVzdWx0YWRvIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpZCJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTmVyZXUgSnJcXERvY3VtZW50c1xcRGV2XFxuZXdcXHNyY1xcbGliXFxzZXJ2aWNlc1xccHJlZmVyZW5jaWFzLW5vdGlmaWNhY2FvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxuICBQcmVmZXJlbmNpYXNOb3RpZmljYWNhbywgXG4gIFByZWZlcmVuY2lhc05vdGlmaWNhY2FvSW5wdXQsIFxuICBQUkVGRVJFTkNJQVNfREVGQVVMVFMgXG59IGZyb20gJy4uL3R5cGVzL3ByZWZlcmVuY2lhcy1ub3RpZmljYWNhbyc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9wcmlzbWEnO1xuXG5leHBvcnQgY2xhc3MgUHJlZmVyZW5jaWFzTm90aWZpY2FjYW9TZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEJ1c2NhIGFzIHByZWZlcsOqbmNpYXMgZGUgbm90aWZpY2HDp8OjbyBkZSB1bSB1c3XDoXJpb1xuICAgKiBTZSBuw6NvIGV4aXN0aXIsIGNyaWEgY29tIHZhbG9yZXMgcGFkcsOjb1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGJ1c2NhclBvclVzdWFyaW8odXN1YXJpb0lkOiBzdHJpbmcpOiBQcm9taXNlPFByZWZlcmVuY2lhc05vdGlmaWNhY2FvPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBwcmVmZXJlbmNpYXMgPSBhd2FpdCBwcmlzbWEucHJlZmVyZW5jaWFOb3RpZmljYWNhby5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgdXN1YXJpb0lkIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFwcmVmZXJlbmNpYXMpIHtcbiAgICAgICAgcHJlZmVyZW5jaWFzID0gYXdhaXQgdGhpcy5jcmlhclByZWZlcmVuY2lhc0RlZmF1bHQodXN1YXJpb0lkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0YXJQcmVmZXJlbmNpYXMocHJlZmVyZW5jaWFzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBidXNjYXIgcHJlZmVyw6puY2lhcyBkZSBub3RpZmljYcOnw6NvOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFsaGEgYW8gYnVzY2FyIHByZWZlcsOqbmNpYXMgZGUgbm90aWZpY2HDp8OjbycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSBhcyBwcmVmZXLDqm5jaWFzIGRlIG5vdGlmaWNhw6fDo28gZGUgdW0gdXN1w6FyaW9cbiAgICovXG4gIHN0YXRpYyBhc3luYyBhdHVhbGl6YXIoXG4gICAgdXN1YXJpb0lkOiBzdHJpbmcsIFxuICAgIGRhZG9zOiBQcmVmZXJlbmNpYXNOb3RpZmljYWNhb0lucHV0XG4gICk6IFByb21pc2U8UHJlZmVyZW5jaWFzTm90aWZpY2FjYW8+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQnVzY2EgcHJlZmVyw6puY2lhcyBleGlzdGVudGVzIG91IGNyaWEgY29tIGRlZmF1bHRzXG4gICAgICBsZXQgcHJlZmVyZW5jaWFzRXhpc3RlbnRlcyA9IGF3YWl0IHByaXNtYS5wcmVmZXJlbmNpYU5vdGlmaWNhY2FvLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyB1c3VhcmlvSWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXByZWZlcmVuY2lhc0V4aXN0ZW50ZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jaWFzRXhpc3RlbnRlcyA9IGF3YWl0IHRoaXMuY3JpYXJQcmVmZXJlbmNpYXNEZWZhdWx0KHVzdWFyaW9JZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1lc2NsYSBkYWRvcyBleGlzdGVudGVzIGNvbSBub3ZvcyBkYWRvc1xuICAgICAgY29uc3QgZGFkb3NBdHVhbGl6YWRvcyA9IHRoaXMubWVzY2xhckRhZG9zKHByZWZlcmVuY2lhc0V4aXN0ZW50ZXMsIGRhZG9zKTtcblxuICAgICAgY29uc3QgcHJlZmVyZW5jaWFzQXR1YWxpemFkYXMgPSBhd2FpdCBwcmlzbWEucHJlZmVyZW5jaWFOb3RpZmljYWNhby51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyB1c3VhcmlvSWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmRhZG9zQXR1YWxpemFkb3MsXG4gICAgICAgICAgYXR1YWxpemFkb0VtOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHZlcnNhbzogeyBpbmNyZW1lbnQ6IDEgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRhclByZWZlcmVuY2lhcyhwcmVmZXJlbmNpYXNBdHVhbGl6YWRhcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gYXR1YWxpemFyIHByZWZlcsOqbmNpYXMgZGUgbm90aWZpY2HDp8OjbzonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhbGhhIGFvIGF0dWFsaXphciBwcmVmZXLDqm5jaWFzIGRlIG5vdGlmaWNhw6fDo28nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRhIGFzIHByZWZlcsOqbmNpYXMgcGFyYSBvcyB2YWxvcmVzIHBhZHLDo29cbiAgICovXG4gIHN0YXRpYyBhc3luYyByZXNldGFyUGFyYURlZmF1bHQodXN1YXJpb0lkOiBzdHJpbmcpOiBQcm9taXNlPFByZWZlcmVuY2lhc05vdGlmaWNhY2FvPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByZWZlcmVuY2lhc1Jlc2V0YWRhcyA9IGF3YWl0IHByaXNtYS5wcmVmZXJlbmNpYU5vdGlmaWNhY2FvLnVwc2VydCh7XG4gICAgICAgIHdoZXJlOiB7IHVzdWFyaW9JZCB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAuLi50aGlzLmNyaWFyRGFkb3NEZWZhdWx0KCksXG4gICAgICAgICAgYXR1YWxpemFkb0VtOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHZlcnNhbzogeyBpbmNyZW1lbnQ6IDEgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgdXN1YXJpb0lkLFxuICAgICAgICAgIC4uLnRoaXMuY3JpYXJEYWRvc0RlZmF1bHQoKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRhclByZWZlcmVuY2lhcyhwcmVmZXJlbmNpYXNSZXNldGFkYXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHJlc2V0YXIgcHJlZmVyw6puY2lhcyBkZSBub3RpZmljYcOnw6NvOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFsaGEgYW8gcmVzZXRhciBwcmVmZXLDqm5jaWFzIGRlIG5vdGlmaWNhw6fDo28nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGF1c2EgYXMgbm90aWZpY2HDp8O1ZXMgcG9yIHVtIHBlcsOtb2RvXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgcGF1c2FyTm90aWZpY2Fjb2VzKFxuICAgIHVzdWFyaW9JZDogc3RyaW5nLFxuICAgIGRhdGFJbmljaW86IERhdGUsXG4gICAgZGF0YUZpbTogRGF0ZSxcbiAgICBtb3Rpdm8/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxQcmVmZXJlbmNpYXNOb3RpZmljYWNhbz4ge1xuICAgIHJldHVybiB0aGlzLmF0dWFsaXphcih1c3VhcmlvSWQsIHtcbiAgICAgIHBhdXNhck5vdGlmaWNhY29lczoge1xuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgICAgZGF0YUluaWNpbyxcbiAgICAgICAgZGF0YUZpbSxcbiAgICAgICAgbW90aXZvLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRvbWEgYXMgbm90aWZpY2HDp8O1ZXMgKHJlbW92ZSBwYXVzYSlcbiAgICovXG4gIHN0YXRpYyBhc3luYyByZXRvbWFyTm90aWZpY2Fjb2VzKHVzdWFyaW9JZDogc3RyaW5nKTogUHJvbWlzZTxQcmVmZXJlbmNpYXNOb3RpZmljYWNhbz4ge1xuICAgIHJldHVybiB0aGlzLmF0dWFsaXphcih1c3VhcmlvSWQsIHtcbiAgICAgIHBhdXNhck5vdGlmaWNhY29lczoge1xuICAgICAgICBhdGl2bzogZmFsc2UsXG4gICAgICAgIGRhdGFJbmljaW86IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUZpbTogdW5kZWZpbmVkLFxuICAgICAgICBtb3Rpdm86IHVuZGVmaW5lZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgYXMgbm90aWZpY2HDp8O1ZXMgZXN0w6NvIHBhdXNhZGFzIHBhcmEgdW0gdXN1w6FyaW9cbiAgICovXG4gIHN0YXRpYyBhc3luYyB2ZXJpZmljYXJOb3RpZmljYWNvZXNQYXVzYWRhcyh1c3VhcmlvSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmVmZXJlbmNpYXMgPSBhd2FpdCB0aGlzLmJ1c2NhclBvclVzdWFyaW8odXN1YXJpb0lkKTtcbiAgICAgIFxuICAgICAgaWYgKCFwcmVmZXJlbmNpYXMucGF1c2FyTm90aWZpY2Fjb2VzLmF0aXZvKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWdvcmEgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IHByZWZlcmVuY2lhcy5wYXVzYXJOb3RpZmljYWNvZXMuZGF0YUluaWNpbztcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBwcmVmZXJlbmNpYXMucGF1c2FyTm90aWZpY2Fjb2VzLmRhdGFGaW07XG5cbiAgICAgIGlmIChkYXRhSW5pY2lvICYmIGFnb3JhIDwgZGF0YUluaWNpbykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhRmltICYmIGFnb3JhID4gZGF0YUZpbSkge1xuICAgICAgICAvLyBBdXRvLXJldG9tYXIgc2UgcGFzc291IGRvIHBlcsOtb2RvXG4gICAgICAgIGF3YWl0IHRoaXMucmV0b21hck5vdGlmaWNhY29lcyh1c3VhcmlvSWQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHZlcmlmaWNhciBub3RpZmljYcOnw7VlcyBwYXVzYWRhczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHVzdcOhcmlvcyBxdWUgZGV2ZW0gcmVjZWJlciBub3RpZmljYcOnw7VlcyBkZSB1bSB0aXBvIGVzcGVjw61maWNvXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYnVzY2FyVXN1YXJpb3NQYXJhTm90aWZpY2FjYW8oXG4gICAgdGlwb05vdGlmaWNhY2FvOiBrZXlvZiBQcmVmZXJlbmNpYXNOb3RpZmljYWNhb1sndGlwb3NOb3RpZmljYWNhbyddLFxuICAgIHVyZ2VuY2lhPzogUHJlZmVyZW5jaWFzTm90aWZpY2FjYW9bJ3VyZ2VuY2lhTWluaW1hJ11cbiAgKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB3aGVyZUNsYXVzZTogYW55ID0ge1xuICAgICAgICBub3RpZmljYWNvZXNBdGl2YXM6IHRydWUsXG4gICAgICAgIFtgdGlwb3NOb3RpZmljYWNhby4ke3RpcG9Ob3RpZmljYWNhb31gXTogdHJ1ZSxcbiAgICAgICAgcGF1c2FyTm90aWZpY2Fjb2VzOiB7XG4gICAgICAgICAgcGF0aDogWydhdGl2byddLFxuICAgICAgICAgIGVxdWFsczogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBpZiAodXJnZW5jaWEpIHtcbiAgICAgICAgY29uc3QgdXJnZW5jaWFPcmRlciA9IHsgQkFJWEE6IDEsIE1FRElBOiAyLCBBTFRBOiAzIH07XG4gICAgICAgIGNvbnN0IHVyZ2VuY2lhTWluaW1hID0gdXJnZW5jaWFPcmRlclt1cmdlbmNpYV07XG4gICAgICAgIFxuICAgICAgICB3aGVyZUNsYXVzZS5PUiA9IFtcbiAgICAgICAgICB7IHVyZ2VuY2lhTWluaW1hOiAnQkFJWEEnIH0sXG4gICAgICAgICAgLi4uKHVyZ2VuY2lhTWluaW1hID49IDIgPyBbeyB1cmdlbmNpYU1pbmltYTogJ01FRElBJyB9XSA6IFtdKSxcbiAgICAgICAgICAuLi4odXJnZW5jaWFNaW5pbWEgPj0gMyA/IFt7IHVyZ2VuY2lhTWluaW1hOiAnQUxUQScgfV0gOiBbXSksXG4gICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZWZlcmVuY2lhcyA9IGF3YWl0IHByaXNtYS5wcmVmZXJlbmNpYU5vdGlmaWNhY2FvLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHdoZXJlQ2xhdXNlLFxuICAgICAgICBzZWxlY3Q6IHsgdXN1YXJpb0lkOiB0cnVlIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHByZWZlcmVuY2lhcy5tYXAocCA9PiBwLnVzdWFyaW9JZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gYnVzY2FyIHVzdcOhcmlvcyBwYXJhIG5vdGlmaWNhw6fDo286JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSBhIGRhdGEgZGEgw7psdGltYSBub3RpZmljYcOnw6NvIGVudmlhZGFcbiAgICovXG4gIHN0YXRpYyBhc3luYyBhdHVhbGl6YXJVbHRpbWFOb3RpZmljYWNhbyh1c3VhcmlvSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEucHJlZmVyZW5jaWFOb3RpZmljYWNhby51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyB1c3VhcmlvSWQgfSxcbiAgICAgICAgZGF0YTogeyB1bHRpbWFOb3RpZmljYWNhb0VudmlhZGE6IG5ldyBEYXRlKCkgfSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGF0dWFsaXphciDDumx0aW1hIG5vdGlmaWNhw6fDo286JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmlhIHByZWZlcsOqbmNpYXMgY29tIHZhbG9yZXMgcGFkcsOjbyBwYXJhIHVtIHVzdcOhcmlvXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBhc3luYyBjcmlhclByZWZlcmVuY2lhc0RlZmF1bHQodXN1YXJpb0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBwcmlzbWEucHJlZmVyZW5jaWFOb3RpZmljYWNhby5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c3VhcmlvSWQsXG4gICAgICAgIC4uLnRoaXMuY3JpYXJEYWRvc0RlZmF1bHQoKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JpYSBvYmpldG8gY29tIGRhZG9zIHBhZHLDo29cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGNyaWFyRGFkb3NEZWZhdWx0KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vdGlmaWNhY29lc0F0aXZhczogUFJFRkVSRU5DSUFTX0RFRkFVTFRTLm5vdGlmaWNhY29lc0F0aXZhcyxcbiAgICAgIGVtYWlsQXRpdm86IFBSRUZFUkVOQ0lBU19ERUZBVUxUUy5lbWFpbEF0aXZvLFxuICAgICAgZGlhc0FudGVjZWRlbmNpYUxlbWJyZXRlOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuZGlhc0FudGVjZWRlbmNpYUxlbWJyZXRlLFxuICAgICAgaG9yYXJpb0VudmlvOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuaG9yYXJpb0VudmlvLFxuICAgICAgaW5jbHVpckZpbnNEZVNlbWFuYVNlbWFuYTogUFJFRkVSRU5DSUFTX0RFRkFVTFRTLmluY2x1aXJGaW5zRGVTZW1hbmFTZW1hbmEsXG4gICAgICBpbmNsdWlyRmVyaWFkb3M6IFBSRUZFUkVOQ0lBU19ERUZBVUxUUy5pbmNsdWlyRmVyaWFkb3MsXG4gICAgICB0aXBvc05vdGlmaWNhY2FvOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMudGlwb3NOb3RpZmljYWNhbyxcbiAgICAgIHVyZ2VuY2lhTWluaW1hOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMudXJnZW5jaWFNaW5pbWEsXG4gICAgICBmcmVxdWVuY2lhTGVtYnJldGVzOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuZnJlcXVlbmNpYUxlbWJyZXRlcyxcbiAgICAgIGluY2x1aXJEZXRhbGhlc0F2YWxpYWNhbzogUFJFRkVSRU5DSUFTX0RFRkFVTFRTLmluY2x1aXJEZXRhbGhlc0F2YWxpYWNhbyxcbiAgICAgIGluY2x1aXJMaW5rRGlyZXRvOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuaW5jbHVpckxpbmtEaXJldG8sXG4gICAgICBpbmNsdWlyUmVzdW1vRXN0YXRpc3RpY2FzOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuaW5jbHVpclJlc3Vtb0VzdGF0aXN0aWNhcyxcbiAgICAgIGZvcm1hdG9FbWFpbDogUFJFRkVSRU5DSUFTX0RFRkFVTFRTLmZvcm1hdG9FbWFpbCxcbiAgICAgIGlkaW9tYU5vdGlmaWNhY2FvOiBQUkVGRVJFTkNJQVNfREVGQVVMVFMuaWRpb21hTm90aWZpY2FjYW8sXG4gICAgICBwYXVzYXJOb3RpZmljYWNvZXM6IHtcbiAgICAgICAgYXRpdm86IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGZpbHRyb3M6IFBSRUZFUkVOQ0lBU19ERUZBVUxUUy5maWx0cm9zLFxuICAgICAgY3JpYWRvRW06IG5ldyBEYXRlKCksXG4gICAgICBhdHVhbGl6YWRvRW06IG5ldyBEYXRlKCksXG4gICAgICB2ZXJzYW86IDEsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXNjbGEgZGFkb3MgZXhpc3RlbnRlcyBjb20gbm92b3MgZGFkb3NcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIG1lc2NsYXJEYWRvcyhleGlzdGVudGVzOiBhbnksIG5vdm9zOiBQcmVmZXJlbmNpYXNOb3RpZmljYWNhb0lucHV0KTogYW55IHtcbiAgICBjb25zdCByZXN1bHRhZG8gPSB7IC4uLmV4aXN0ZW50ZXMgfTtcblxuICAgIC8vIEF0dWFsaXphIGNhbXBvcyBzaW1wbGVzXG4gICAgT2JqZWN0LmtleXMobm92b3MpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICd0aXBvc05vdGlmaWNhY2FvJyB8fCBrZXkgPT09ICdmcmVxdWVuY2lhTGVtYnJldGVzJyB8fCBcbiAgICAgICAgICBrZXkgPT09ICdwYXVzYXJOb3RpZmljYWNvZXMnIHx8IGtleSA9PT0gJ2ZpbHRyb3MnKSB7XG4gICAgICAgIC8vIFBhcmEgb2JqZXRvcyBhbmluaGFkb3MsIG1lc2NsYSBwcm9wcmllZGFkZXNcbiAgICAgICAgcmVzdWx0YWRvW2tleV0gPSB7XG4gICAgICAgICAgLi4ucmVzdWx0YWRvW2tleV0sXG4gICAgICAgICAgLi4ubm92b3Nba2V5IGFzIGtleW9mIFByZWZlcmVuY2lhc05vdGlmaWNhY2FvSW5wdXRdLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0YWRvW2tleV0gPSBub3Zvc1trZXkgYXMga2V5b2YgUHJlZmVyZW5jaWFzTm90aWZpY2FjYW9JbnB1dF07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0YWRvO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgZGFkb3MgZG8gYmFuY28gcGFyYSBvIHRpcG8gVHlwZVNjcmlwdFxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZm9ybWF0YXJQcmVmZXJlbmNpYXMoZGFkb3M6IGFueSk6IFByZWZlcmVuY2lhc05vdGlmaWNhY2FvIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhZG9zLmlkLFxuICAgICAgdXN1YXJpb0lkOiBkYWRvcy51c3VhcmlvSWQsXG4gICAgICBub3RpZmljYWNvZXNBdGl2YXM6IGRhZG9zLm5vdGlmaWNhY29lc0F0aXZhcyxcbiAgICAgIGVtYWlsQXRpdm86IGRhZG9zLmVtYWlsQXRpdm8sXG4gICAgICBkaWFzQW50ZWNlZGVuY2lhTGVtYnJldGU6IGRhZG9zLmRpYXNBbnRlY2VkZW5jaWFMZW1icmV0ZSxcbiAgICAgIGhvcmFyaW9FbnZpbzogZGFkb3MuaG9yYXJpb0VudmlvLFxuICAgICAgaW5jbHVpckZpbnNEZVNlbWFuYVNlbWFuYTogZGFkb3MuaW5jbHVpckZpbnNEZVNlbWFuYVNlbWFuYSxcbiAgICAgIGluY2x1aXJGZXJpYWRvczogZGFkb3MuaW5jbHVpckZlcmlhZG9zLFxuICAgICAgdGlwb3NOb3RpZmljYWNhbzogZGFkb3MudGlwb3NOb3RpZmljYWNhbyxcbiAgICAgIHVyZ2VuY2lhTWluaW1hOiBkYWRvcy51cmdlbmNpYU1pbmltYSxcbiAgICAgIGZyZXF1ZW5jaWFMZW1icmV0ZXM6IGRhZG9zLmZyZXF1ZW5jaWFMZW1icmV0ZXMsXG4gICAgICBpbmNsdWlyRGV0YWxoZXNBdmFsaWFjYW86IGRhZG9zLmluY2x1aXJEZXRhbGhlc0F2YWxpYWNhbyxcbiAgICAgIGluY2x1aXJMaW5rRGlyZXRvOiBkYWRvcy5pbmNsdWlyTGlua0RpcmV0byxcbiAgICAgIGluY2x1aXJSZXN1bW9Fc3RhdGlzdGljYXM6IGRhZG9zLmluY2x1aXJSZXN1bW9Fc3RhdGlzdGljYXMsXG4gICAgICBmb3JtYXRvRW1haWw6IGRhZG9zLmZvcm1hdG9FbWFpbCxcbiAgICAgIGlkaW9tYU5vdGlmaWNhY2FvOiBkYWRvcy5pZGlvbWFOb3RpZmljYWNhbyxcbiAgICAgIHBhdXNhck5vdGlmaWNhY29lczogZGFkb3MucGF1c2FyTm90aWZpY2Fjb2VzIHx8IHsgYXRpdm86IGZhbHNlIH0sXG4gICAgICBmaWx0cm9zOiBkYWRvcy5maWx0cm9zLFxuICAgICAgY3JpYWRvRW06IGRhZG9zLmNyaWFkb0VtLFxuICAgICAgYXR1YWxpemFkb0VtOiBkYWRvcy5hdHVhbGl6YWRvRW0sXG4gICAgICB1bHRpbWFOb3RpZmljYWNhb0VudmlhZGE6IGRhZG9zLnVsdGltYU5vdGlmaWNhY2FvRW52aWFkYSxcbiAgICAgIHZlcnNhbzogZGFkb3MudmVyc2FvLFxuICAgIH07XG4gIH1cbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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