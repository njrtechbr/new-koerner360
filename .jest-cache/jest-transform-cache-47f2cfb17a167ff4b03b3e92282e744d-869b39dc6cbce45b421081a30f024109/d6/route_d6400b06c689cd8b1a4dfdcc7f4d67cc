0b9e947f2eb32b9b8ceff5e0d4235b42
"use strict";

/* istanbul ignore next */
function cov_erisr1hnu() {
  var path = "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\periodos-avaliacao\\route.ts";
  var hash = "16cd11acd70766d7068566003fc9b2f9440ecb92";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\periodos-avaliacao\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 19
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 20
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 38
        }
      },
      "7": {
        start: {
          line: 20,
          column: 18
        },
        end: {
          line: 20,
          column: 38
        }
      },
      "8": {
        start: {
          line: 21,
          column: 14
        },
        end: {
          line: 21,
          column: 42
        }
      },
      "9": {
        start: {
          line: 22,
          column: 16
        },
        end: {
          line: 22,
          column: 46
        }
      },
      "10": {
        start: {
          line: 23,
          column: 16
        },
        end: {
          line: 23,
          column: 41
        }
      },
      "11": {
        start: {
          line: 24,
          column: 20
        },
        end: {
          line: 24,
          column: 66
        }
      },
      "12": {
        start: {
          line: 25,
          column: 30
        },
        end: {
          line: 25,
          column: 82
        }
      },
      "13": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 140,
          column: 5
        }
      },
      "14": {
        start: {
          line: 28,
          column: 24
        },
        end: {
          line: 28,
          column: 80
        }
      },
      "15": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 35,
          column: 9
        }
      },
      "16": {
        start: {
          line: 30,
          column: 12
        },
        end: {
          line: 34,
          column: 15
        }
      },
      "17": {
        start: {
          line: 37,
          column: 24
        },
        end: {
          line: 44,
          column: 10
        }
      },
      "18": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 51,
          column: 9
        }
      },
      "19": {
        start: {
          line: 46,
          column: 12
        },
        end: {
          line: 50,
          column: 15
        }
      },
      "20": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 59,
          column: 9
        }
      },
      "21": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 58,
          column: 15
        }
      },
      "22": {
        start: {
          line: 61,
          column: 8
        },
        end: {
          line: 61,
          column: 71
        }
      },
      "23": {
        start: {
          line: 62,
          column: 33
        },
        end: {
          line: 62,
          column: 53
        }
      },
      "24": {
        start: {
          line: 63,
          column: 35
        },
        end: {
          line: 63,
          column: 118
        }
      },
      "25": {
        start: {
          line: 64,
          column: 8
        },
        end: {
          line: 71,
          column: 9
        }
      },
      "26": {
        start: {
          line: 65,
          column: 12
        },
        end: {
          line: 70,
          column: 15
        }
      },
      "27": {
        start: {
          line: 72,
          column: 24
        },
        end: {
          line: 72,
          column: 48
        }
      },
      "28": {
        start: {
          line: 74,
          column: 22
        },
        end: {
          line: 74,
          column: 24
        }
      },
      "29": {
        start: {
          line: 75,
          column: 8
        },
        end: {
          line: 77,
          column: 9
        }
      },
      "30": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 76,
          column: 42
        }
      },
      "31": {
        start: {
          line: 78,
          column: 8
        },
        end: {
          line: 82,
          column: 9
        }
      },
      "32": {
        start: {
          line: 79,
          column: 12
        },
        end: {
          line: 81,
          column: 14
        }
      },
      "33": {
        start: {
          line: 83,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "34": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 86,
          column: 14
        }
      },
      "35": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 90,
          column: 9
        }
      },
      "36": {
        start: {
          line: 89,
          column: 12
        },
        end: {
          line: 89,
          column: 50
        }
      },
      "37": {
        start: {
          line: 92,
          column: 21
        },
        end: {
          line: 92,
          column: 55
        }
      },
      "38": {
        start: {
          line: 94,
          column: 34
        },
        end: {
          line: 120,
          column: 10
        }
      },
      "39": {
        start: {
          line: 121,
          column: 27
        },
        end: {
          line: 121,
          column: 59
        }
      },
      "40": {
        start: {
          line: 122,
          column: 8
        },
        end: {
          line: 132,
          column: 11
        }
      },
      "41": {
        start: {
          line: 134,
          column: 8
        },
        end: {
          line: 134,
          column: 70
        }
      },
      "42": {
        start: {
          line: 135,
          column: 8
        },
        end: {
          line: 139,
          column: 11
        }
      },
      "43": {
        start: {
          line: 143,
          column: 4
        },
        end: {
          line: 302,
          column: 5
        }
      },
      "44": {
        start: {
          line: 144,
          column: 24
        },
        end: {
          line: 144,
          column: 80
        }
      },
      "45": {
        start: {
          line: 145,
          column: 8
        },
        end: {
          line: 151,
          column: 9
        }
      },
      "46": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 150,
          column: 15
        }
      },
      "47": {
        start: {
          line: 153,
          column: 24
        },
        end: {
          line: 160,
          column: 10
        }
      },
      "48": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 167,
          column: 9
        }
      },
      "49": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 166,
          column: 15
        }
      },
      "50": {
        start: {
          line: 169,
          column: 8
        },
        end: {
          line: 175,
          column: 9
        }
      },
      "51": {
        start: {
          line: 170,
          column: 12
        },
        end: {
          line: 174,
          column: 15
        }
      },
      "52": {
        start: {
          line: 177,
          column: 8
        },
        end: {
          line: 177,
          column: 71
        }
      },
      "53": {
        start: {
          line: 178,
          column: 21
        },
        end: {
          line: 178,
          column: 41
        }
      },
      "54": {
        start: {
          line: 179,
          column: 35
        },
        end: {
          line: 179,
          column: 101
        }
      },
      "55": {
        start: {
          line: 180,
          column: 8
        },
        end: {
          line: 187,
          column: 9
        }
      },
      "56": {
        start: {
          line: 181,
          column: 12
        },
        end: {
          line: 186,
          column: 15
        }
      },
      "57": {
        start: {
          line: 188,
          column: 31
        },
        end: {
          line: 188,
          column: 55
        }
      },
      "58": {
        start: {
          line: 190,
          column: 33
        },
        end: {
          line: 194,
          column: 10
        }
      },
      "59": {
        start: {
          line: 195,
          column: 8
        },
        end: {
          line: 201,
          column: 9
        }
      },
      "60": {
        start: {
          line: 196,
          column: 12
        },
        end: {
          line: 200,
          column: 15
        }
      },
      "61": {
        start: {
          line: 203,
          column: 27
        },
        end: {
          line: 203,
          column: 62
        }
      },
      "62": {
        start: {
          line: 204,
          column: 24
        },
        end: {
          line: 204,
          column: 56
        }
      },
      "63": {
        start: {
          line: 205,
          column: 37
        },
        end: {
          line: 258,
          column: 10
        }
      },
      "64": {
        start: {
          line: 259,
          column: 8
        },
        end: {
          line: 271,
          column: 9
        }
      },
      "65": {
        start: {
          line: 260,
          column: 12
        },
        end: {
          line: 270,
          column: 15
        }
      },
      "66": {
        start: {
          line: 262,
          column: 58
        },
        end: {
          line: 267,
          column: 21
        }
      },
      "67": {
        start: {
          line: 273,
          column: 28
        },
        end: {
          line: 291,
          column: 10
        }
      },
      "68": {
        start: {
          line: 292,
          column: 8
        },
        end: {
          line: 294,
          column: 11
        }
      },
      "69": {
        start: {
          line: 296,
          column: 8
        },
        end: {
          line: 296,
          column: 68
        }
      },
      "70": {
        start: {
          line: 297,
          column: 8
        },
        end: {
          line: 301,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 15
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 16
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "GET",
        decl: {
          start: {
            line: 26,
            column: 15
          },
          end: {
            line: 26,
            column: 18
          }
        },
        loc: {
          start: {
            line: 26,
            column: 28
          },
          end: {
            line: 141,
            column: 1
          }
        },
        line: 26
      },
      "4": {
        name: "POST",
        decl: {
          start: {
            line: 142,
            column: 15
          },
          end: {
            line: 142,
            column: 19
          }
        },
        loc: {
          start: {
            line: 142,
            column: 29
          },
          end: {
            line: 303,
            column: 1
          }
        },
        line: 142
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 262,
            column: 52
          },
          end: {
            line: 262,
            column: 53
          }
        },
        loc: {
          start: {
            line: 262,
            column: 58
          },
          end: {
            line: 267,
            column: 21
          }
        },
        line: 262
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 29,
            column: 8
          },
          end: {
            line: 35,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 29,
            column: 8
          },
          end: {
            line: 35,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 29
      },
      "1": {
        loc: {
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 51,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 51,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 45
      },
      "2": {
        loc: {
          start: {
            line: 53,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "3": {
        loc: {
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 53,
            column: 109
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 53,
            column: 58
          }
        }, {
          start: {
            line: 53,
            column: 62
          },
          end: {
            line: 53,
            column: 109
          }
        }],
        line: 53
      },
      "4": {
        loc: {
          start: {
            line: 64,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 64,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 64
      },
      "5": {
        loc: {
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 75
      },
      "6": {
        loc: {
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "7": {
        loc: {
          start: {
            line: 83,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 83,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 83
      },
      "8": {
        loc: {
          start: {
            line: 88,
            column: 8
          },
          end: {
            line: 90,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 88,
            column: 8
          },
          end: {
            line: 90,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 88
      },
      "9": {
        loc: {
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 145
      },
      "10": {
        loc: {
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 167,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 167,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "11": {
        loc: {
          start: {
            line: 169,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 169,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 169
      },
      "12": {
        loc: {
          start: {
            line: 169,
            column: 12
          },
          end: {
            line: 169,
            column: 109
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 169,
            column: 12
          },
          end: {
            line: 169,
            column: 58
          }
        }, {
          start: {
            line: 169,
            column: 62
          },
          end: {
            line: 169,
            column: 109
          }
        }],
        line: 169
      },
      "13": {
        loc: {
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 180
      },
      "14": {
        loc: {
          start: {
            line: 195,
            column: 8
          },
          end: {
            line: 201,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 195,
            column: 8
          },
          end: {
            line: 201,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 195
      },
      "15": {
        loc: {
          start: {
            line: 259,
            column: 8
          },
          end: {
            line: 271,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 259,
            column: 8
          },
          end: {
            line: 271,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 259
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\periodos-avaliacao\\route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/lib/auth';\nimport { prisma } from '@/lib/prisma';\nimport { TipoUsuario, StatusPeriodo } from '@prisma/client';\nimport {\n  criarPeriodoSchema,\n  filtrosPeriodoSchema,\n  validarQueryParams,\n  validarBody\n} from '@/lib/validations/avaliacoes';\nimport { middlewareAtualizacaoStatus } from '@/lib/utils/periodo-status-updater';\n\n// GET /api/periodos-avaliacao - Listar per\xEDodos de avalia\xE7\xE3o\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions);\n    \n    if (!session?.user?.id) {\n      return NextResponse.json(\n        { error: 'N\xE3o autorizado' },\n        { status: 401 }\n      );\n    }\n\n    // Verificar permiss\xF5es do usu\xE1rio\n    const usuario = await prisma.usuario.findUnique({\n      where: { id: session.user.id },\n      select: { userType: true }\n    });\n\n    if (!usuario) {\n      return NextResponse.json(\n        { error: 'Usu\xE1rio n\xE3o encontrado' },\n        { status: 404 }\n      );\n    }\n\n    // Apenas ADMIN e GESTOR podem listar per\xEDodos\n    if (usuario.userType !== TipoUsuario.ADMIN && usuario.userType !== TipoUsuario.GESTOR) {\n      return NextResponse.json(\n        { error: 'Sem permiss\xE3o para visualizar per\xEDodos de avalia\xE7\xE3o' },\n        { status: 403 }\n      );\n    }\n\n    // Atualizar automaticamente os status dos per\xEDodos antes de listar\n    await middlewareAtualizacaoStatus();\n\n    const { searchParams } = new URL(request.url);\n    const resultadoValidacao = validarQueryParams(filtrosPeriodoSchema, searchParams);\n    \n    if (!resultadoValidacao.sucesso) {\n      return NextResponse.json(\n        { \n          erro: 'Par\xE2metros inv\xE1lidos', \n          detalhes: resultadoValidacao.erro?.details \n        },\n        { status: 400 }\n      );\n    }\n    \n    const filtros = resultadoValidacao.dados;\n\n    // Construir filtros para a consulta\n    const where: any = {};\n\n    if (filtros.status) {\n      where.status = filtros.status;\n    }\n\n    if (filtros.dataInicio) {\n      where.dataInicio = {\n        gte: new Date(filtros.dataInicio)\n      };\n    }\n\n    if (filtros.dataFim) {\n      where.dataFim = {\n        lte: new Date(filtros.dataFim)\n      };\n    }\n\n    if (filtros.criadoPor) {\n      where.criadoPorId = filtros.criadoPor;\n    }\n\n    // Calcular pagina\xE7\xE3o\n    const skip = (filtros.page - 1) * filtros.limit;\n\n    // Buscar per\xEDodos com pagina\xE7\xE3o\n    const [periodos, total] = await Promise.all([\n      prisma.periodoAvaliacao.findMany({\n        where,\n        skip,\n        take: filtros.limit,\n        orderBy: {\n          [filtros.orderBy]: filtros.orderDirection\n        },\n        include: {\n          criadoPor: {\n            select: {\n              id: true,\n              nome: true,\n              email: true\n            }\n          },\n          _count: {\n            select: {\n              avaliacoes: true\n            }\n          }\n        }\n      }),\n      prisma.periodoAvaliacao.count({ where })\n    ]);\n\n    const totalPages = Math.ceil(total / filtros.limit);\n\n    return NextResponse.json({\n      periodos,\n      pagination: {\n        page: filtros.page,\n        limit: filtros.limit,\n        total,\n        totalPages,\n        hasNext: filtros.page < totalPages,\n        hasPrev: filtros.page > 1\n      }\n    });\n\n  } catch (error) {\n    console.error('Erro ao listar per\xEDodos de avalia\xE7\xE3o:', error);\n    \n    return NextResponse.json(\n      { erro: 'Erro interno do servidor' },\n      { status: 500 }\n    );\n  }\n}\n\n// POST /api/periodos-avaliacao - Criar novo per\xEDodo de avalia\xE7\xE3o\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions);\n    \n    if (!session?.user?.id) {\n      return NextResponse.json(\n        { error: 'N\xE3o autorizado' },\n        { status: 401 }\n      );\n    }\n\n    // Verificar permiss\xF5es do usu\xE1rio\n    const usuario = await prisma.usuario.findUnique({\n      where: { id: session.user.id },\n      select: { userType: true }\n    });\n\n    if (!usuario) {\n      return NextResponse.json(\n        { error: 'Usu\xE1rio n\xE3o encontrado' },\n        { status: 404 }\n      );\n    }\n\n    // Apenas ADMIN e GESTOR podem criar per\xEDodos\n    if (usuario.userType !== TipoUsuario.ADMIN && usuario.userType !== TipoUsuario.GESTOR) {\n      return NextResponse.json(\n        { error: 'Sem permiss\xE3o para criar per\xEDodos de avalia\xE7\xE3o' },\n        { status: 403 }\n      );\n    }\n\n    // Atualizar automaticamente os status dos per\xEDodos antes de criar novo\n    await middlewareAtualizacaoStatus();\n\n    const body = await request.json();\n    const resultadoValidacao = validarBody(criarPeriodoSchema, body);\n    \n    if (!resultadoValidacao.sucesso) {\n      return NextResponse.json(\n        { \n          erro: 'Dados inv\xE1lidos', \n          detalhes: resultadoValidacao.erro?.details \n        },\n        { status: 400 }\n      );\n    }\n    \n    const dadosValidados = resultadoValidacao.dados;\n\n    // Verificar se j\xE1 existe um per\xEDodo com o mesmo nome\n    const periodoExistente = await prisma.periodoAvaliacao.findFirst({\n      where: {\n        nome: dadosValidados.nome\n      }\n    });\n\n    if (periodoExistente) {\n      return NextResponse.json(\n        { error: 'J\xE1 existe um per\xEDodo com este nome' },\n        { status: 409 }\n      );\n    }\n\n    // Verificar se h\xE1 conflito de datas com per\xEDodos ativos\n    const dataInicio = new Date(dadosValidados.dataInicio);\n    const dataFim = new Date(dadosValidados.dataFim);\n\n    const periodosConflitantes = await prisma.periodoAvaliacao.findMany({\n      where: {\n        status: {\n          in: [StatusPeriodo.ATIVO, StatusPeriodo.PLANEJADO]\n        },\n        OR: [\n          {\n            AND: [\n              { dataInicio: { lte: dataInicio } },\n              { dataFim: { gte: dataInicio } }\n            ]\n          },\n          {\n            AND: [\n              { dataInicio: { lte: dataFim } },\n              { dataFim: { gte: dataFim } }\n            ]\n          },\n          {\n            AND: [\n              { dataInicio: { gte: dataInicio } },\n              { dataFim: { lte: dataFim } }\n            ]\n          }\n        ]\n      }\n    });\n\n    if (periodosConflitantes.length > 0) {\n      return NextResponse.json(\n        { \n          error: 'H\xE1 conflito de datas com outros per\xEDodos ativos ou planejados',\n          conflitos: periodosConflitantes.map(p => ({\n            id: p.id,\n            nome: p.nome,\n            dataInicio: p.dataInicio,\n            dataFim: p.dataFim\n          }))\n        },\n        { status: 409 }\n      );\n    }\n\n    // Criar o per\xEDodo\n    const novoPeriodo = await prisma.periodoAvaliacao.create({\n      data: {\n        nome: dadosValidados.nome,\n        descricao: dadosValidados.descricao,\n        dataInicio,\n        dataFim,\n        status: dadosValidados.status,\n        criadoPorId: session.user.id\n      },\n      include: {\n        criadoPor: {\n          select: {\n            id: true,\n            nome: true,\n            email: true\n          }\n        }\n      }\n    });\n\n    return NextResponse.json(novoPeriodo, { status: 201 });\n\n  } catch (error) {\n    console.error('Erro ao criar per\xEDodo de avalia\xE7\xE3o:', error);\n    \n    return NextResponse.json(\n      { erro: 'Erro interno do servidor' },\n      { status: 500 }\n    );\n  }\n}"],
      names: ["GET", "POST", "request", "session", "getServerSession", "authOptions", "user", "id", "NextResponse", "json", "error", "status", "usuario", "prisma", "findUnique", "where", "select", "userType", "TipoUsuario", "ADMIN", "GESTOR", "middlewareAtualizacaoStatus", "searchParams", "URL", "url", "resultadoValidacao", "validarQueryParams", "filtrosPeriodoSchema", "sucesso", "erro", "detalhes", "details", "filtros", "dados", "dataInicio", "gte", "Date", "dataFim", "lte", "criadoPor", "criadoPorId", "skip", "page", "limit", "periodos", "total", "Promise", "all", "periodoAvaliacao", "findMany", "take", "orderBy", "orderDirection", "include", "nome", "email", "_count", "avaliacoes", "count", "totalPages", "Math", "ceil", "pagination", "hasNext", "hasPrev", "console", "body", "validarBody", "criarPeriodoSchema", "dadosValidados", "periodoExistente", "findFirst", "periodosConflitantes", "in", "StatusPeriodo", "ATIVO", "PLANEJADO", "OR", "AND", "length", "conflitos", "map", "p", "novoPeriodo", "create", "data", "descricao"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "16cd11acd70766d7068566003fc9b2f9440ecb92"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_erisr1hnu = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_erisr1hnu();
cov_erisr1hnu().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_erisr1hnu().f[0]++;
  cov_erisr1hnu().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_erisr1hnu().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_erisr1hnu().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_erisr1hnu().f[1]++;
    cov_erisr1hnu().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_erisr1hnu().f[2]++;
    cov_erisr1hnu().s[5]++;
    return POST;
  }
});
const _server =
/* istanbul ignore next */
(cov_erisr1hnu().s[6]++, require("next/server"));
const _nextauth =
/* istanbul ignore next */
(cov_erisr1hnu().s[7]++, require("next-auth"));
const _auth =
/* istanbul ignore next */
(cov_erisr1hnu().s[8]++, require("../../../lib/auth"));
const _prisma =
/* istanbul ignore next */
(cov_erisr1hnu().s[9]++, require("../../../lib/prisma"));
const _client =
/* istanbul ignore next */
(cov_erisr1hnu().s[10]++, require("@prisma/client"));
const _avaliacoes =
/* istanbul ignore next */
(cov_erisr1hnu().s[11]++, require("../../../lib/validations/avaliacoes"));
const _periodostatusupdater =
/* istanbul ignore next */
(cov_erisr1hnu().s[12]++, require("../../../lib/utils/periodo-status-updater"));
async function GET(request) {
  /* istanbul ignore next */
  cov_erisr1hnu().f[3]++;
  cov_erisr1hnu().s[13]++;
  try {
    const session =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[14]++, await (0, _nextauth.getServerSession)(_auth.authOptions));
    /* istanbul ignore next */
    cov_erisr1hnu().s[15]++;
    if (!session?.user?.id) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[0][0]++;
      cov_erisr1hnu().s[16]++;
      return _server.NextResponse.json({
        error: 'Não autorizado'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[0][1]++;
    }
    // Verificar permissões do usuário
    const usuario =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[17]++, await _prisma.prisma.usuario.findUnique({
      where: {
        id: session.user.id
      },
      select: {
        userType: true
      }
    }));
    /* istanbul ignore next */
    cov_erisr1hnu().s[18]++;
    if (!usuario) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[1][0]++;
      cov_erisr1hnu().s[19]++;
      return _server.NextResponse.json({
        error: 'Usuário não encontrado'
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[1][1]++;
    }
    // Apenas ADMIN e GESTOR podem listar períodos
    cov_erisr1hnu().s[20]++;
    if (
    /* istanbul ignore next */
    (cov_erisr1hnu().b[3][0]++, usuario.userType !== _client.TipoUsuario.ADMIN) &&
    /* istanbul ignore next */
    (cov_erisr1hnu().b[3][1]++, usuario.userType !== _client.TipoUsuario.GESTOR)) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[2][0]++;
      cov_erisr1hnu().s[21]++;
      return _server.NextResponse.json({
        error: 'Sem permissão para visualizar períodos de avaliação'
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[2][1]++;
    }
    // Atualizar automaticamente os status dos períodos antes de listar
    cov_erisr1hnu().s[22]++;
    await (0, _periodostatusupdater.middlewareAtualizacaoStatus)();
    const {
      searchParams
    } =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[23]++, new URL(request.url));
    const resultadoValidacao =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[24]++, (0, _avaliacoes.validarQueryParams)(_avaliacoes.filtrosPeriodoSchema, searchParams));
    /* istanbul ignore next */
    cov_erisr1hnu().s[25]++;
    if (!resultadoValidacao.sucesso) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[4][0]++;
      cov_erisr1hnu().s[26]++;
      return _server.NextResponse.json({
        erro: 'Parâmetros inválidos',
        detalhes: resultadoValidacao.erro?.details
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[4][1]++;
    }
    const filtros =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[27]++, resultadoValidacao.dados);
    // Construir filtros para a consulta
    const where =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[28]++, {});
    /* istanbul ignore next */
    cov_erisr1hnu().s[29]++;
    if (filtros.status) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[5][0]++;
      cov_erisr1hnu().s[30]++;
      where.status = filtros.status;
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[5][1]++;
    }
    cov_erisr1hnu().s[31]++;
    if (filtros.dataInicio) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[6][0]++;
      cov_erisr1hnu().s[32]++;
      where.dataInicio = {
        gte: new Date(filtros.dataInicio)
      };
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[6][1]++;
    }
    cov_erisr1hnu().s[33]++;
    if (filtros.dataFim) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[7][0]++;
      cov_erisr1hnu().s[34]++;
      where.dataFim = {
        lte: new Date(filtros.dataFim)
      };
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[7][1]++;
    }
    cov_erisr1hnu().s[35]++;
    if (filtros.criadoPor) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[8][0]++;
      cov_erisr1hnu().s[36]++;
      where.criadoPorId = filtros.criadoPor;
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[8][1]++;
    }
    // Calcular paginação
    const skip =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[37]++, (filtros.page - 1) * filtros.limit);
    // Buscar períodos com paginação
    const [periodos, total] =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[38]++, await Promise.all([_prisma.prisma.periodoAvaliacao.findMany({
      where,
      skip,
      take: filtros.limit,
      orderBy: {
        [filtros.orderBy]: filtros.orderDirection
      },
      include: {
        criadoPor: {
          select: {
            id: true,
            nome: true,
            email: true
          }
        },
        _count: {
          select: {
            avaliacoes: true
          }
        }
      }
    }), _prisma.prisma.periodoAvaliacao.count({
      where
    })]));
    const totalPages =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[39]++, Math.ceil(total / filtros.limit));
    /* istanbul ignore next */
    cov_erisr1hnu().s[40]++;
    return _server.NextResponse.json({
      periodos,
      pagination: {
        page: filtros.page,
        limit: filtros.limit,
        total,
        totalPages,
        hasNext: filtros.page < totalPages,
        hasPrev: filtros.page > 1
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_erisr1hnu().s[41]++;
    console.error('Erro ao listar períodos de avaliação:', error);
    /* istanbul ignore next */
    cov_erisr1hnu().s[42]++;
    return _server.NextResponse.json({
      erro: 'Erro interno do servidor'
    }, {
      status: 500
    });
  }
}
async function POST(request) {
  /* istanbul ignore next */
  cov_erisr1hnu().f[4]++;
  cov_erisr1hnu().s[43]++;
  try {
    const session =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[44]++, await (0, _nextauth.getServerSession)(_auth.authOptions));
    /* istanbul ignore next */
    cov_erisr1hnu().s[45]++;
    if (!session?.user?.id) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[9][0]++;
      cov_erisr1hnu().s[46]++;
      return _server.NextResponse.json({
        error: 'Não autorizado'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[9][1]++;
    }
    // Verificar permissões do usuário
    const usuario =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[47]++, await _prisma.prisma.usuario.findUnique({
      where: {
        id: session.user.id
      },
      select: {
        userType: true
      }
    }));
    /* istanbul ignore next */
    cov_erisr1hnu().s[48]++;
    if (!usuario) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[10][0]++;
      cov_erisr1hnu().s[49]++;
      return _server.NextResponse.json({
        error: 'Usuário não encontrado'
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[10][1]++;
    }
    // Apenas ADMIN e GESTOR podem criar períodos
    cov_erisr1hnu().s[50]++;
    if (
    /* istanbul ignore next */
    (cov_erisr1hnu().b[12][0]++, usuario.userType !== _client.TipoUsuario.ADMIN) &&
    /* istanbul ignore next */
    (cov_erisr1hnu().b[12][1]++, usuario.userType !== _client.TipoUsuario.GESTOR)) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[11][0]++;
      cov_erisr1hnu().s[51]++;
      return _server.NextResponse.json({
        error: 'Sem permissão para criar períodos de avaliação'
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[11][1]++;
    }
    // Atualizar automaticamente os status dos períodos antes de criar novo
    cov_erisr1hnu().s[52]++;
    await (0, _periodostatusupdater.middlewareAtualizacaoStatus)();
    const body =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[53]++, await request.json());
    const resultadoValidacao =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[54]++, (0, _avaliacoes.validarBody)(_avaliacoes.criarPeriodoSchema, body));
    /* istanbul ignore next */
    cov_erisr1hnu().s[55]++;
    if (!resultadoValidacao.sucesso) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[13][0]++;
      cov_erisr1hnu().s[56]++;
      return _server.NextResponse.json({
        erro: 'Dados inválidos',
        detalhes: resultadoValidacao.erro?.details
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[13][1]++;
    }
    const dadosValidados =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[57]++, resultadoValidacao.dados);
    // Verificar se já existe um período com o mesmo nome
    const periodoExistente =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[58]++, await _prisma.prisma.periodoAvaliacao.findFirst({
      where: {
        nome: dadosValidados.nome
      }
    }));
    /* istanbul ignore next */
    cov_erisr1hnu().s[59]++;
    if (periodoExistente) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[14][0]++;
      cov_erisr1hnu().s[60]++;
      return _server.NextResponse.json({
        error: 'Já existe um período com este nome'
      }, {
        status: 409
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[14][1]++;
    }
    // Verificar se há conflito de datas com períodos ativos
    const dataInicio =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[61]++, new Date(dadosValidados.dataInicio));
    const dataFim =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[62]++, new Date(dadosValidados.dataFim));
    const periodosConflitantes =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[63]++, await _prisma.prisma.periodoAvaliacao.findMany({
      where: {
        status: {
          in: [_client.StatusPeriodo.ATIVO, _client.StatusPeriodo.PLANEJADO]
        },
        OR: [{
          AND: [{
            dataInicio: {
              lte: dataInicio
            }
          }, {
            dataFim: {
              gte: dataInicio
            }
          }]
        }, {
          AND: [{
            dataInicio: {
              lte: dataFim
            }
          }, {
            dataFim: {
              gte: dataFim
            }
          }]
        }, {
          AND: [{
            dataInicio: {
              gte: dataInicio
            }
          }, {
            dataFim: {
              lte: dataFim
            }
          }]
        }]
      }
    }));
    /* istanbul ignore next */
    cov_erisr1hnu().s[64]++;
    if (periodosConflitantes.length > 0) {
      /* istanbul ignore next */
      cov_erisr1hnu().b[15][0]++;
      cov_erisr1hnu().s[65]++;
      return _server.NextResponse.json({
        error: 'Há conflito de datas com outros períodos ativos ou planejados',
        conflitos: periodosConflitantes.map(p => {
          /* istanbul ignore next */
          cov_erisr1hnu().f[5]++;
          cov_erisr1hnu().s[66]++;
          return {
            id: p.id,
            nome: p.nome,
            dataInicio: p.dataInicio,
            dataFim: p.dataFim
          };
        })
      }, {
        status: 409
      });
    } else
    /* istanbul ignore next */
    {
      cov_erisr1hnu().b[15][1]++;
    }
    // Criar o período
    const novoPeriodo =
    /* istanbul ignore next */
    (cov_erisr1hnu().s[67]++, await _prisma.prisma.periodoAvaliacao.create({
      data: {
        nome: dadosValidados.nome,
        descricao: dadosValidados.descricao,
        dataInicio,
        dataFim,
        status: dadosValidados.status,
        criadoPorId: session.user.id
      },
      include: {
        criadoPor: {
          select: {
            id: true,
            nome: true,
            email: true
          }
        }
      }
    }));
    /* istanbul ignore next */
    cov_erisr1hnu().s[68]++;
    return _server.NextResponse.json(novoPeriodo, {
      status: 201
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_erisr1hnu().s[69]++;
    console.error('Erro ao criar período de avaliação:', error);
    /* istanbul ignore next */
    cov_erisr1hnu().s[70]++;
    return _server.NextResponse.json({
      erro: 'Erro interno do servidor'
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJjb3ZfZXJpc3IxaG51IiwiZiIsInMiLCJQT1NUIiwicmVxdWVzdCIsInNlc3Npb24iLCJfbmV4dGF1dGgiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiX2F1dGgiLCJhdXRoT3B0aW9ucyIsInVzZXIiLCJpZCIsImIiLCJfc2VydmVyIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXN1YXJpbyIsIl9wcmlzbWEiLCJwcmlzbWEiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJzZWxlY3QiLCJ1c2VyVHlwZSIsIl9jbGllbnQiLCJUaXBvVXN1YXJpbyIsIkFETUlOIiwiR0VTVE9SIiwiX3BlcmlvZG9zdGF0dXN1cGRhdGVyIiwibWlkZGxld2FyZUF0dWFsaXphY2FvU3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicmVzdWx0YWRvVmFsaWRhY2FvIiwiX2F2YWxpYWNvZXMiLCJ2YWxpZGFyUXVlcnlQYXJhbXMiLCJmaWx0cm9zUGVyaW9kb1NjaGVtYSIsInN1Y2Vzc28iLCJlcnJvIiwiZGV0YWxoZXMiLCJkZXRhaWxzIiwiZmlsdHJvcyIsImRhZG9zIiwiZGF0YUluaWNpbyIsImd0ZSIsIkRhdGUiLCJkYXRhRmltIiwibHRlIiwiY3JpYWRvUG9yIiwiY3JpYWRvUG9ySWQiLCJza2lwIiwicGFnZSIsImxpbWl0IiwicGVyaW9kb3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJwZXJpb2RvQXZhbGlhY2FvIiwiZmluZE1hbnkiLCJ0YWtlIiwib3JkZXJCeSIsIm9yZGVyRGlyZWN0aW9uIiwiaW5jbHVkZSIsIm5vbWUiLCJlbWFpbCIsIl9jb3VudCIsImF2YWxpYWNvZXMiLCJjb3VudCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInBhZ2luYXRpb24iLCJoYXNOZXh0IiwiaGFzUHJldiIsImNvbnNvbGUiLCJib2R5IiwidmFsaWRhckJvZHkiLCJjcmlhclBlcmlvZG9TY2hlbWEiLCJkYWRvc1ZhbGlkYWRvcyIsInBlcmlvZG9FeGlzdGVudGUiLCJmaW5kRmlyc3QiLCJwZXJpb2Rvc0NvbmZsaXRhbnRlcyIsImluIiwiU3RhdHVzUGVyaW9kbyIsIkFUSVZPIiwiUExBTkVKQURPIiwiT1IiLCJBTkQiLCJsZW5ndGgiLCJjb25mbGl0b3MiLCJtYXAiLCJwIiwibm92b1BlcmlvZG8iLCJjcmVhdGUiLCJkYXRhIiwiZGVzY3JpY2FvIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOZXJldSBKclxcRG9jdW1lbnRzXFxEZXZcXG5ld1xcc3JjXFxhcHBcXGFwaVxccGVyaW9kb3MtYXZhbGlhY2FvXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IFRpcG9Vc3VhcmlvLCBTdGF0dXNQZXJpb2RvIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHtcbiAgY3JpYXJQZXJpb2RvU2NoZW1hLFxuICBmaWx0cm9zUGVyaW9kb1NjaGVtYSxcbiAgdmFsaWRhclF1ZXJ5UGFyYW1zLFxuICB2YWxpZGFyQm9keVxufSBmcm9tICdAL2xpYi92YWxpZGF0aW9ucy9hdmFsaWFjb2VzJztcbmltcG9ydCB7IG1pZGRsZXdhcmVBdHVhbGl6YWNhb1N0YXR1cyB9IGZyb20gJ0AvbGliL3V0aWxzL3BlcmlvZG8tc3RhdHVzLXVwZGF0ZXInO1xuXG4vLyBHRVQgL2FwaS9wZXJpb2Rvcy1hdmFsaWFjYW8gLSBMaXN0YXIgcGVyw61vZG9zIGRlIGF2YWxpYcOnw6NvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuICAgIFxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ07Do28gYXV0b3JpemFkbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBwZXJtaXNzw7VlcyBkbyB1c3XDoXJpb1xuICAgIGNvbnN0IHVzdWFyaW8gPSBhd2FpdCBwcmlzbWEudXN1YXJpby5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uLnVzZXIuaWQgfSxcbiAgICAgIHNlbGVjdDogeyB1c2VyVHlwZTogdHJ1ZSB9XG4gICAgfSk7XG5cbiAgICBpZiAoIXVzdWFyaW8pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEFwZW5hcyBBRE1JTiBlIEdFU1RPUiBwb2RlbSBsaXN0YXIgcGVyw61vZG9zXG4gICAgaWYgKHVzdWFyaW8udXNlclR5cGUgIT09IFRpcG9Vc3VhcmlvLkFETUlOICYmIHVzdWFyaW8udXNlclR5cGUgIT09IFRpcG9Vc3VhcmlvLkdFU1RPUikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnU2VtIHBlcm1pc3PDo28gcGFyYSB2aXN1YWxpemFyIHBlcsOtb2RvcyBkZSBhdmFsaWHDp8OjbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEF0dWFsaXphciBhdXRvbWF0aWNhbWVudGUgb3Mgc3RhdHVzIGRvcyBwZXLDrW9kb3MgYW50ZXMgZGUgbGlzdGFyXG4gICAgYXdhaXQgbWlkZGxld2FyZUF0dWFsaXphY2FvU3RhdHVzKCk7XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgcmVzdWx0YWRvVmFsaWRhY2FvID0gdmFsaWRhclF1ZXJ5UGFyYW1zKGZpbHRyb3NQZXJpb2RvU2NoZW1hLCBzZWFyY2hQYXJhbXMpO1xuICAgIFxuICAgIGlmICghcmVzdWx0YWRvVmFsaWRhY2FvLnN1Y2Vzc28pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBlcnJvOiAnUGFyw6JtZXRyb3MgaW52w6FsaWRvcycsIFxuICAgICAgICAgIGRldGFsaGVzOiByZXN1bHRhZG9WYWxpZGFjYW8uZXJybz8uZGV0YWlscyBcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmaWx0cm9zID0gcmVzdWx0YWRvVmFsaWRhY2FvLmRhZG9zO1xuXG4gICAgLy8gQ29uc3RydWlyIGZpbHRyb3MgcGFyYSBhIGNvbnN1bHRhXG4gICAgY29uc3Qgd2hlcmU6IGFueSA9IHt9O1xuXG4gICAgaWYgKGZpbHRyb3Muc3RhdHVzKSB7XG4gICAgICB3aGVyZS5zdGF0dXMgPSBmaWx0cm9zLnN0YXR1cztcbiAgICB9XG5cbiAgICBpZiAoZmlsdHJvcy5kYXRhSW5pY2lvKSB7XG4gICAgICB3aGVyZS5kYXRhSW5pY2lvID0ge1xuICAgICAgICBndGU6IG5ldyBEYXRlKGZpbHRyb3MuZGF0YUluaWNpbylcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGZpbHRyb3MuZGF0YUZpbSkge1xuICAgICAgd2hlcmUuZGF0YUZpbSA9IHtcbiAgICAgICAgbHRlOiBuZXcgRGF0ZShmaWx0cm9zLmRhdGFGaW0pXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChmaWx0cm9zLmNyaWFkb1Bvcikge1xuICAgICAgd2hlcmUuY3JpYWRvUG9ySWQgPSBmaWx0cm9zLmNyaWFkb1BvcjtcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhciBwYWdpbmHDp8Ojb1xuICAgIGNvbnN0IHNraXAgPSAoZmlsdHJvcy5wYWdlIC0gMSkgKiBmaWx0cm9zLmxpbWl0O1xuXG4gICAgLy8gQnVzY2FyIHBlcsOtb2RvcyBjb20gcGFnaW5hw6fDo29cbiAgICBjb25zdCBbcGVyaW9kb3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHByaXNtYS5wZXJpb2RvQXZhbGlhY2FvLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmUsXG4gICAgICAgIHNraXAsXG4gICAgICAgIHRha2U6IGZpbHRyb3MubGltaXQsXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBbZmlsdHJvcy5vcmRlckJ5XTogZmlsdHJvcy5vcmRlckRpcmVjdGlvblxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgY3JpYWRvUG9yOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5vbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBhdmFsaWFjb2VzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHByaXNtYS5wZXJpb2RvQXZhbGlhY2FvLmNvdW50KHsgd2hlcmUgfSlcbiAgICBdKTtcblxuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBmaWx0cm9zLmxpbWl0KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBwZXJpb2RvcyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZTogZmlsdHJvcy5wYWdlLFxuICAgICAgICBsaW1pdDogZmlsdHJvcy5saW1pdCxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICAgIGhhc05leHQ6IGZpbHRyb3MucGFnZSA8IHRvdGFsUGFnZXMsXG4gICAgICAgIGhhc1ByZXY6IGZpbHRyb3MucGFnZSA+IDFcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gbGlzdGFyIHBlcsOtb2RvcyBkZSBhdmFsaWHDp8OjbzonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBQT1NUIC9hcGkvcGVyaW9kb3MtYXZhbGlhY2FvIC0gQ3JpYXIgbm92byBwZXLDrW9kbyBkZSBhdmFsaWHDp8Ojb1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5pZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTsOjbyBhdXRvcml6YWRvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHBlcm1pc3PDtWVzIGRvIHVzdcOhcmlvXG4gICAgY29uc3QgdXN1YXJpbyA9IGF3YWl0IHByaXNtYS51c3VhcmlvLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHNlc3Npb24udXNlci5pZCB9LFxuICAgICAgc2VsZWN0OiB7IHVzZXJUeXBlOiB0cnVlIH1cbiAgICB9KTtcblxuICAgIGlmICghdXN1YXJpbykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVXN1w6FyaW8gbsOjbyBlbmNvbnRyYWRvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQXBlbmFzIEFETUlOIGUgR0VTVE9SIHBvZGVtIGNyaWFyIHBlcsOtb2Rvc1xuICAgIGlmICh1c3VhcmlvLnVzZXJUeXBlICE9PSBUaXBvVXN1YXJpby5BRE1JTiAmJiB1c3VhcmlvLnVzZXJUeXBlICE9PSBUaXBvVXN1YXJpby5HRVNUT1IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1NlbSBwZXJtaXNzw6NvIHBhcmEgY3JpYXIgcGVyw61vZG9zIGRlIGF2YWxpYcOnw6NvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQXR1YWxpemFyIGF1dG9tYXRpY2FtZW50ZSBvcyBzdGF0dXMgZG9zIHBlcsOtb2RvcyBhbnRlcyBkZSBjcmlhciBub3ZvXG4gICAgYXdhaXQgbWlkZGxld2FyZUF0dWFsaXphY2FvU3RhdHVzKCk7XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgcmVzdWx0YWRvVmFsaWRhY2FvID0gdmFsaWRhckJvZHkoY3JpYXJQZXJpb2RvU2NoZW1hLCBib2R5KTtcbiAgICBcbiAgICBpZiAoIXJlc3VsdGFkb1ZhbGlkYWNhby5zdWNlc3NvKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgXG4gICAgICAgICAgZXJybzogJ0RhZG9zIGludsOhbGlkb3MnLCBcbiAgICAgICAgICBkZXRhbGhlczogcmVzdWx0YWRvVmFsaWRhY2FvLmVycm8/LmRldGFpbHMgXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGFkb3NWYWxpZGFkb3MgPSByZXN1bHRhZG9WYWxpZGFjYW8uZGFkb3M7XG5cbiAgICAvLyBWZXJpZmljYXIgc2UgasOhIGV4aXN0ZSB1bSBwZXLDrW9kbyBjb20gbyBtZXNtbyBub21lXG4gICAgY29uc3QgcGVyaW9kb0V4aXN0ZW50ZSA9IGF3YWl0IHByaXNtYS5wZXJpb2RvQXZhbGlhY2FvLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBub21lOiBkYWRvc1ZhbGlkYWRvcy5ub21lXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocGVyaW9kb0V4aXN0ZW50ZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSsOhIGV4aXN0ZSB1bSBwZXLDrW9kbyBjb20gZXN0ZSBub21lJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA5IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHNlIGjDoSBjb25mbGl0byBkZSBkYXRhcyBjb20gcGVyw61vZG9zIGF0aXZvc1xuICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZShkYWRvc1ZhbGlkYWRvcy5kYXRhSW5pY2lvKTtcbiAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoZGFkb3NWYWxpZGFkb3MuZGF0YUZpbSk7XG5cbiAgICBjb25zdCBwZXJpb2Rvc0NvbmZsaXRhbnRlcyA9IGF3YWl0IHByaXNtYS5wZXJpb2RvQXZhbGlhY2FvLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN0YXR1czoge1xuICAgICAgICAgIGluOiBbU3RhdHVzUGVyaW9kby5BVElWTywgU3RhdHVzUGVyaW9kby5QTEFORUpBRE9dXG4gICAgICAgIH0sXG4gICAgICAgIE9SOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgIHsgZGF0YUluaWNpbzogeyBsdGU6IGRhdGFJbmljaW8gfSB9LFxuICAgICAgICAgICAgICB7IGRhdGFGaW06IHsgZ3RlOiBkYXRhSW5pY2lvIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgIHsgZGF0YUluaWNpbzogeyBsdGU6IGRhdGFGaW0gfSB9LFxuICAgICAgICAgICAgICB7IGRhdGFGaW06IHsgZ3RlOiBkYXRhRmltIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgIHsgZGF0YUluaWNpbzogeyBndGU6IGRhdGFJbmljaW8gfSB9LFxuICAgICAgICAgICAgICB7IGRhdGFGaW06IHsgbHRlOiBkYXRhRmltIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHBlcmlvZG9zQ29uZmxpdGFudGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBlcnJvcjogJ0jDoSBjb25mbGl0byBkZSBkYXRhcyBjb20gb3V0cm9zIHBlcsOtb2RvcyBhdGl2b3Mgb3UgcGxhbmVqYWRvcycsXG4gICAgICAgICAgY29uZmxpdG9zOiBwZXJpb2Rvc0NvbmZsaXRhbnRlcy5tYXAocCA9PiAoe1xuICAgICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgICBub21lOiBwLm5vbWUsXG4gICAgICAgICAgICBkYXRhSW5pY2lvOiBwLmRhdGFJbmljaW8sXG4gICAgICAgICAgICBkYXRhRmltOiBwLmRhdGFGaW1cbiAgICAgICAgICB9KSlcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwOSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENyaWFyIG8gcGVyw61vZG9cbiAgICBjb25zdCBub3ZvUGVyaW9kbyA9IGF3YWl0IHByaXNtYS5wZXJpb2RvQXZhbGlhY2FvLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG5vbWU6IGRhZG9zVmFsaWRhZG9zLm5vbWUsXG4gICAgICAgIGRlc2NyaWNhbzogZGFkb3NWYWxpZGFkb3MuZGVzY3JpY2FvLFxuICAgICAgICBkYXRhSW5pY2lvLFxuICAgICAgICBkYXRhRmltLFxuICAgICAgICBzdGF0dXM6IGRhZG9zVmFsaWRhZG9zLnN0YXR1cyxcbiAgICAgICAgY3JpYWRvUG9ySWQ6IHNlc3Npb24udXNlci5pZFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgY3JpYWRvUG9yOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIG5vbWU6IHRydWUsXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG5vdm9QZXJpb2RvLCB7IHN0YXR1czogMjAxIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjcmlhciBwZXLDrW9kbyBkZSBhdmFsaWHDp8OjbzonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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