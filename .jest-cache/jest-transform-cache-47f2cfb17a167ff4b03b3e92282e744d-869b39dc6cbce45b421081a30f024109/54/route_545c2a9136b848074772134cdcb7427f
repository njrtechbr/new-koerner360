844440b5db34a73adf720556a15cc32c
"use strict";

/* istanbul ignore next */
function cov_8xheitasy() {
  var path = "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\atendentes\\[id]\\historico\\route.ts";
  var hash = "10a54c7a8e48232f6a1c058fc6a4816b058e85b2";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\atendentes\\[id]\\historico\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 19
        }
      },
      "3": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 38
        }
      },
      "4": {
        start: {
          line: 12,
          column: 18
        },
        end: {
          line: 12,
          column: 38
        }
      },
      "5": {
        start: {
          line: 13,
          column: 14
        },
        end: {
          line: 13,
          column: 48
        }
      },
      "6": {
        start: {
          line: 14,
          column: 16
        },
        end: {
          line: 14,
          column: 52
        }
      },
      "7": {
        start: {
          line: 15,
          column: 20
        },
        end: {
          line: 15,
          column: 72
        }
      },
      "8": {
        start: {
          line: 16,
          column: 29
        },
        end: {
          line: 16,
          column: 91
        }
      },
      "9": {
        start: {
          line: 17,
          column: 13
        },
        end: {
          line: 17,
          column: 27
        }
      },
      "10": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 184,
          column: 5
        }
      },
      "11": {
        start: {
          line: 21,
          column: 24
        },
        end: {
          line: 21,
          column: 80
        }
      },
      "12": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "13": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 27,
          column: 15
        }
      },
      "14": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 39,
          column: 9
        }
      },
      "15": {
        start: {
          line: 34,
          column: 12
        },
        end: {
          line: 38,
          column: 15
        }
      },
      "16": {
        start: {
          line: 41,
          column: 28
        },
        end: {
          line: 41,
          column: 74
        }
      },
      "17": {
        start: {
          line: 43,
          column: 26
        },
        end: {
          line: 56,
          column: 10
        }
      },
      "18": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 63,
          column: 9
        }
      },
      "19": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 62,
          column: 15
        }
      },
      "20": {
        start: {
          line: 65,
          column: 33
        },
        end: {
          line: 65,
          column: 53
        }
      },
      "21": {
        start: {
          line: 66,
          column: 35
        },
        end: {
          line: 66,
          column: 77
        }
      },
      "22": {
        start: {
          line: 68,
          column: 84
        },
        end: {
          line: 68,
          column: 154
        }
      },
      "23": {
        start: {
          line: 70,
          column: 24
        },
        end: {
          line: 72,
          column: 9
        }
      },
      "24": {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 75,
          column: 9
        }
      },
      "25": {
        start: {
          line: 74,
          column: 12
        },
        end: {
          line: 74,
          column: 32
        }
      },
      "26": {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 84,
          column: 9
        }
      },
      "27": {
        start: {
          line: 77,
          column: 12
        },
        end: {
          line: 77,
          column: 34
        }
      },
      "28": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 80,
          column: 13
        }
      },
      "29": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 60
        }
      },
      "30": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 83,
          column: 13
        }
      },
      "31": {
        start: {
          line: 82,
          column: 16
        },
        end: {
          line: 82,
          column: 57
        }
      },
      "32": {
        start: {
          line: 85,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "33": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 86,
          column: 46
        }
      },
      "34": {
        start: {
          line: 89,
          column: 23
        },
        end: {
          line: 89,
          column: 44
        }
      },
      "35": {
        start: {
          line: 91,
          column: 35
        },
        end: {
          line: 111,
          column: 10
        }
      },
      "36": {
        start: {
          line: 113,
          column: 29
        },
        end: {
          line: 113,
          column: 54
        }
      },
      "37": {
        start: {
          line: 114,
          column: 33
        },
        end: {
          line: 114,
          column: 54
        }
      },
      "38": {
        start: {
          line: 115,
          column: 34
        },
        end: {
          line: 115,
          column: 44
        }
      },
      "39": {
        start: {
          line: 117,
          column: 29
        },
        end: {
          line: 127,
          column: 10
        }
      },
      "40": {
        start: {
          line: 128,
          column: 8
        },
        end: {
          line: 168,
          column: 11
        }
      },
      "41": {
        start: {
          line: 134,
          column: 46
        },
        end: {
          line: 146,
          column: 17
        }
      },
      "42": {
        start: {
          line: 158,
          column: 20
        },
        end: {
          line: 158,
          column: 52
        }
      },
      "43": {
        start: {
          line: 159,
          column: 20
        },
        end: {
          line: 159,
          column: 31
        }
      },
      "44": {
        start: {
          line: 170,
          column: 8
        },
        end: {
          line: 170,
          column: 71
        }
      },
      "45": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 178,
          column: 9
        }
      },
      "46": {
        start: {
          line: 172,
          column: 12
        },
        end: {
          line: 177,
          column: 15
        }
      },
      "47": {
        start: {
          line: 179,
          column: 8
        },
        end: {
          line: 183,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 18
          }
        },
        loc: {
          start: {
            line: 18,
            column: 40
          },
          end: {
            line: 185,
            column: 1
          }
        },
        line: 18
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 134,
            column: 37
          },
          end: {
            line: 134,
            column: 38
          }
        },
        loc: {
          start: {
            line: 134,
            column: 46
          },
          end: {
            line: 146,
            column: 17
          }
        },
        line: 134
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 157,
            column: 45
          },
          end: {
            line: 157,
            column: 46
          }
        },
        loc: {
          start: {
            line: 157,
            column: 58
          },
          end: {
            line: 160,
            column: 17
          }
        },
        line: 157
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 22,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 22,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 22
      },
      "1": {
        loc: {
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 30
      },
      "2": {
        loc: {
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 63,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 63,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "3": {
        loc: {
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 68,
            column: 26
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 68,
            column: 25
          },
          end: {
            line: 68,
            column: 26
          }
        }],
        line: 68
      },
      "4": {
        loc: {
          start: {
            line: 68,
            column: 28
          },
          end: {
            line: 68,
            column: 39
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 68,
            column: 37
          },
          end: {
            line: 68,
            column: 39
          }
        }],
        line: 68
      },
      "5": {
        loc: {
          start: {
            line: 73,
            column: 8
          },
          end: {
            line: 75,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 73,
            column: 8
          },
          end: {
            line: 75,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 73
      },
      "6": {
        loc: {
          start: {
            line: 76,
            column: 8
          },
          end: {
            line: 84,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 8
          },
          end: {
            line: 84,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      },
      "7": {
        loc: {
          start: {
            line: 76,
            column: 12
          },
          end: {
            line: 76,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 76,
            column: 12
          },
          end: {
            line: 76,
            column: 22
          }
        }, {
          start: {
            line: 76,
            column: 26
          },
          end: {
            line: 76,
            column: 33
          }
        }],
        line: 76
      },
      "8": {
        loc: {
          start: {
            line: 78,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "9": {
        loc: {
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 81
      },
      "10": {
        loc: {
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 85
      },
      "11": {
        loc: {
          start: {
            line: 138,
            column: 37
          },
          end: {
            line: 138,
            column: 99
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 138,
            column: 60
          },
          end: {
            line: 138,
            column: 92
          }
        }, {
          start: {
            line: 138,
            column: 95
          },
          end: {
            line: 138,
            column: 99
          }
        }],
        line: 138
      },
      "12": {
        loc: {
          start: {
            line: 139,
            column: 32
          },
          end: {
            line: 139,
            column: 84
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 139,
            column: 50
          },
          end: {
            line: 139,
            column: 77
          }
        }, {
          start: {
            line: 139,
            column: 80
          },
          end: {
            line: 139,
            column: 84
          }
        }],
        line: 139
      },
      "13": {
        loc: {
          start: {
            line: 171,
            column: 8
          },
          end: {
            line: 178,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 171,
            column: 8
          },
          end: {
            line: 178,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 171
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0],
      "4": [0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\app\\api\\atendentes\\[id]\\historico\\route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/lib/auth';\nimport { prisma } from '@/lib/prisma';\nimport { z } from 'zod';\nimport {\n  idAtendenteSchema,\n  MENSAGENS_ERRO_ATENDENTES,\n} from '@/lib/validations/atendentes';\nimport { consultaHistoricoSchema } from '@/lib/validations/historico-atendentes';\nimport { ZodError } from 'zod';\n\ninterface RouteParams {\n  params: {\n    id: string;\n  };\n}\n\n/**\n * GET /api/atendentes/[id]/historico\n * Lista o hist\xF3rico de altera\xE7\xF5es de um atendente\n */\nexport async function GET(request: NextRequest, { params }: RouteParams) {\n  try {\n    // Verificar autentica\xE7\xE3o\n    const session = await getServerSession(authOptions);\n    if (!session?.user) {\n      return NextResponse.json({ erro: 'N\xE3o autorizado' }, { status: 401 });\n    }\n\n    // Verificar permiss\xF5es (apenas ADMIN e GERENTE podem ver hist\xF3rico)\n    if (!['ADMIN', 'GERENTE'].includes(session.user.userType)) {\n      return NextResponse.json(\n        { erro: MENSAGENS_ERRO_ATENDENTES.SEM_PERMISSAO },\n        { status: 403 }\n      );\n    }\n\n    // Validar ID\n    const atendenteId = idAtendenteSchema.parse(params.id);\n\n    // Verificar se o atendente existe\n    const atendente = await prisma.atendente.findUnique({\n      where: { id: atendenteId },\n      select: {\n        id: true,\n        usuario: {\n          select: {\n            nome: true,\n            email: true,\n          },\n        },\n      },\n    });\n\n    if (!atendente) {\n      return NextResponse.json(\n        { erro: MENSAGENS_ERRO_ATENDENTES.ATENDENTE_NAO_ENCONTRADO },\n        { status: 404 }\n      );\n    }\n\n    // Extrair par\xE2metros de consulta\n    const { searchParams } = new URL(request.url);\n    const parametrosConsulta = Object.fromEntries(searchParams.entries());\n\n    // Validar par\xE2metros\n    const {\n      pagina = 1,\n      limite = 20,\n      tipo,\n      dataInicio,\n      dataFim,\n      criadoPorId,\n    } = consultaHistoricoSchema.parse(parametrosConsulta);\n\n    // Construir filtros\n    const filtros: any = {\n      atendenteId,\n    };\n\n    if (tipo) {\n      filtros.tipo = tipo;\n    }\n\n    if (dataInicio || dataFim) {\n      filtros.criadoEm = {};\n      if (dataInicio) {\n        filtros.criadoEm.gte = new Date(dataInicio);\n      }\n      if (dataFim) {\n        filtros.criadoEm.lte = new Date(dataFim);\n      }\n    }\n\n    if (criadoPorId) {\n      filtros.criadoPorId = criadoPorId;\n    }\n\n    // Calcular offset\n    const offset = (pagina - 1) * limite;\n\n    // Buscar hist\xF3rico com pagina\xE7\xE3o\n    const [historico, total] = await Promise.all([\n      prisma.historicoAlteracaoAtendente.findMany({\n        where: filtros,\n        include: {\n          usuario: {\n            select: {\n              nome: true,\n              email: true,\n            },\n          },\n        },\n        orderBy: {\n          criadoEm: 'desc',\n        },\n        skip: offset,\n        take: limite,\n      }),\n      prisma.historicoAlteracaoAtendente.count({\n        where: filtros,\n      }),\n    ]);\n\n    // Calcular informa\xE7\xF5es de pagina\xE7\xE3o\n    const totalPaginas = Math.ceil(total / limite);\n    const temProximaPagina = pagina < totalPaginas;\n    const temPaginaAnterior = pagina > 1;\n\n    // Buscar estat\xEDsticas do hist\xF3rico\n    const estatisticas = await prisma.historicoAlteracaoAtendente.groupBy({\n      by: ['tipo'],\n      where: { atendenteId },\n      _count: {\n        id: true,\n      },\n    });\n\n    return NextResponse.json({\n      atendente: {\n        id: atendente.id,\n        nome: atendente.usuario.nome,\n        email: atendente.usuario.email,\n      },\n      historico: historico.map(item => ({\n        id: item.id,\n        tipoAlteracao: item.tipo,\n        descricao: item.descricao,\n        dadosAnteriores: item.dadosAnteriores\n          ? JSON.parse(item.dadosAnteriores)\n          : null,\n        dadosNovos: item.dadosNovos ? JSON.parse(item.dadosNovos) : null,\n        alteradoPor: {\n          id: item.criadoPorId,\n          nome: item.usuario.nome,\n          email: item.usuario.email,\n        },\n        criadoEm: item.criadoEm,\n      })),\n      paginacao: {\n        paginaAtual: pagina,\n        totalPaginas,\n        totalItens: total,\n        itensPorPagina: limite,\n        temProximaPagina,\n        temPaginaAnterior,\n      },\n      estatisticas: {\n        totalAlteracoes: total,\n        porTipo: estatisticas.reduce(\n          (acc, item) => {\n            acc[item.tipo] = item._count.id;\n            return acc;\n          },\n          {} as Record<string, number>\n        ),\n      },\n      filtros: {\n        tipo,\n        dataInicio,\n        dataFim,\n        criadoPorId,\n      },\n    });\n  } catch (error) {\n    console.error('Erro ao buscar hist\xF3rico do atendente:', error);\n\n    if (error instanceof ZodError) {\n      return NextResponse.json(\n        {\n          erro: MENSAGENS_ERRO_ATENDENTES.DADOS_INVALIDOS,\n          detalhes: error.errors,\n        },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { erro: MENSAGENS_ERRO_ATENDENTES.ERRO_INTERNO },\n      { status: 500 }\n    );\n  }\n}\n"],
      names: ["GET", "request", "params", "session", "getServerSession", "authOptions", "user", "NextResponse", "json", "erro", "status", "includes", "userType", "MENSAGENS_ERRO_ATENDENTES", "SEM_PERMISSAO", "atendenteId", "idAtendenteSchema", "parse", "id", "atendente", "prisma", "findUnique", "where", "select", "usuario", "nome", "email", "ATENDENTE_NAO_ENCONTRADO", "searchParams", "URL", "url", "parametrosConsulta", "Object", "fromEntries", "entries", "pagina", "limite", "tipo", "dataInicio", "dataFim", "criadoPorId", "consultaHistoricoSchema", "filtros", "criadoEm", "gte", "Date", "lte", "offset", "historico", "total", "Promise", "all", "historicoAlteracaoAtendente", "findMany", "include", "orderBy", "skip", "take", "count", "totalPaginas", "Math", "ceil", "temProximaPagina", "temPaginaAnterior", "estatisticas", "groupBy", "by", "_count", "map", "item", "tipoAlteracao", "descricao", "dadosAnteriores", "JSON", "dadosNovos", "alteradoPor", "paginacao", "paginaAtual", "totalItens", "itensPorPagina", "totalAlteracoes", "porTipo", "reduce", "acc", "error", "console", "ZodError", "DADOS_INVALIDOS", "detalhes", "errors", "ERRO_INTERNO"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "10a54c7a8e48232f6a1c058fc6a4816b058e85b2"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_8xheitasy = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_8xheitasy();
cov_8xheitasy().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_8xheitasy().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_8xheitasy().f[0]++;
    cov_8xheitasy().s[2]++;
    return GET;
  }
});
const _server =
/* istanbul ignore next */
(cov_8xheitasy().s[3]++, require("next/server"));
const _nextauth =
/* istanbul ignore next */
(cov_8xheitasy().s[4]++, require("next-auth"));
const _auth =
/* istanbul ignore next */
(cov_8xheitasy().s[5]++, require("../../../../../lib/auth"));
const _prisma =
/* istanbul ignore next */
(cov_8xheitasy().s[6]++, require("../../../../../lib/prisma"));
const _atendentes =
/* istanbul ignore next */
(cov_8xheitasy().s[7]++, require("../../../../../lib/validations/atendentes"));
const _historicoatendentes =
/* istanbul ignore next */
(cov_8xheitasy().s[8]++, require("../../../../../lib/validations/historico-atendentes"));
const _zod =
/* istanbul ignore next */
(cov_8xheitasy().s[9]++, require("zod"));
async function GET(request, {
  params
}) {
  /* istanbul ignore next */
  cov_8xheitasy().f[1]++;
  cov_8xheitasy().s[10]++;
  try {
    // Verificar autenticação
    const session =
    /* istanbul ignore next */
    (cov_8xheitasy().s[11]++, await (0, _nextauth.getServerSession)(_auth.authOptions));
    /* istanbul ignore next */
    cov_8xheitasy().s[12]++;
    if (!session?.user) {
      /* istanbul ignore next */
      cov_8xheitasy().b[0][0]++;
      cov_8xheitasy().s[13]++;
      return _server.NextResponse.json({
        erro: 'Não autorizado'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[0][1]++;
    }
    // Verificar permissões (apenas ADMIN e GERENTE podem ver histórico)
    cov_8xheitasy().s[14]++;
    if (!['ADMIN', 'GERENTE'].includes(session.user.userType)) {
      /* istanbul ignore next */
      cov_8xheitasy().b[1][0]++;
      cov_8xheitasy().s[15]++;
      return _server.NextResponse.json({
        erro: _atendentes.MENSAGENS_ERRO_ATENDENTES.SEM_PERMISSAO
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[1][1]++;
    }
    // Validar ID
    const atendenteId =
    /* istanbul ignore next */
    (cov_8xheitasy().s[16]++, _atendentes.idAtendenteSchema.parse(params.id));
    // Verificar se o atendente existe
    const atendente =
    /* istanbul ignore next */
    (cov_8xheitasy().s[17]++, await _prisma.prisma.atendente.findUnique({
      where: {
        id: atendenteId
      },
      select: {
        id: true,
        usuario: {
          select: {
            nome: true,
            email: true
          }
        }
      }
    }));
    /* istanbul ignore next */
    cov_8xheitasy().s[18]++;
    if (!atendente) {
      /* istanbul ignore next */
      cov_8xheitasy().b[2][0]++;
      cov_8xheitasy().s[19]++;
      return _server.NextResponse.json({
        erro: _atendentes.MENSAGENS_ERRO_ATENDENTES.ATENDENTE_NAO_ENCONTRADO
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[2][1]++;
    }
    // Extrair parâmetros de consulta
    const {
      searchParams
    } =
    /* istanbul ignore next */
    (cov_8xheitasy().s[20]++, new URL(request.url));
    const parametrosConsulta =
    /* istanbul ignore next */
    (cov_8xheitasy().s[21]++, Object.fromEntries(searchParams.entries()));
    // Validar parâmetros
    const {
      pagina =
      /* istanbul ignore next */
      (cov_8xheitasy().b[3][0]++, 1),
      limite =
      /* istanbul ignore next */
      (cov_8xheitasy().b[4][0]++, 20),
      tipo,
      dataInicio,
      dataFim,
      criadoPorId
    } =
    /* istanbul ignore next */
    (cov_8xheitasy().s[22]++, _historicoatendentes.consultaHistoricoSchema.parse(parametrosConsulta));
    // Construir filtros
    const filtros =
    /* istanbul ignore next */
    (cov_8xheitasy().s[23]++, {
      atendenteId
    });
    /* istanbul ignore next */
    cov_8xheitasy().s[24]++;
    if (tipo) {
      /* istanbul ignore next */
      cov_8xheitasy().b[5][0]++;
      cov_8xheitasy().s[25]++;
      filtros.tipo = tipo;
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[5][1]++;
    }
    cov_8xheitasy().s[26]++;
    if (
    /* istanbul ignore next */
    (cov_8xheitasy().b[7][0]++, dataInicio) ||
    /* istanbul ignore next */
    (cov_8xheitasy().b[7][1]++, dataFim)) {
      /* istanbul ignore next */
      cov_8xheitasy().b[6][0]++;
      cov_8xheitasy().s[27]++;
      filtros.criadoEm = {};
      /* istanbul ignore next */
      cov_8xheitasy().s[28]++;
      if (dataInicio) {
        /* istanbul ignore next */
        cov_8xheitasy().b[8][0]++;
        cov_8xheitasy().s[29]++;
        filtros.criadoEm.gte = new Date(dataInicio);
      } else
      /* istanbul ignore next */
      {
        cov_8xheitasy().b[8][1]++;
      }
      cov_8xheitasy().s[30]++;
      if (dataFim) {
        /* istanbul ignore next */
        cov_8xheitasy().b[9][0]++;
        cov_8xheitasy().s[31]++;
        filtros.criadoEm.lte = new Date(dataFim);
      } else
      /* istanbul ignore next */
      {
        cov_8xheitasy().b[9][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[6][1]++;
    }
    cov_8xheitasy().s[32]++;
    if (criadoPorId) {
      /* istanbul ignore next */
      cov_8xheitasy().b[10][0]++;
      cov_8xheitasy().s[33]++;
      filtros.criadoPorId = criadoPorId;
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[10][1]++;
    }
    // Calcular offset
    const offset =
    /* istanbul ignore next */
    (cov_8xheitasy().s[34]++, (pagina - 1) * limite);
    // Buscar histórico com paginação
    const [historico, total] =
    /* istanbul ignore next */
    (cov_8xheitasy().s[35]++, await Promise.all([_prisma.prisma.historicoAlteracaoAtendente.findMany({
      where: filtros,
      include: {
        usuario: {
          select: {
            nome: true,
            email: true
          }
        }
      },
      orderBy: {
        criadoEm: 'desc'
      },
      skip: offset,
      take: limite
    }), _prisma.prisma.historicoAlteracaoAtendente.count({
      where: filtros
    })]));
    // Calcular informações de paginação
    const totalPaginas =
    /* istanbul ignore next */
    (cov_8xheitasy().s[36]++, Math.ceil(total / limite));
    const temProximaPagina =
    /* istanbul ignore next */
    (cov_8xheitasy().s[37]++, pagina < totalPaginas);
    const temPaginaAnterior =
    /* istanbul ignore next */
    (cov_8xheitasy().s[38]++, pagina > 1);
    // Buscar estatísticas do histórico
    const estatisticas =
    /* istanbul ignore next */
    (cov_8xheitasy().s[39]++, await _prisma.prisma.historicoAlteracaoAtendente.groupBy({
      by: ['tipo'],
      where: {
        atendenteId
      },
      _count: {
        id: true
      }
    }));
    /* istanbul ignore next */
    cov_8xheitasy().s[40]++;
    return _server.NextResponse.json({
      atendente: {
        id: atendente.id,
        nome: atendente.usuario.nome,
        email: atendente.usuario.email
      },
      historico: historico.map(item => {
        /* istanbul ignore next */
        cov_8xheitasy().f[2]++;
        cov_8xheitasy().s[41]++;
        return {
          id: item.id,
          tipoAlteracao: item.tipo,
          descricao: item.descricao,
          dadosAnteriores: item.dadosAnteriores ?
          /* istanbul ignore next */
          (cov_8xheitasy().b[11][0]++, JSON.parse(item.dadosAnteriores)) :
          /* istanbul ignore next */
          (cov_8xheitasy().b[11][1]++, null),
          dadosNovos: item.dadosNovos ?
          /* istanbul ignore next */
          (cov_8xheitasy().b[12][0]++, JSON.parse(item.dadosNovos)) :
          /* istanbul ignore next */
          (cov_8xheitasy().b[12][1]++, null),
          alteradoPor: {
            id: item.criadoPorId,
            nome: item.usuario.nome,
            email: item.usuario.email
          },
          criadoEm: item.criadoEm
        };
      }),
      paginacao: {
        paginaAtual: pagina,
        totalPaginas,
        totalItens: total,
        itensPorPagina: limite,
        temProximaPagina,
        temPaginaAnterior
      },
      estatisticas: {
        totalAlteracoes: total,
        porTipo: estatisticas.reduce((acc, item) => {
          /* istanbul ignore next */
          cov_8xheitasy().f[3]++;
          cov_8xheitasy().s[42]++;
          acc[item.tipo] = item._count.id;
          /* istanbul ignore next */
          cov_8xheitasy().s[43]++;
          return acc;
        }, {})
      },
      filtros: {
        tipo,
        dataInicio,
        dataFim,
        criadoPorId
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_8xheitasy().s[44]++;
    console.error('Erro ao buscar histórico do atendente:', error);
    /* istanbul ignore next */
    cov_8xheitasy().s[45]++;
    if (error instanceof _zod.ZodError) {
      /* istanbul ignore next */
      cov_8xheitasy().b[13][0]++;
      cov_8xheitasy().s[46]++;
      return _server.NextResponse.json({
        erro: _atendentes.MENSAGENS_ERRO_ATENDENTES.DADOS_INVALIDOS,
        detalhes: error.errors
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_8xheitasy().b[13][1]++;
    }
    cov_8xheitasy().s[47]++;
    return _server.NextResponse.json({
      erro: _atendentes.MENSAGENS_ERRO_ATENDENTES.ERRO_INTERNO
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwiY292Xzh4aGVpdGFzeSIsImYiLCJzIiwic2Vzc2lvbiIsIl9uZXh0YXV0aCIsImdldFNlcnZlclNlc3Npb24iLCJfYXV0aCIsImF1dGhPcHRpb25zIiwidXNlciIsImIiLCJfc2VydmVyIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsImVycm8iLCJzdGF0dXMiLCJpbmNsdWRlcyIsInVzZXJUeXBlIiwiX2F0ZW5kZW50ZXMiLCJNRU5TQUdFTlNfRVJST19BVEVOREVOVEVTIiwiU0VNX1BFUk1JU1NBTyIsImF0ZW5kZW50ZUlkIiwiaWRBdGVuZGVudGVTY2hlbWEiLCJwYXJzZSIsImlkIiwiYXRlbmRlbnRlIiwiX3ByaXNtYSIsInByaXNtYSIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsInVzdWFyaW8iLCJub21lIiwiZW1haWwiLCJBVEVOREVOVEVfTkFPX0VOQ09OVFJBRE8iLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJwYXJhbWV0cm9zQ29uc3VsdGEiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJwYWdpbmEiLCJsaW1pdGUiLCJ0aXBvIiwiZGF0YUluaWNpbyIsImRhdGFGaW0iLCJjcmlhZG9Qb3JJZCIsIl9oaXN0b3JpY29hdGVuZGVudGVzIiwiY29uc3VsdGFIaXN0b3JpY29TY2hlbWEiLCJmaWx0cm9zIiwiY3JpYWRvRW0iLCJndGUiLCJEYXRlIiwibHRlIiwib2Zmc2V0IiwiaGlzdG9yaWNvIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwiaGlzdG9yaWNvQWx0ZXJhY2FvQXRlbmRlbnRlIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwib3JkZXJCeSIsInNraXAiLCJ0YWtlIiwiY291bnQiLCJ0b3RhbFBhZ2luYXMiLCJNYXRoIiwiY2VpbCIsInRlbVByb3hpbWFQYWdpbmEiLCJ0ZW1QYWdpbmFBbnRlcmlvciIsImVzdGF0aXN0aWNhcyIsImdyb3VwQnkiLCJieSIsIl9jb3VudCIsIm1hcCIsIml0ZW0iLCJ0aXBvQWx0ZXJhY2FvIiwiZGVzY3JpY2FvIiwiZGFkb3NBbnRlcmlvcmVzIiwiSlNPTiIsImRhZG9zTm92b3MiLCJhbHRlcmFkb1BvciIsInBhZ2luYWNhbyIsInBhZ2luYUF0dWFsIiwidG90YWxJdGVucyIsIml0ZW5zUG9yUGFnaW5hIiwidG90YWxBbHRlcmFjb2VzIiwicG9yVGlwbyIsInJlZHVjZSIsImFjYyIsImVycm9yIiwiY29uc29sZSIsIl96b2QiLCJab2RFcnJvciIsIkRBRE9TX0lOVkFMSURPUyIsImRldGFsaGVzIiwiZXJyb3JzIiwiRVJST19JTlRFUk5PIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOZXJldSBKclxcRG9jdW1lbnRzXFxEZXZcXG5ld1xcc3JjXFxhcHBcXGFwaVxcYXRlbmRlbnRlc1xcW2lkXVxcaGlzdG9yaWNvXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHtcbiAgaWRBdGVuZGVudGVTY2hlbWEsXG4gIE1FTlNBR0VOU19FUlJPX0FURU5ERU5URVMsXG59IGZyb20gJ0AvbGliL3ZhbGlkYXRpb25zL2F0ZW5kZW50ZXMnO1xuaW1wb3J0IHsgY29uc3VsdGFIaXN0b3JpY29TY2hlbWEgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9ucy9oaXN0b3JpY28tYXRlbmRlbnRlcyc7XG5pbXBvcnQgeyBab2RFcnJvciB9IGZyb20gJ3pvZCc7XG5cbmludGVyZmFjZSBSb3V0ZVBhcmFtcyB7XG4gIHBhcmFtczoge1xuICAgIGlkOiBzdHJpbmc7XG4gIH07XG59XG5cbi8qKlxuICogR0VUIC9hcGkvYXRlbmRlbnRlcy9baWRdL2hpc3Rvcmljb1xuICogTGlzdGEgbyBoaXN0w7NyaWNvIGRlIGFsdGVyYcOnw7VlcyBkZSB1bSBhdGVuZGVudGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogUm91dGVQYXJhbXMpIHtcbiAgdHJ5IHtcbiAgICAvLyBWZXJpZmljYXIgYXV0ZW50aWNhw6fDo29cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvOiAnTsOjbyBhdXRvcml6YWRvJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBwZXJtaXNzw7VlcyAoYXBlbmFzIEFETUlOIGUgR0VSRU5URSBwb2RlbSB2ZXIgaGlzdMOzcmljbylcbiAgICBpZiAoIVsnQURNSU4nLCAnR0VSRU5URSddLmluY2x1ZGVzKHNlc3Npb24udXNlci51c2VyVHlwZSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvOiBNRU5TQUdFTlNfRVJST19BVEVOREVOVEVTLlNFTV9QRVJNSVNTQU8gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgSURcbiAgICBjb25zdCBhdGVuZGVudGVJZCA9IGlkQXRlbmRlbnRlU2NoZW1hLnBhcnNlKHBhcmFtcy5pZCk7XG5cbiAgICAvLyBWZXJpZmljYXIgc2UgbyBhdGVuZGVudGUgZXhpc3RlXG4gICAgY29uc3QgYXRlbmRlbnRlID0gYXdhaXQgcHJpc21hLmF0ZW5kZW50ZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBhdGVuZGVudGVJZCB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICB1c3VhcmlvOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBub21lOiB0cnVlLFxuICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWF0ZW5kZW50ZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm86IE1FTlNBR0VOU19FUlJPX0FURU5ERU5URVMuQVRFTkRFTlRFX05BT19FTkNPTlRSQURPIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWlyIHBhcsOibWV0cm9zIGRlIGNvbnN1bHRhXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHBhcmFtZXRyb3NDb25zdWx0YSA9IE9iamVjdC5mcm9tRW50cmllcyhzZWFyY2hQYXJhbXMuZW50cmllcygpKTtcblxuICAgIC8vIFZhbGlkYXIgcGFyw6JtZXRyb3NcbiAgICBjb25zdCB7XG4gICAgICBwYWdpbmEgPSAxLFxuICAgICAgbGltaXRlID0gMjAsXG4gICAgICB0aXBvLFxuICAgICAgZGF0YUluaWNpbyxcbiAgICAgIGRhdGFGaW0sXG4gICAgICBjcmlhZG9Qb3JJZCxcbiAgICB9ID0gY29uc3VsdGFIaXN0b3JpY29TY2hlbWEucGFyc2UocGFyYW1ldHJvc0NvbnN1bHRhKTtcblxuICAgIC8vIENvbnN0cnVpciBmaWx0cm9zXG4gICAgY29uc3QgZmlsdHJvczogYW55ID0ge1xuICAgICAgYXRlbmRlbnRlSWQsXG4gICAgfTtcblxuICAgIGlmICh0aXBvKSB7XG4gICAgICBmaWx0cm9zLnRpcG8gPSB0aXBvO1xuICAgIH1cblxuICAgIGlmIChkYXRhSW5pY2lvIHx8IGRhdGFGaW0pIHtcbiAgICAgIGZpbHRyb3MuY3JpYWRvRW0gPSB7fTtcbiAgICAgIGlmIChkYXRhSW5pY2lvKSB7XG4gICAgICAgIGZpbHRyb3MuY3JpYWRvRW0uZ3RlID0gbmV3IERhdGUoZGF0YUluaWNpbyk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YUZpbSkge1xuICAgICAgICBmaWx0cm9zLmNyaWFkb0VtLmx0ZSA9IG5ldyBEYXRlKGRhdGFGaW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjcmlhZG9Qb3JJZCkge1xuICAgICAgZmlsdHJvcy5jcmlhZG9Qb3JJZCA9IGNyaWFkb1BvcklkO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGFyIG9mZnNldFxuICAgIGNvbnN0IG9mZnNldCA9IChwYWdpbmEgLSAxKSAqIGxpbWl0ZTtcblxuICAgIC8vIEJ1c2NhciBoaXN0w7NyaWNvIGNvbSBwYWdpbmHDp8Ojb1xuICAgIGNvbnN0IFtoaXN0b3JpY28sIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHByaXNtYS5oaXN0b3JpY29BbHRlcmFjYW9BdGVuZGVudGUuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogZmlsdHJvcyxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzdWFyaW86IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBub21lOiB0cnVlLFxuICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyaWFkb0VtOiAnZGVzYycsXG4gICAgICAgIH0sXG4gICAgICAgIHNraXA6IG9mZnNldCxcbiAgICAgICAgdGFrZTogbGltaXRlLFxuICAgICAgfSksXG4gICAgICBwcmlzbWEuaGlzdG9yaWNvQWx0ZXJhY2FvQXRlbmRlbnRlLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IGZpbHRyb3MsXG4gICAgICB9KSxcbiAgICBdKTtcblxuICAgIC8vIENhbGN1bGFyIGluZm9ybWHDp8O1ZXMgZGUgcGFnaW5hw6fDo29cbiAgICBjb25zdCB0b3RhbFBhZ2luYXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdGUpO1xuICAgIGNvbnN0IHRlbVByb3hpbWFQYWdpbmEgPSBwYWdpbmEgPCB0b3RhbFBhZ2luYXM7XG4gICAgY29uc3QgdGVtUGFnaW5hQW50ZXJpb3IgPSBwYWdpbmEgPiAxO1xuXG4gICAgLy8gQnVzY2FyIGVzdGF0w61zdGljYXMgZG8gaGlzdMOzcmljb1xuICAgIGNvbnN0IGVzdGF0aXN0aWNhcyA9IGF3YWl0IHByaXNtYS5oaXN0b3JpY29BbHRlcmFjYW9BdGVuZGVudGUuZ3JvdXBCeSh7XG4gICAgICBieTogWyd0aXBvJ10sXG4gICAgICB3aGVyZTogeyBhdGVuZGVudGVJZCB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBhdGVuZGVudGU6IHtcbiAgICAgICAgaWQ6IGF0ZW5kZW50ZS5pZCxcbiAgICAgICAgbm9tZTogYXRlbmRlbnRlLnVzdWFyaW8ubm9tZSxcbiAgICAgICAgZW1haWw6IGF0ZW5kZW50ZS51c3VhcmlvLmVtYWlsLFxuICAgICAgfSxcbiAgICAgIGhpc3RvcmljbzogaGlzdG9yaWNvLm1hcChpdGVtID0+ICh7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICB0aXBvQWx0ZXJhY2FvOiBpdGVtLnRpcG8sXG4gICAgICAgIGRlc2NyaWNhbzogaXRlbS5kZXNjcmljYW8sXG4gICAgICAgIGRhZG9zQW50ZXJpb3JlczogaXRlbS5kYWRvc0FudGVyaW9yZXNcbiAgICAgICAgICA/IEpTT04ucGFyc2UoaXRlbS5kYWRvc0FudGVyaW9yZXMpXG4gICAgICAgICAgOiBudWxsLFxuICAgICAgICBkYWRvc05vdm9zOiBpdGVtLmRhZG9zTm92b3MgPyBKU09OLnBhcnNlKGl0ZW0uZGFkb3NOb3ZvcykgOiBudWxsLFxuICAgICAgICBhbHRlcmFkb1Bvcjoge1xuICAgICAgICAgIGlkOiBpdGVtLmNyaWFkb1BvcklkLFxuICAgICAgICAgIG5vbWU6IGl0ZW0udXN1YXJpby5ub21lLFxuICAgICAgICAgIGVtYWlsOiBpdGVtLnVzdWFyaW8uZW1haWwsXG4gICAgICAgIH0sXG4gICAgICAgIGNyaWFkb0VtOiBpdGVtLmNyaWFkb0VtLFxuICAgICAgfSkpLFxuICAgICAgcGFnaW5hY2FvOiB7XG4gICAgICAgIHBhZ2luYUF0dWFsOiBwYWdpbmEsXG4gICAgICAgIHRvdGFsUGFnaW5hcyxcbiAgICAgICAgdG90YWxJdGVuczogdG90YWwsXG4gICAgICAgIGl0ZW5zUG9yUGFnaW5hOiBsaW1pdGUsXG4gICAgICAgIHRlbVByb3hpbWFQYWdpbmEsXG4gICAgICAgIHRlbVBhZ2luYUFudGVyaW9yLFxuICAgICAgfSxcbiAgICAgIGVzdGF0aXN0aWNhczoge1xuICAgICAgICB0b3RhbEFsdGVyYWNvZXM6IHRvdGFsLFxuICAgICAgICBwb3JUaXBvOiBlc3RhdGlzdGljYXMucmVkdWNlKFxuICAgICAgICAgIChhY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGFjY1tpdGVtLnRpcG9dID0gaXRlbS5fY291bnQuaWQ7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sXG4gICAgICAgICAge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgICAgICApLFxuICAgICAgfSxcbiAgICAgIGZpbHRyb3M6IHtcbiAgICAgICAgdGlwbyxcbiAgICAgICAgZGF0YUluaWNpbyxcbiAgICAgICAgZGF0YUZpbSxcbiAgICAgICAgY3JpYWRvUG9ySWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gYnVzY2FyIGhpc3TDs3JpY28gZG8gYXRlbmRlbnRlOicsIGVycm9yKTtcblxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFpvZEVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvOiBNRU5TQUdFTlNfRVJST19BVEVOREVOVEVTLkRBRE9TX0lOVkFMSURPUyxcbiAgICAgICAgICBkZXRhbGhlczogZXJyb3IuZXJyb3JzLFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvOiBNRU5TQUdFTlNfRVJST19BVEVOREVOVEVTLkVSUk9fSU5URVJOTyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytCQXNCc0I7Ozs7OztXQUFBQSxHQUFBOzs7OztpQ0F0Qm9COzs7aUNBQ1Q7OztpQ0FDTDs7O2lDQUNMOzs7aUNBS2hCOzs7aUNBQ2lDOzs7aUNBQ2Y7QUFZbEIsZUFBZUEsSUFBSUMsT0FBb0IsRUFBRTtFQUFFQztBQUFNLENBQWU7RUFBQTtFQUFBQyxhQUFBLEdBQUFDLENBQUE7RUFBQUQsYUFBQSxHQUFBRSxDQUFBO0VBQ3JFLElBQUk7SUFDRjtJQUNBLE1BQU1DLE9BQUE7SUFBQTtJQUFBLENBQUFILGFBQUEsR0FBQUUsQ0FBQSxRQUFVLE1BQU0sSUFBQUUsU0FBQSxDQUFBQyxnQkFBZ0IsRUFBQ0MsS0FBQSxDQUFBQyxXQUFXO0lBQUE7SUFBQVAsYUFBQSxHQUFBRSxDQUFBO0lBQ2xELElBQUksQ0FBQ0MsT0FBQSxFQUFTSyxJQUFBLEVBQU07TUFBQTtNQUFBUixhQUFBLEdBQUFTLENBQUE7TUFBQVQsYUFBQSxHQUFBRSxDQUFBO01BQ2xCLE9BQU9RLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQUM7UUFBRUMsSUFBQSxFQUFNO01BQWlCLEdBQUc7UUFBRUMsTUFBQSxFQUFRO01BQUk7SUFDckU7SUFBQTtJQUFBO01BQUFkLGFBQUEsR0FBQVMsQ0FBQTtJQUFBO0lBRUE7SUFBQVQsYUFBQSxHQUFBRSxDQUFBO0lBQ0EsSUFBSSxDQUFDLENBQUMsU0FBUyxVQUFVLENBQUNhLFFBQVEsQ0FBQ1osT0FBQSxDQUFRSyxJQUFJLENBQUNRLFFBQVEsR0FBRztNQUFBO01BQUFoQixhQUFBLEdBQUFTLENBQUE7TUFBQVQsYUFBQSxHQUFBRSxDQUFBO01BQ3pELE9BQU9RLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO1FBQUVDLElBQUEsRUFBTUksV0FBQSxDQUFBQyx5QkFBeUIsQ0FBQ0M7TUFBYyxHQUNoRDtRQUFFTCxNQUFBLEVBQVE7TUFBSTtJQUVsQjtJQUFBO0lBQUE7TUFBQWQsYUFBQSxHQUFBUyxDQUFBO0lBQUE7SUFFQTtJQUNBLE1BQU1XLFdBQUE7SUFBQTtJQUFBLENBQUFwQixhQUFBLEdBQUFFLENBQUEsUUFBY2UsV0FBQSxDQUFBSSxpQkFBaUIsQ0FBQ0MsS0FBSyxDQUFDdkIsTUFBQSxDQUFPd0IsRUFBRTtJQUVyRDtJQUNBLE1BQU1DLFNBQUE7SUFBQTtJQUFBLENBQUF4QixhQUFBLEdBQUFFLENBQUEsUUFBWSxNQUFNdUIsT0FBQSxDQUFBQyxNQUFNLENBQUNGLFNBQVMsQ0FBQ0csVUFBVSxDQUFDO01BQ2xEQyxLQUFBLEVBQU87UUFBRUwsRUFBQSxFQUFJSDtNQUFZO01BQ3pCUyxNQUFBLEVBQVE7UUFDTk4sRUFBQSxFQUFJO1FBQ0pPLE9BQUEsRUFBUztVQUNQRCxNQUFBLEVBQVE7WUFDTkUsSUFBQSxFQUFNO1lBQ05DLEtBQUEsRUFBTztVQUNUO1FBQ0Y7TUFDRjtJQUNGO0lBQUE7SUFBQWhDLGFBQUEsR0FBQUUsQ0FBQTtJQUVBLElBQUksQ0FBQ3NCLFNBQUEsRUFBVztNQUFBO01BQUF4QixhQUFBLEdBQUFTLENBQUE7TUFBQVQsYUFBQSxHQUFBRSxDQUFBO01BQ2QsT0FBT1EsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRUMsSUFBQSxFQUFNSSxXQUFBLENBQUFDLHlCQUF5QixDQUFDZTtNQUF5QixHQUMzRDtRQUFFbkIsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFkLGFBQUEsR0FBQVMsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNO01BQUV5QjtJQUFZLENBQUU7SUFBQTtJQUFBLENBQUFsQyxhQUFBLEdBQUFFLENBQUEsUUFBRyxJQUFJaUMsR0FBQSxDQUFJckMsT0FBQSxDQUFRc0MsR0FBRztJQUM1QyxNQUFNQyxrQkFBQTtJQUFBO0lBQUEsQ0FBQXJDLGFBQUEsR0FBQUUsQ0FBQSxRQUFxQm9DLE1BQUEsQ0FBT0MsV0FBVyxDQUFDTCxZQUFBLENBQWFNLE9BQU87SUFFbEU7SUFDQSxNQUFNO01BQ0pDLE1BQUE7TUFBQTtNQUFBLENBQUF6QyxhQUFBLEdBQUFTLENBQUEsVUFBUyxDQUFDO01BQ1ZpQyxNQUFBO01BQUE7TUFBQSxDQUFBMUMsYUFBQSxHQUFBUyxDQUFBLFVBQVMsRUFBRTtNQUNYa0MsSUFBSTtNQUNKQyxVQUFVO01BQ1ZDLE9BQU87TUFDUEM7SUFBVyxDQUNaO0lBQUE7SUFBQSxDQUFBOUMsYUFBQSxHQUFBRSxDQUFBLFFBQUc2QyxvQkFBQSxDQUFBQyx1QkFBdUIsQ0FBQzFCLEtBQUssQ0FBQ2Usa0JBQUE7SUFFbEM7SUFDQSxNQUFNWSxPQUFBO0lBQUE7SUFBQSxDQUFBakQsYUFBQSxHQUFBRSxDQUFBLFFBQWU7TUFDbkJrQjtJQUNGO0lBQUE7SUFBQXBCLGFBQUEsR0FBQUUsQ0FBQTtJQUVBLElBQUl5QyxJQUFBLEVBQU07TUFBQTtNQUFBM0MsYUFBQSxHQUFBUyxDQUFBO01BQUFULGFBQUEsR0FBQUUsQ0FBQTtNQUNSK0MsT0FBQSxDQUFRTixJQUFJLEdBQUdBLElBQUE7SUFDakI7SUFBQTtJQUFBO01BQUEzQyxhQUFBLEdBQUFTLENBQUE7SUFBQTtJQUFBVCxhQUFBLEdBQUFFLENBQUE7SUFFQTtJQUFJO0lBQUEsQ0FBQUYsYUFBQSxHQUFBUyxDQUFBLFVBQUFtQyxVQUFBO0lBQUE7SUFBQSxDQUFBNUMsYUFBQSxHQUFBUyxDQUFBLFVBQWNvQyxPQUFBLEdBQVM7TUFBQTtNQUFBN0MsYUFBQSxHQUFBUyxDQUFBO01BQUFULGFBQUEsR0FBQUUsQ0FBQTtNQUN6QitDLE9BQUEsQ0FBUUMsUUFBUSxHQUFHLENBQUM7TUFBQTtNQUFBbEQsYUFBQSxHQUFBRSxDQUFBO01BQ3BCLElBQUkwQyxVQUFBLEVBQVk7UUFBQTtRQUFBNUMsYUFBQSxHQUFBUyxDQUFBO1FBQUFULGFBQUEsR0FBQUUsQ0FBQTtRQUNkK0MsT0FBQSxDQUFRQyxRQUFRLENBQUNDLEdBQUcsR0FBRyxJQUFJQyxJQUFBLENBQUtSLFVBQUE7TUFDbEM7TUFBQTtNQUFBO1FBQUE1QyxhQUFBLEdBQUFTLENBQUE7TUFBQTtNQUFBVCxhQUFBLEdBQUFFLENBQUE7TUFDQSxJQUFJMkMsT0FBQSxFQUFTO1FBQUE7UUFBQTdDLGFBQUEsR0FBQVMsQ0FBQTtRQUFBVCxhQUFBLEdBQUFFLENBQUE7UUFDWCtDLE9BQUEsQ0FBUUMsUUFBUSxDQUFDRyxHQUFHLEdBQUcsSUFBSUQsSUFBQSxDQUFLUCxPQUFBO01BQ2xDO01BQUE7TUFBQTtRQUFBN0MsYUFBQSxHQUFBUyxDQUFBO01BQUE7SUFDRjtJQUFBO0lBQUE7TUFBQVQsYUFBQSxHQUFBUyxDQUFBO0lBQUE7SUFBQVQsYUFBQSxHQUFBRSxDQUFBO0lBRUEsSUFBSTRDLFdBQUEsRUFBYTtNQUFBO01BQUE5QyxhQUFBLEdBQUFTLENBQUE7TUFBQVQsYUFBQSxHQUFBRSxDQUFBO01BQ2YrQyxPQUFBLENBQVFILFdBQVcsR0FBR0EsV0FBQTtJQUN4QjtJQUFBO0lBQUE7TUFBQTlDLGFBQUEsR0FBQVMsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNNkMsTUFBQTtJQUFBO0lBQUEsQ0FBQXRELGFBQUEsR0FBQUUsQ0FBQSxRQUFTLENBQUN1QyxNQUFBLEdBQVMsS0FBS0MsTUFBQTtJQUU5QjtJQUNBLE1BQU0sQ0FBQ2EsU0FBQSxFQUFXQyxLQUFBLENBQU07SUFBQTtJQUFBLENBQUF4RCxhQUFBLEdBQUFFLENBQUEsUUFBRyxNQUFNdUQsT0FBQSxDQUFRQyxHQUFHLENBQUMsQ0FDM0NqQyxPQUFBLENBQUFDLE1BQU0sQ0FBQ2lDLDJCQUEyQixDQUFDQyxRQUFRLENBQUM7TUFDMUNoQyxLQUFBLEVBQU9xQixPQUFBO01BQ1BZLE9BQUEsRUFBUztRQUNQL0IsT0FBQSxFQUFTO1VBQ1BELE1BQUEsRUFBUTtZQUNORSxJQUFBLEVBQU07WUFDTkMsS0FBQSxFQUFPO1VBQ1Q7UUFDRjtNQUNGO01BQ0E4QixPQUFBLEVBQVM7UUFDUFosUUFBQSxFQUFVO01BQ1o7TUFDQWEsSUFBQSxFQUFNVCxNQUFBO01BQ05VLElBQUEsRUFBTXRCO0lBQ1IsSUFDQWpCLE9BQUEsQ0FBQUMsTUFBTSxDQUFDaUMsMkJBQTJCLENBQUNNLEtBQUssQ0FBQztNQUN2Q3JDLEtBQUEsRUFBT3FCO0lBQ1QsR0FDRDtJQUVEO0lBQ0EsTUFBTWlCLFlBQUE7SUFBQTtJQUFBLENBQUFsRSxhQUFBLEdBQUFFLENBQUEsUUFBZWlFLElBQUEsQ0FBS0MsSUFBSSxDQUFDWixLQUFBLEdBQVFkLE1BQUE7SUFDdkMsTUFBTTJCLGdCQUFBO0lBQUE7SUFBQSxDQUFBckUsYUFBQSxHQUFBRSxDQUFBLFFBQW1CdUMsTUFBQSxHQUFTeUIsWUFBQTtJQUNsQyxNQUFNSSxpQkFBQTtJQUFBO0lBQUEsQ0FBQXRFLGFBQUEsR0FBQUUsQ0FBQSxRQUFvQnVDLE1BQUEsR0FBUztJQUVuQztJQUNBLE1BQU04QixZQUFBO0lBQUE7SUFBQSxDQUFBdkUsYUFBQSxHQUFBRSxDQUFBLFFBQWUsTUFBTXVCLE9BQUEsQ0FBQUMsTUFBTSxDQUFDaUMsMkJBQTJCLENBQUNhLE9BQU8sQ0FBQztNQUNwRUMsRUFBQSxFQUFJLENBQUMsT0FBTztNQUNaN0MsS0FBQSxFQUFPO1FBQUVSO01BQVk7TUFDckJzRCxNQUFBLEVBQVE7UUFDTm5ELEVBQUEsRUFBSTtNQUNOO0lBQ0Y7SUFBQTtJQUFBdkIsYUFBQSxHQUFBRSxDQUFBO0lBRUEsT0FBT1EsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FBQztNQUN2QlksU0FBQSxFQUFXO1FBQ1RELEVBQUEsRUFBSUMsU0FBQSxDQUFVRCxFQUFFO1FBQ2hCUSxJQUFBLEVBQU1QLFNBQUEsQ0FBVU0sT0FBTyxDQUFDQyxJQUFJO1FBQzVCQyxLQUFBLEVBQU9SLFNBQUEsQ0FBVU0sT0FBTyxDQUFDRTtNQUMzQjtNQUNBdUIsU0FBQSxFQUFXQSxTQUFBLENBQVVvQixHQUFHLENBQUNDLElBQUEsSUFBUztRQUFBO1FBQUE1RSxhQUFBLEdBQUFDLENBQUE7UUFBQUQsYUFBQSxHQUFBRSxDQUFBO1FBQUE7VUFDaENxQixFQUFBLEVBQUlxRCxJQUFBLENBQUtyRCxFQUFFO1VBQ1hzRCxhQUFBLEVBQWVELElBQUEsQ0FBS2pDLElBQUk7VUFDeEJtQyxTQUFBLEVBQVdGLElBQUEsQ0FBS0UsU0FBUztVQUN6QkMsZUFBQSxFQUFpQkgsSUFBQSxDQUFLRyxlQUFlO1VBQUE7VUFBQSxDQUFBL0UsYUFBQSxHQUFBUyxDQUFBLFdBQ2pDdUUsSUFBQSxDQUFLMUQsS0FBSyxDQUFDc0QsSUFBQSxDQUFLRyxlQUFlO1VBQUE7VUFBQSxDQUFBL0UsYUFBQSxHQUFBUyxDQUFBLFdBQy9CO1VBQ0p3RSxVQUFBLEVBQVlMLElBQUEsQ0FBS0ssVUFBVTtVQUFBO1VBQUEsQ0FBQWpGLGFBQUEsR0FBQVMsQ0FBQSxXQUFHdUUsSUFBQSxDQUFLMUQsS0FBSyxDQUFDc0QsSUFBQSxDQUFLSyxVQUFVO1VBQUE7VUFBQSxDQUFBakYsYUFBQSxHQUFBUyxDQUFBLFdBQUk7VUFDNUR5RSxXQUFBLEVBQWE7WUFDWDNELEVBQUEsRUFBSXFELElBQUEsQ0FBSzlCLFdBQVc7WUFDcEJmLElBQUEsRUFBTTZDLElBQUEsQ0FBSzlDLE9BQU8sQ0FBQ0MsSUFBSTtZQUN2QkMsS0FBQSxFQUFPNEMsSUFBQSxDQUFLOUMsT0FBTyxDQUFDRTtVQUN0QjtVQUNBa0IsUUFBQSxFQUFVMEIsSUFBQSxDQUFLMUI7UUFDakI7TUFBQTtNQUNBaUMsU0FBQSxFQUFXO1FBQ1RDLFdBQUEsRUFBYTNDLE1BQUE7UUFDYnlCLFlBQUE7UUFDQW1CLFVBQUEsRUFBWTdCLEtBQUE7UUFDWjhCLGNBQUEsRUFBZ0I1QyxNQUFBO1FBQ2hCMkIsZ0JBQUE7UUFDQUM7TUFDRjtNQUNBQyxZQUFBLEVBQWM7UUFDWmdCLGVBQUEsRUFBaUIvQixLQUFBO1FBQ2pCZ0MsT0FBQSxFQUFTakIsWUFBQSxDQUFha0IsTUFBTSxDQUMxQixDQUFDQyxHQUFBLEVBQUtkLElBQUE7VUFBQTtVQUFBNUUsYUFBQSxHQUFBQyxDQUFBO1VBQUFELGFBQUEsR0FBQUUsQ0FBQTtVQUNKd0YsR0FBRyxDQUFDZCxJQUFBLENBQUtqQyxJQUFJLENBQUMsR0FBR2lDLElBQUEsQ0FBS0YsTUFBTSxDQUFDbkQsRUFBRTtVQUFBO1VBQUF2QixhQUFBLEdBQUFFLENBQUE7VUFDL0IsT0FBT3dGLEdBQUE7UUFDVCxHQUNBLENBQUM7TUFFTDtNQUNBekMsT0FBQSxFQUFTO1FBQ1BOLElBQUE7UUFDQUMsVUFBQTtRQUNBQyxPQUFBO1FBQ0FDO01BQ0Y7SUFDRjtFQUNGLEVBQUUsT0FBTzZDLEtBQUEsRUFBTztJQUFBO0lBQUEzRixhQUFBLEdBQUFFLENBQUE7SUFDZDBGLE9BQUEsQ0FBUUQsS0FBSyxDQUFDLDBDQUEwQ0EsS0FBQTtJQUFBO0lBQUEzRixhQUFBLEdBQUFFLENBQUE7SUFFeEQsSUFBSXlGLEtBQUEsWUFBaUJFLElBQUEsQ0FBQUMsUUFBUSxFQUFFO01BQUE7TUFBQTlGLGFBQUEsR0FBQVMsQ0FBQTtNQUFBVCxhQUFBLEdBQUFFLENBQUE7TUFDN0IsT0FBT1EsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFDRUMsSUFBQSxFQUFNSSxXQUFBLENBQUFDLHlCQUF5QixDQUFDNkUsZUFBZTtRQUMvQ0MsUUFBQSxFQUFVTCxLQUFBLENBQU1NO01BQ2xCLEdBQ0E7UUFBRW5GLE1BQUEsRUFBUTtNQUFJO0lBRWxCO0lBQUE7SUFBQTtNQUFBZCxhQUFBLEdBQUFTLENBQUE7SUFBQTtJQUFBVCxhQUFBLEdBQUFFLENBQUE7SUFFQSxPQUFPUSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtNQUFFQyxJQUFBLEVBQU1JLFdBQUEsQ0FBQUMseUJBQXlCLENBQUNnRjtJQUFhLEdBQy9DO01BQUVwRixNQUFBLEVBQVE7SUFBSTtFQUVsQjtBQUNGIiwiaWdub3JlTGlzdCI6W119