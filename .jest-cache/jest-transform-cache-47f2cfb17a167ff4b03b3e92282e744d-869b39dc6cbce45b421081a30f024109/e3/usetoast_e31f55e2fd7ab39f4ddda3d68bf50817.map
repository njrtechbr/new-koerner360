{"version":3,"sources":["C:\\Users\\Nereu Jr\\Documents\\Dev\\new\\src\\hooks\\use-toast.ts"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from '@/components/ui/toast';\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  action?: ToastActionElement;\n};\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST'];\n      toast: ToasterToast;\n    }\n  | {\n      type: ActionType['UPDATE_TOAST'];\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: ActionType['DISMISS_TOAST'];\n      toastId?: ToasterToast['id'];\n    }\n  | {\n      type: ActionType['REMOVE_TOAST'];\n      toastId?: ToasterToast['id'];\n    };\n\ninterface State {\n  toasts: ToasterToast[];\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      };\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n  }\n};\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, 'id'>;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss();\n      },\n    },\n  });\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  };\n}\n\nexport { useToast, toast };"],"names":["reducer","toast","useToast","TOAST_LIMIT","TOAST_REMOVE_DELAY","actionTypes","ADD_TOAST","UPDATE_TOAST","DISMISS_TOAST","REMOVE_TOAST","count","genId","Number","MAX_SAFE_INTEGER","toString","toastTimeouts","Map","addToRemoveQueue","toastId","has","timeout","setTimeout","delete","dispatch","type","set","state","action","toasts","slice","map","t","id","forEach","undefined","open","filter","listeners","memoryState","listener","props","update","dismiss","onOpenChange","setState","React","useState","useEffect","push","index","indexOf","splice"],"mappings":"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"}