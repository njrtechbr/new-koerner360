f6501ccdaff031870f2e91d4388bd245
"use strict";
jest.mock('@/hooks/use-toast', ()=>({
        useToast: ()=>({
                toast: mockToast
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _globals = require("@jest/globals");
const _uselembretes = require("../use-lembretes");
// Mock do hook useToast
const mockToast = jest.fn();
// Mock do fetch global
const mockFetch = jest.fn();
global.fetch = mockFetch;
// Mock dos dados de teste
const mockResultadoLembretes = {
    dados: [
        {
            id: '1',
            avaliacaoId: '1',
            usuarioId: '1',
            tipo: 'lembrete',
            dataEnvio: new Date().toISOString(),
            enviado: false,
            tentativas: 0,
            ultimaTentativa: null,
            erro: null,
            criadoEm: new Date().toISOString(),
            usuario: {
                id: '1',
                nome: 'João Silva',
                email: 'joao@teste.com'
            },
            avaliacao: {
                id: '1',
                prazo: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                status: 'pendente',
                avaliado: {
                    id: '1',
                    nome: 'João Silva',
                    email: 'joao@teste.com'
                },
                avaliador: {
                    id: '2',
                    nome: 'Maria Santos',
                    email: 'maria@teste.com'
                },
                periodo: {
                    id: '1',
                    nome: 'Q1 2024',
                    dataInicio: '2024-01-01',
                    dataFim: '2024-03-31'
                }
            }
        }
    ],
    paginacao: {
        paginaAtual: 1,
        totalPaginas: 1,
        totalItens: 1,
        itensPorPagina: 50,
        temProximaPagina: false,
        temPaginaAnterior: false
    }
};
(0, _globals.describe)('useLembretes', ()=>{
    (0, _globals.beforeEach)(()=>{
        jest.clearAllMocks();
        // Mock inicial para useEffect
        mockFetch.mockResolvedValue({
            ok: true,
            json: async ()=>mockResultadoLembretes
        });
    });
    (0, _globals.afterEach)(()=>{
        jest.resetAllMocks();
    });
    (0, _globals.describe)('inicialização', ()=>{
        (0, _globals.it)('deve carregar lembretes na inicialização', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar o useEffect executar
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            (0, _globals.expect)(result.current.lembretes).toEqual(mockResultadoLembretes.dados);
            (0, _globals.expect)(result.current.erro).toBeNull();
            (0, _globals.expect)(mockFetch).toHaveBeenCalled();
        });
    });
    (0, _globals.describe)('buscarLembretes', ()=>{
        (0, _globals.it)('deve buscar lembretes com sucesso', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            // Fazer nova busca
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            await (0, _react.act)(async ()=>{
                await result.current.buscarLembretes();
            });
            (0, _globals.expect)(result.current.lembretes).toEqual(mockResultadoLembretes.dados);
            (0, _globals.expect)(result.current.carregando).toBe(false);
            (0, _globals.expect)(result.current.erro).toBeNull();
        });
        (0, _globals.it)('deve lidar com erro na busca', async ()=>{
            const errorMessage = 'Erro ao buscar lembretes';
            // Forçar todas as chamadas a retornarem erro neste teste (evita corrida com StrictMode)
            mockFetch.mockImplementation(()=>Promise.resolve({
                    ok: false,
                    json: async ()=>({
                            erro: errorMessage
                        })
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguarda estado ser atualizado pelo fluxo de erro
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
                (0, _globals.expect)(result.current.erro).toBe(errorMessage);
            }, {
                timeout: 15000
            });
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Erro ao buscar lembretes',
                description: errorMessage,
                variant: 'destructive'
            });
            // Não afirmar contagem exata devido a possíveis chamadas duplicadas em StrictMode
            (0, _globals.expect)(mockFetch).toHaveBeenCalled();
        });
    });
    (0, _globals.describe)('buscarLembrete', ()=>{
        (0, _globals.it)('deve buscar lembrete específico com sucesso', async ()=>{
            // Configurar mocks separadamente para evitar interferência e cobrir chamadas duplicadas
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            // Mock para buscarLembrete específico
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        dados: mockResultadoLembretes.dados[0]
                    })
            });
            let lembrete;
            await (0, _react.act)(async ()=>{
                lembrete = await result.current.buscarLembrete('1');
            });
            // Verifica se retorna o objeto direto
            (0, _globals.expect)(lembrete).toEqual(mockResultadoLembretes.dados[0]);
            (0, _globals.expect)(mockFetch).toHaveBeenCalledWith('/api/lembretes/1');
        });
        (0, _globals.it)('deve lidar com erro ao buscar lembrete específico', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            const errorMessage = 'Lembrete não encontrado';
            mockFetch.mockRejectedValueOnce(new Error(errorMessage));
            let lembrete;
            await (0, _react.act)(async ()=>{
                lembrete = await result.current.buscarLembrete('999');
            });
            (0, _globals.expect)(lembrete).toBeNull();
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Erro ao buscar lembrete',
                description: errorMessage,
                variant: 'destructive'
            });
        });
    });
    (0, _globals.describe)('criarLembrete', ()=>{
        (0, _globals.it)('deve criar lembrete com sucesso', async ()=>{
            const novoLembrete = {
                avaliacaoId: '1',
                usuarioId: '1',
                tipo: 'lembrete',
                dataEnvio: new Date().toISOString()
            };
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        dados: {
                            ...novoLembrete,
                            id: '2'
                        }
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.criarLembrete(novoLembrete);
            });
            (0, _globals.expect)(sucesso).toBe(true);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Lembrete criado',
                description: 'Lembrete criado com sucesso'
            });
        });
        (0, _globals.it)('deve lidar com erro ao criar lembrete', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            const errorMessage = 'Erro ao criar lembrete';
            mockFetch.mockRejectedValueOnce(new Error(errorMessage));
            const novoLembrete = {
                avaliacaoId: '1',
                usuarioId: '1',
                tipo: 'lembrete',
                dataEnvio: new Date().toISOString()
            };
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.criarLembrete(novoLembrete);
            });
            (0, _globals.expect)(sucesso).toBe(false);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Erro ao criar lembrete',
                description: errorMessage,
                variant: 'destructive'
            });
        });
    });
    (0, _globals.describe)('atualizarLembrete', ()=>{
        (0, _globals.it)('deve atualizar lembrete com sucesso', async ()=>{
            const dadosAtualizacao = {
                dataEnvio: new Date().toISOString(),
                observacoes: 'Observação atualizada'
            };
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        dados: {
                            ...mockResultadoLembretes.dados[0],
                            ...dadosAtualizacao
                        }
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.atualizarLembrete('1', dadosAtualizacao);
            });
            (0, _globals.expect)(sucesso).toBe(true);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Lembrete atualizado',
                description: 'Lembrete atualizado com sucesso'
            });
        });
    });
    (0, _globals.describe)('removerLembrete', ()=>{
        (0, _globals.it)('deve remover lembrete com sucesso', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.removerLembrete('1');
            });
            (0, _globals.expect)(sucesso).toBe(true);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Lembrete removido',
                description: 'Lembrete removido com sucesso'
            });
        });
    });
    (0, _globals.describe)('executarAcaoLembrete', ()=>{
        (0, _globals.it)('deve executar ação no lembrete com sucesso', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        mensagem: 'Ação executada com sucesso'
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.executarAcaoLembrete('1', 'reenviar');
            });
            (0, _globals.expect)(sucesso).toBe(true);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Ação executada',
                description: 'Ação executada com sucesso'
            });
        });
    });
    (0, _globals.describe)('removerLembretesLote', ()=>{
        (0, _globals.it)('deve remover lembretes em lote com sucesso', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        mensagem: 'Lembretes removidos com sucesso'
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguardar inicialização
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            });
            let sucesso;
            await (0, _react.act)(async ()=>{
                sucesso = await result.current.removerLembretesLote('limpeza', {
                    dias: 30
                });
            });
            (0, _globals.expect)(sucesso).toBe(true);
            (0, _globals.expect)(mockToast).toHaveBeenCalledWith({
                title: 'Lembretes removidos',
                description: 'Lembretes removidos com sucesso'
            });
        });
    });
    (0, _globals.describe)('estados', ()=>{
        (0, _globals.it)('deve gerenciar estado de carregamento corretamente', async ()=>{
            let resolvePromise;
            const promise = new Promise((resolve)=>{
                resolvePromise = resolve;
            });
            // Mock fetch para simular delay
            mockFetch.mockImplementationOnce(()=>promise);
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Inicialmente deve estar carregando (buscarLembretes é chamado no useEffect)
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(true);
            }, {
                timeout: 15000
            });
            // Resolve promise para finalizar carregamento
            resolvePromise({
                ok: true,
                json: async ()=>mockResultadoLembretes
            });
            // Aguarda o carregamento terminar
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.carregando).toBe(false);
            }, {
                timeout: 15000
            });
        }, 20000);
        (0, _globals.it)('deve gerenciar paginação corretamente', async ()=>{
            const resultadoComPaginacao = {
                ...mockResultadoLembretes,
                paginacao: {
                    paginaAtual: 1,
                    totalPaginas: 3,
                    totalItens: 25,
                    itensPorPagina: 10
                }
            };
            // Mock dinâmico baseado na URL para ser resiliente a chamadas extras
            mockFetch.mockImplementation((input)=>{
                // Extrai a URL de forma robusta (suporta string, URL e Request)
                let urlStr;
                if (typeof input === 'string') {
                    urlStr = input;
                } else if (input instanceof URL) {
                    urlStr = input.toString();
                } else {
                    // Pode ser um Request-like com propriedade url
                    // @ts-ignore - ambiente de teste pode não ter tipo Request completo
                    urlStr = input?.url ?? String(input);
                }
                // Garante URL absoluta para usar URLSearchParams
                let paginaParam = 1;
                try {
                    const parsed = new URL(urlStr, 'http://localhost');
                    const p = parsed.searchParams.get('pagina');
                    paginaParam = p ? Number(p) : 1;
                } catch  {
                    // Se não conseguir parsear, mantém página 1
                    paginaParam = 1;
                }
                const resposta = {
                    ...resultadoComPaginacao,
                    paginacao: {
                        ...resultadoComPaginacao.paginacao,
                        paginaAtual: paginaParam
                    }
                };
                return Promise.resolve({
                    ok: true,
                    json: async ()=>resposta
                });
            });
            const { result } = (0, _react.renderHook)(()=>(0, _uselembretes.useLembretes)());
            // Aguarda a páginação real ser aplicada após a busca inicial
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.paginacao.totalPaginas).toBe(3);
            }, {
                timeout: 15000
            });
            // Verifica estado inicial da paginação (após a busca)
            (0, _globals.expect)(result.current.paginacao.paginaAtual).toBe(1);
            (0, _globals.expect)(result.current.paginacao.totalPaginas).toBe(3);
            // Testa navegação para próxima página usando a API real do hook
            await (0, _react.act)(async ()=>{
                await result.current.buscarLembretes({
                    pagina: 2
                });
            });
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(result.current.paginacao.paginaAtual).toBe(2);
            }, {
                timeout: 15000
            });
        }, 20000);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTmVyZXUgSnJcXERvY3VtZW50c1xcRGV2XFxuZXdcXHNyY1xcaG9va3NcXF9fdGVzdHNfX1xcdXNlLWxlbWJyZXRlcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgdXNlTGVtYnJldGVzIH0gZnJvbSAnLi4vdXNlLWxlbWJyZXRlcyc7XG5cbi8vIE1vY2sgZG8gaG9vayB1c2VUb2FzdFxuY29uc3QgbW9ja1RvYXN0ID0gamVzdC5mbigpO1xuamVzdC5tb2NrKCdAL2hvb2tzL3VzZS10b2FzdCcsICgpID0+ICh7XG4gIHVzZVRvYXN0OiAoKSA9PiAoe1xuICAgIHRvYXN0OiBtb2NrVG9hc3QsXG4gIH0pLFxufSkpO1xuXG4vLyBNb2NrIGRvIGZldGNoIGdsb2JhbFxuY29uc3QgbW9ja0ZldGNoID0gamVzdC5mbigpO1xuKGdsb2JhbCBhcyBhbnkpLmZldGNoID0gbW9ja0ZldGNoO1xuXG4vLyBNb2NrIGRvcyBkYWRvcyBkZSB0ZXN0ZVxuY29uc3QgbW9ja1Jlc3VsdGFkb0xlbWJyZXRlcyA9IHtcbiAgZGFkb3M6IFtcbiAgICB7XG4gICAgICBpZDogJzEnLFxuICAgICAgYXZhbGlhY2FvSWQ6ICcxJyxcbiAgICAgIHVzdWFyaW9JZDogJzEnLFxuICAgICAgdGlwbzogJ2xlbWJyZXRlJyxcbiAgICAgIGRhdGFFbnZpbzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZW52aWFkbzogZmFsc2UsXG4gICAgICB0ZW50YXRpdmFzOiAwLFxuICAgICAgdWx0aW1hVGVudGF0aXZhOiBudWxsLFxuICAgICAgZXJybzogbnVsbCxcbiAgICAgIGNyaWFkb0VtOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1c3VhcmlvOiB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIG5vbWU6ICdKb8OjbyBTaWx2YScsXG4gICAgICAgIGVtYWlsOiAnam9hb0B0ZXN0ZS5jb20nLFxuICAgICAgfSxcbiAgICAgIGF2YWxpYWNhbzoge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBwcmF6bzogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdGF0dXM6ICdwZW5kZW50ZScsXG4gICAgICAgIGF2YWxpYWRvOiB7XG4gICAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgICBub21lOiAnSm/Do28gU2lsdmEnLFxuICAgICAgICAgIGVtYWlsOiAnam9hb0B0ZXN0ZS5jb20nLFxuICAgICAgICB9LFxuICAgICAgICBhdmFsaWFkb3I6IHtcbiAgICAgICAgICBpZDogJzInLFxuICAgICAgICAgIG5vbWU6ICdNYXJpYSBTYW50b3MnLFxuICAgICAgICAgIGVtYWlsOiAnbWFyaWFAdGVzdGUuY29tJyxcbiAgICAgICAgfSxcbiAgICAgICAgcGVyaW9kbzoge1xuICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgbm9tZTogJ1ExIDIwMjQnLFxuICAgICAgICAgIGRhdGFJbmljaW86ICcyMDI0LTAxLTAxJyxcbiAgICAgICAgICBkYXRhRmltOiAnMjAyNC0wMy0zMScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIF0sXG4gIHBhZ2luYWNhbzoge1xuICAgIHBhZ2luYUF0dWFsOiAxLFxuICAgIHRvdGFsUGFnaW5hczogMSxcbiAgICB0b3RhbEl0ZW5zOiAxLFxuICAgIGl0ZW5zUG9yUGFnaW5hOiA1MCxcbiAgICB0ZW1Qcm94aW1hUGFnaW5hOiBmYWxzZSxcbiAgICB0ZW1QYWdpbmFBbnRlcmlvcjogZmFsc2UsXG4gIH0sXG59O1xuXG5kZXNjcmliZSgndXNlTGVtYnJldGVzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAvLyBNb2NrIGluaWNpYWwgcGFyYSB1c2VFZmZlY3RcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzdWx0YWRvTGVtYnJldGVzLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzZXRBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnaW5pY2lhbGl6YcOnw6NvJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGNhcnJlZ2FyIGxlbWJyZXRlcyBuYSBpbmljaWFsaXphw6fDo28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMZW1icmV0ZXMoKSk7XG5cbiAgICAgIC8vIEFndWFyZGFyIG8gdXNlRWZmZWN0IGV4ZWN1dGFyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sZW1icmV0ZXMpLnRvRXF1YWwobW9ja1Jlc3VsdGFkb0xlbWJyZXRlcy5kYWRvcyk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJybykudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1c2NhckxlbWJyZXRlcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBidXNjYXIgbGVtYnJldGVzIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGVtYnJldGVzKCkpO1xuXG4gICAgICAvLyBBZ3VhcmRhciBpbmljaWFsaXphw6fDo29cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FycmVnYW5kbykudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmF6ZXIgbm92YSBidXNjYVxuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzdWx0YWRvTGVtYnJldGVzLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmJ1c2NhckxlbWJyZXRlcygpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sZW1icmV0ZXMpLnRvRXF1YWwobW9ja1Jlc3VsdGFkb0xlbWJyZXRlcy5kYWRvcyk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FycmVnYW5kbykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJybykudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxpZGFyIGNvbSBlcnJvIG5hIGJ1c2NhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gJ0Vycm8gYW8gYnVzY2FyIGxlbWJyZXRlcyc7XG5cbiAgICAgIC8vIEZvcsOnYXIgdG9kYXMgYXMgY2hhbWFkYXMgYSByZXRvcm5hcmVtIGVycm8gbmVzdGUgdGVzdGUgKGV2aXRhIGNvcnJpZGEgY29tIFN0cmljdE1vZGUpXG4gICAgICBtb2NrRmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgZXJybzogZXJyb3JNZXNzYWdlIH0pLFxuICAgICAgfSBhcyBhbnkpKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGVtYnJldGVzKCkpO1xuXG4gICAgICAvLyBBZ3VhcmRhIGVzdGFkbyBzZXIgYXR1YWxpemFkbyBwZWxvIGZsdXhvIGRlIGVycm9cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FycmVnYW5kbykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvKS50b0JlKGVycm9yTWVzc2FnZSk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDE1MDAwIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiAnRXJybyBhbyBidXNjYXIgbGVtYnJldGVzJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgICAgLy8gTsOjbyBhZmlybWFyIGNvbnRhZ2VtIGV4YXRhIGRldmlkbyBhIHBvc3PDrXZlaXMgY2hhbWFkYXMgZHVwbGljYWRhcyBlbSBTdHJpY3RNb2RlXG4gICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdidXNjYXJMZW1icmV0ZScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBidXNjYXIgbGVtYnJldGUgZXNwZWPDrWZpY28gY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDb25maWd1cmFyIG1vY2tzIHNlcGFyYWRhbWVudGUgcGFyYSBldml0YXIgaW50ZXJmZXLDqm5jaWEgZSBjb2JyaXIgY2hhbWFkYXMgZHVwbGljYWRhc1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzdWx0YWRvTGVtYnJldGVzLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzdWx0YWRvTGVtYnJldGVzLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMZW1icmV0ZXMoKSk7XG5cbiAgICAgIC8vIEFndWFyZGFyIGluaWNpYWxpemHDp8Ojb1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYXJyZWdhbmRvKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIHBhcmEgYnVzY2FyTGVtYnJldGUgZXNwZWPDrWZpY29cbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgZGFkb3M6IG1vY2tSZXN1bHRhZG9MZW1icmV0ZXMuZGFkb3NbMF0gfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGxldCBsZW1icmV0ZTtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGxlbWJyZXRlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuYnVzY2FyTGVtYnJldGUoJzEnKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWZXJpZmljYSBzZSByZXRvcm5hIG8gb2JqZXRvIGRpcmV0b1xuICAgICAgZXhwZWN0KGxlbWJyZXRlKS50b0VxdWFsKG1vY2tSZXN1bHRhZG9MZW1icmV0ZXMuZGFkb3NbMF0pO1xuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvbGVtYnJldGVzLzEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxpZGFyIGNvbSBlcnJvIGFvIGJ1c2NhciBsZW1icmV0ZSBlc3BlY8OtZmljbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUxlbWJyZXRlcygpKTtcblxuICAgICAgLy8gQWd1YXJkYXIgaW5pY2lhbGl6YcOnw6NvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICdMZW1icmV0ZSBuw6NvIGVuY29udHJhZG8nO1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG5cbiAgICAgIGxldCBsZW1icmV0ZTtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGxlbWJyZXRlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuYnVzY2FyTGVtYnJldGUoJzk5OScpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChsZW1icmV0ZSkudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdGl0bGU6ICdFcnJvIGFvIGJ1c2NhciBsZW1icmV0ZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyaWFyTGVtYnJldGUnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgY3JpYXIgbGVtYnJldGUgY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBub3ZvTGVtYnJldGUgPSB7XG4gICAgICAgIGF2YWxpYWNhb0lkOiAnMScsXG4gICAgICAgIHVzdWFyaW9JZDogJzEnLFxuICAgICAgICB0aXBvOiAnbGVtYnJldGUnIGFzIGNvbnN0LFxuICAgICAgICBkYXRhRW52aW86IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tGZXRjaFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBkYWRvczogeyAuLi5ub3ZvTGVtYnJldGUsIGlkOiAnMicgfSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3VsdGFkb0xlbWJyZXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUxlbWJyZXRlcygpKTtcblxuICAgICAgLy8gQWd1YXJkYXIgaW5pY2lhbGl6YcOnw6NvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBzdWNlc3NvO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgc3VjZXNzbyA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmNyaWFyTGVtYnJldGUobm92b0xlbWJyZXRlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3VjZXNzbykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdGl0bGU6ICdMZW1icmV0ZSBjcmlhZG8nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xlbWJyZXRlIGNyaWFkbyBjb20gc3VjZXNzbycsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxpZGFyIGNvbSBlcnJvIGFvIGNyaWFyIGxlbWJyZXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGVtYnJldGVzKCkpO1xuXG4gICAgICAvLyBBZ3VhcmRhciBpbmljaWFsaXphw6fDo29cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FycmVnYW5kbykudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gJ0Vycm8gYW8gY3JpYXIgbGVtYnJldGUnO1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG5cbiAgICAgIGNvbnN0IG5vdm9MZW1icmV0ZSA9IHtcbiAgICAgICAgYXZhbGlhY2FvSWQ6ICcxJyxcbiAgICAgICAgdXN1YXJpb0lkOiAnMScsXG4gICAgICAgIHRpcG86ICdsZW1icmV0ZScgYXMgY29uc3QsXG4gICAgICAgIGRhdGFFbnZpbzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfTtcblxuICAgICAgbGV0IHN1Y2Vzc287XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBzdWNlc3NvID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuY3JpYXJMZW1icmV0ZShub3ZvTGVtYnJldGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzdWNlc3NvKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdGl0bGU6ICdFcnJvIGFvIGNyaWFyIGxlbWJyZXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYXR1YWxpemFyTGVtYnJldGUnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgYXR1YWxpemFyIGxlbWJyZXRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGFkb3NBdHVhbGl6YWNhbyA9IHtcbiAgICAgICAgZGF0YUVudmlvOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG9ic2VydmFjb2VzOiAnT2JzZXJ2YcOnw6NvIGF0dWFsaXphZGEnLFxuICAgICAgfTtcblxuICAgICAgbW9ja0ZldGNoXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IGRhZG9zOiB7IC4uLm1vY2tSZXN1bHRhZG9MZW1icmV0ZXMuZGFkb3NbMF0sIC4uLmRhZG9zQXR1YWxpemFjYW8gfSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3VsdGFkb0xlbWJyZXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUxlbWJyZXRlcygpKTtcblxuICAgICAgLy8gQWd1YXJkYXIgaW5pY2lhbGl6YcOnw6NvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBzdWNlc3NvO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgc3VjZXNzbyA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmF0dWFsaXphckxlbWJyZXRlKCcxJywgZGFkb3NBdHVhbGl6YWNhbyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHN1Y2Vzc28pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiAnTGVtYnJldGUgYXR1YWxpemFkbycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTGVtYnJldGUgYXR1YWxpemFkbyBjb20gc3VjZXNzbycsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlbW92ZXJMZW1icmV0ZScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZW1vdmVyIGxlbWJyZXRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tSZXN1bHRhZG9MZW1icmV0ZXMsXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMZW1icmV0ZXMoKSk7XG5cbiAgICAgIC8vIEFndWFyZGFyIGluaWNpYWxpemHDp8Ojb1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYXJyZWdhbmRvKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgc3VjZXNzbztcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHN1Y2Vzc28gPSBhd2FpdCByZXN1bHQuY3VycmVudC5yZW1vdmVyTGVtYnJldGUoJzEnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3VjZXNzbykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdGl0bGU6ICdMZW1icmV0ZSByZW1vdmlkbycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTGVtYnJldGUgcmVtb3ZpZG8gY29tIHN1Y2Vzc28nLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdleGVjdXRhckFjYW9MZW1icmV0ZScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBleGVjdXRhciBhw6fDo28gbm8gbGVtYnJldGUgY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgbWVuc2FnZW06ICdBw6fDo28gZXhlY3V0YWRhIGNvbSBzdWNlc3NvJyB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3VsdGFkb0xlbWJyZXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUxlbWJyZXRlcygpKTtcblxuICAgICAgLy8gQWd1YXJkYXIgaW5pY2lhbGl6YcOnw6NvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBzdWNlc3NvO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgc3VjZXNzbyA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmV4ZWN1dGFyQWNhb0xlbWJyZXRlKCcxJywgJ3JlZW52aWFyJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHN1Y2Vzc28pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiAnQcOnw6NvIGV4ZWN1dGFkYScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQcOnw6NvIGV4ZWN1dGFkYSBjb20gc3VjZXNzbycsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlbW92ZXJMZW1icmV0ZXNMb3RlJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJlbW92ZXIgbGVtYnJldGVzIGVtIGxvdGUgY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgbWVuc2FnZW06ICdMZW1icmV0ZXMgcmVtb3ZpZG9zIGNvbSBzdWNlc3NvJyB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3VsdGFkb0xlbWJyZXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUxlbWJyZXRlcygpKTtcblxuICAgICAgLy8gQWd1YXJkYXIgaW5pY2lhbGl6YcOnw6NvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBzdWNlc3NvO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgc3VjZXNzbyA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LnJlbW92ZXJMZW1icmV0ZXNMb3RlKCdsaW1wZXphJywgeyBkaWFzOiAzMCB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3VjZXNzbykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdGl0bGU6ICdMZW1icmV0ZXMgcmVtb3ZpZG9zJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdMZW1icmV0ZXMgcmVtb3ZpZG9zIGNvbSBzdWNlc3NvJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXN0YWRvcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBnZXJlbmNpYXIgZXN0YWRvIGRlIGNhcnJlZ2FtZW50byBjb3JyZXRhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVzb2x2ZVByb21pc2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGZldGNoIHBhcmEgc2ltdWxhciBkZWxheVxuICAgICAgbW9ja0ZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4gcHJvbWlzZSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VMZW1icmV0ZXMoKSk7XG5cbiAgICAgIC8vIEluaWNpYWxtZW50ZSBkZXZlIGVzdGFyIGNhcnJlZ2FuZG8gKGJ1c2NhckxlbWJyZXRlcyDDqSBjaGFtYWRvIG5vIHVzZUVmZmVjdClcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FycmVnYW5kbykudG9CZSh0cnVlKTtcbiAgICAgIH0sIHsgdGltZW91dDogMTUwMDAgfSk7XG5cbiAgICAgIC8vIFJlc29sdmUgcHJvbWlzZSBwYXJhIGZpbmFsaXphciBjYXJyZWdhbWVudG9cbiAgICAgIHJlc29sdmVQcm9taXNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tSZXN1bHRhZG9MZW1icmV0ZXNcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZ3VhcmRhIG8gY2FycmVnYW1lbnRvIHRlcm1pbmFyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnJlZ2FuZG8pLnRvQmUoZmFsc2UpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAxNTAwMCB9KTtcbiAgICB9LCAyMDAwMCk7XG5cbiAgICBpdCgnZGV2ZSBnZXJlbmNpYXIgcGFnaW5hw6fDo28gY29ycmV0YW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0YWRvQ29tUGFnaW5hY2FvID0ge1xuICAgICAgICAuLi5tb2NrUmVzdWx0YWRvTGVtYnJldGVzLFxuICAgICAgICBwYWdpbmFjYW86IHtcbiAgICAgICAgICBwYWdpbmFBdHVhbDogMSxcbiAgICAgICAgICB0b3RhbFBhZ2luYXM6IDMsXG4gICAgICAgICAgdG90YWxJdGVuczogMjUsXG4gICAgICAgICAgaXRlbnNQb3JQYWdpbmE6IDEwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgZGluw6JtaWNvIGJhc2VhZG8gbmEgVVJMIHBhcmEgc2VyIHJlc2lsaWVudGUgYSBjaGFtYWRhcyBleHRyYXNcbiAgICAgIG1vY2tGZXRjaC5tb2NrSW1wbGVtZW50YXRpb24oKGlucHV0OiBSZXF1ZXN0SW5mbyB8IFVSTCkgPT4ge1xuICAgICAgICAvLyBFeHRyYWkgYSBVUkwgZGUgZm9ybWEgcm9idXN0YSAoc3Vwb3J0YSBzdHJpbmcsIFVSTCBlIFJlcXVlc3QpXG4gICAgICAgIGxldCB1cmxTdHI6IHN0cmluZztcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB1cmxTdHIgPSBpbnB1dDtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICAgIHVybFN0ciA9IGlucHV0LnRvU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUG9kZSBzZXIgdW0gUmVxdWVzdC1saWtlIGNvbSBwcm9wcmllZGFkZSB1cmxcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gYW1iaWVudGUgZGUgdGVzdGUgcG9kZSBuw6NvIHRlciB0aXBvIFJlcXVlc3QgY29tcGxldG9cbiAgICAgICAgICB1cmxTdHIgPSBpbnB1dD8udXJsID8/IFN0cmluZyhpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHYXJhbnRlIFVSTCBhYnNvbHV0YSBwYXJhIHVzYXIgVVJMU2VhcmNoUGFyYW1zXG4gICAgICAgIGxldCBwYWdpbmFQYXJhbSA9IDE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmxTdHIsICdodHRwOi8vbG9jYWxob3N0Jyk7XG4gICAgICAgICAgY29uc3QgcCA9IHBhcnNlZC5zZWFyY2hQYXJhbXMuZ2V0KCdwYWdpbmEnKTtcbiAgICAgICAgICBwYWdpbmFQYXJhbSA9IHAgPyBOdW1iZXIocCkgOiAxO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBTZSBuw6NvIGNvbnNlZ3VpciBwYXJzZWFyLCBtYW50w6ltIHDDoWdpbmEgMVxuICAgICAgICAgIHBhZ2luYVBhcmFtID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3Bvc3RhID0ge1xuICAgICAgICAgIC4uLnJlc3VsdGFkb0NvbVBhZ2luYWNhbyxcbiAgICAgICAgICBwYWdpbmFjYW86IHsgLi4ucmVzdWx0YWRvQ29tUGFnaW5hY2FvLnBhZ2luYWNhbywgcGFnaW5hQXR1YWw6IHBhZ2luYVBhcmFtIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiByZXNwb3N0YVxuICAgICAgICB9IGFzIGFueSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTGVtYnJldGVzKCkpO1xuXG4gICAgICAvLyBBZ3VhcmRhIGEgcMOhZ2luYcOnw6NvIHJlYWwgc2VyIGFwbGljYWRhIGFww7NzIGEgYnVzY2EgaW5pY2lhbFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wYWdpbmFjYW8udG90YWxQYWdpbmFzKS50b0JlKDMpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAxNTAwMCB9KTtcblxuICAgICAgLy8gVmVyaWZpY2EgZXN0YWRvIGluaWNpYWwgZGEgcGFnaW5hw6fDo28gKGFww7NzIGEgYnVzY2EpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucGFnaW5hY2FvLnBhZ2luYUF0dWFsKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnBhZ2luYWNhby50b3RhbFBhZ2luYXMpLnRvQmUoMyk7XG5cbiAgICAgIC8vIFRlc3RhIG5hdmVnYcOnw6NvIHBhcmEgcHLDs3hpbWEgcMOhZ2luYSB1c2FuZG8gYSBBUEkgcmVhbCBkbyBob29rXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5idXNjYXJMZW1icmV0ZXMoeyBwYWdpbmE6IDIgfSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wYWdpbmFjYW8ucGFnaW5hQXR1YWwpLnRvQmUoMik7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDE1MDAwIH0pO1xuICAgIH0sIDIwMDAwKTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VUb2FzdCIsInRvYXN0IiwibW9ja1RvYXN0IiwiZm4iLCJtb2NrRmV0Y2giLCJnbG9iYWwiLCJmZXRjaCIsIm1vY2tSZXN1bHRhZG9MZW1icmV0ZXMiLCJkYWRvcyIsImlkIiwiYXZhbGlhY2FvSWQiLCJ1c3VhcmlvSWQiLCJ0aXBvIiwiZGF0YUVudmlvIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZW52aWFkbyIsInRlbnRhdGl2YXMiLCJ1bHRpbWFUZW50YXRpdmEiLCJlcnJvIiwiY3JpYWRvRW0iLCJ1c3VhcmlvIiwibm9tZSIsImVtYWlsIiwiYXZhbGlhY2FvIiwicHJhem8iLCJub3ciLCJzdGF0dXMiLCJhdmFsaWFkbyIsImF2YWxpYWRvciIsInBlcmlvZG8iLCJkYXRhSW5pY2lvIiwiZGF0YUZpbSIsInBhZ2luYWNhbyIsInBhZ2luYUF0dWFsIiwidG90YWxQYWdpbmFzIiwidG90YWxJdGVucyIsIml0ZW5zUG9yUGFnaW5hIiwidGVtUHJveGltYVBhZ2luYSIsInRlbVBhZ2luYUFudGVyaW9yIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwib2siLCJqc29uIiwiYWZ0ZXJFYWNoIiwicmVzZXRBbGxNb2NrcyIsIml0IiwicmVzdWx0IiwicmVuZGVySG9vayIsInVzZUxlbWJyZXRlcyIsIndhaXRGb3IiLCJleHBlY3QiLCJjdXJyZW50IiwiY2FycmVnYW5kbyIsInRvQmUiLCJsZW1icmV0ZXMiLCJ0b0VxdWFsIiwidG9CZU51bGwiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwiYWN0IiwiYnVzY2FyTGVtYnJldGVzIiwiZXJyb3JNZXNzYWdlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aW1lb3V0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidmFyaWFudCIsImxlbWJyZXRlIiwiYnVzY2FyTGVtYnJldGUiLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJFcnJvciIsIm5vdm9MZW1icmV0ZSIsInN1Y2Vzc28iLCJjcmlhckxlbWJyZXRlIiwiZGFkb3NBdHVhbGl6YWNhbyIsIm9ic2VydmFjb2VzIiwiYXR1YWxpemFyTGVtYnJldGUiLCJzdWNjZXNzIiwicmVtb3ZlckxlbWJyZXRlIiwibWVuc2FnZW0iLCJleGVjdXRhckFjYW9MZW1icmV0ZSIsInJlbW92ZXJMZW1icmV0ZXNMb3RlIiwiZGlhcyIsInJlc29sdmVQcm9taXNlIiwicHJvbWlzZSIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJyZXN1bHRhZG9Db21QYWdpbmFjYW8iLCJpbnB1dCIsInVybFN0ciIsIlVSTCIsInRvU3RyaW5nIiwidXJsIiwiU3RyaW5nIiwicGFnaW5hUGFyYW0iLCJwYXJzZWQiLCJwIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiTnVtYmVyIiwicmVzcG9zdGEiLCJwYWdpbmEiXSwibWFwcGluZ3MiOiI7QUFNQUEsS0FBS0MsSUFBSSxDQUFDLHFCQUFxQixJQUFPLENBQUE7UUFDcENDLFVBQVUsSUFBTyxDQUFBO2dCQUNmQyxPQUFPQztZQUNULENBQUE7SUFDRixDQUFBOzs7O3VCQVZ5Qzt5QkFDbUI7OEJBQy9CO0FBRTdCLHdCQUF3QjtBQUN4QixNQUFNQSxZQUFZSixLQUFLSyxFQUFFO0FBT3pCLHVCQUF1QjtBQUN2QixNQUFNQyxZQUFZTixLQUFLSyxFQUFFO0FBQ3hCRSxPQUFlQyxLQUFLLEdBQUdGO0FBRXhCLDBCQUEwQjtBQUMxQixNQUFNRyx5QkFBeUI7SUFDN0JDLE9BQU87UUFDTDtZQUNFQyxJQUFJO1lBQ0pDLGFBQWE7WUFDYkMsV0FBVztZQUNYQyxNQUFNO1lBQ05DLFdBQVcsSUFBSUMsT0FB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